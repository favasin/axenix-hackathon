---
title: "Ограничения и допущения"
description: "Технические, правовые, организационные ограничения и принятые допущения проекта PresentAI."
weight: 2
draft: false
slug: ""
titleIcon: "fa-solid fa-lock"
---

## Содержание

- [Ограничения](#ограничения)
- [Допущения](#допущения)

---

## Ограничения

Ограничения — это факты, которые нельзя изменить в рамках текущего проекта. Они фиксируют технические, правовые, бюджетные и организационные рамки, внутри которых проектируется система.

| ID | Тип | Описание | Влияние на систему | Источник |
|----|-----|----------|--------------------|----------|
| CON-001 | Технический | Бэкенд реализован на **Python 3.12 + FastAPI**. Замена на другой язык/фреймворк не рассматривается в горизонте проекта | Все микросервисы и Celery workers — Python; LangChain/LangGraph — нативная экосистема | [01_architecture/_index.md](../01_architecture/_index.md) |
| CON-002 | Технический | Векторное хранилище — **Qdrant 1.9+**. Альтернативы (Pinecone, pgvector) исключены из-за требования on-premise | Изоляция тенантов — отдельные коллекции `org_{id}_docs`; sharding при > 10 млн векторов | [01_architecture/_index.md](../01_architecture/_index.md) |
| CON-003 | Технический | Реляционная БД — **PostgreSQL 16** с RLS и партиционированием. Другие РСУБД не рассматриваются | Вся реляционная модель (21 таблица), миграции через Alembic | [relational.md](../../03_backend/01_info_models/relational.md) |
| CON-004 | Технический | Кэш и брокер очередей — **Redis 7 Cluster Mode**. Замена (Memcached, RabbitMQ) не рассматривается | Celery workers, semantic cache, session, checkpoint, rate limiting — всё через Redis | [cache.md](../../03_backend/01_info_models/cache.md) |
| CON-005 | Технический | Генерация PPTX — **python-pptx**. Сторонние SaaS-рендереры исключены из-за требований конфиденциальности | Рендеринг PPTX на стороне сервера, без передачи данных слайдов внешним сервисам | [01_architecture/_index.md](../01_architecture/_index.md) |
| CON-006 | Технический | Оркестрация — **Kubernetes (EKS/GKE)** с Helm Charts. IaC — Terraform. Без Kubernetes on-premise деплой возможен через Docker Compose | Горизонтальное масштабирование, rolling update, HPA — K8s-native | [01_architecture/_index.md](../01_architecture/_index.md) |
| CON-007 | Технический | Фронтенд — **Next.js 14 (React)**. Замена фреймворка не рассматривается | SSR, WebSocket клиент, PWA — стандартный стек Next.js | [02_frontend/_index.md](../../02_frontend/_index.md) |
| CON-008 | Технический | Парсинг документов — **Apache Tika / unstructured.io**. Проприетарные SaaS-парсеры исключены | Все поддерживаемые форматы (PDF, DOCX, XLSX, PPTX, CSV, изображения) обрабатываются локально | [01_architecture/_index.md](../01_architecture/_index.md) |
| CON-009 | Правовой | Данные граждан РФ хранятся **исключительно на серверах в РФ** (152-ФЗ, ст. 18). Трансграничная передача без согласия субъекта запрещена | Требуется отдельный RU-регион развёртывания; EU и RU инстансы изолированы | [NFR-020](./01_BR/07_nonfunctional.md#nfr-020-соответствие-152-фз-россия) |
| CON-010 | Правовой | Хранение IP-адресов пользователей в аналитике **запрещено** (GDPR). Допускается только хеш `SHA-256(ip + daily_salt)` | В `presentation_analytics` MongoDB хранится `ip_hash`, не `ip_address` | [NFR-021](./01_BR/07_nonfunctional.md#nfr-021-соответствие-gdpr-ес) |
| CON-011 | Правовой | Изображения для слайдов берутся **только из лицензированных библиотек** (Shutterstock/Getty API, Font Awesome). AI-генерация изображений (DALL-E, Stable Diffusion) — только по явному consent пользователя | Нет зависимости от AI image generation API в стандартном flow | [01_architecture/_index.md](../01_architecture/_index.md) — Альтернатива 3 |
| CON-012 | Организационный | Горизонт проектирования — **2025–2026**. Требования зафиксированы для MVP (мес. 1–6), без планирования архитектурных изменений за пределами Growth-фазы (мес. 12) | Требования к масштабированию рассчитаны на DAU 10 000 (мес. 12) | [01_BR.md](./01_BR/01_BR.md) |
| CON-013 | Бюджетный | Стоимость LLM-вызовов на 1 презентацию (15 слайдов) **не превышает $0.15** как целевое значение unit economics | Обязательны semantic caching, model tiering (Haiku для постпроцессинга), batching | [NFR-022](./01_BR/07_nonfunctional.md#nfr-022-стоимость-llm-операций) |
| CON-014 | Технический | Аутентификация — **только** через SSO (SAML 2.0, OAuth 2.0) или email+password. Сторонние Identity Provider не поддерживаются за рамками Google, Microsoft, Okta | Три встроенных провайдера; кастомный SAML IdP — через конфигурацию Enterprise | [01_architecture/_index.md](../01_architecture/_index.md) |
| CON-015 | Технический | Документальные трейсы генерации хранятся в **MongoDB 7.0** (или PostgreSQL JSONB как альтернатива). Выбор обусловлен высокой вариативностью схемы и объёмом вложенных документов | `generation_traces` и `presentation_analytics` — MongoDB collections | [documents.md](../../03_backend/01_info_models/documents.md) |

---

## Допущения

Допущения — это утверждения, принятые как истинные при проектировании. Если допущение нарушается, система требует пересмотра соответствующей части архитектуры.

| ID | Описание | Риск при нарушении | Вероятность нарушения | Источник |
|----|----------|--------------------|-----------------------|----------|
| ASS-001 | LLM API-провайдер (Anthropic Claude) обеспечивает uptime **≥ 99.5%** и средний latency ответа < 5 сек для Sonnet | Деградация основной функции генерации; активация fallback на GPT-4o. При недоступности обоих — полный сбой генерации | Средняя (LLM API бывают нестабильны) | [NFR-011](./01_BR/07_nonfunctional.md) |
| ASS-002 | Пользователи загружают документы на **русском или английском языке**. Поддержка других языков (китайский, арабский, RTL) не входит в MVP | RAG-поиск и постпроцессинг оптимизированы под RU/EN; добавление языков потребует отдельной настройки chunking и embedding | Низкая (целевой рынок РФ + СНГ) | [01_BR.md](./01_BR/01_BR.md) |
| ASS-003 | Embedding model `text-embedding-3-large` (OpenAI) остаётся **API-доступной** и не меняет размерность вектора (3072d) в течение проекта | При изменении размерности — необходимо переиндексировать все коллекции Qdrant (трудоёмко при > 1M векторов) | Низкая (OpenAI deprecation policy — 6 мес. notice) | [vector_store.md](../../03_backend/01_info_models/vector_store.md) |
| ASS-004 | Kubernetes-кластер (EKS/GKE) обеспечивает **доступность ≥ 99.9%** как managed service | Снижение uptime API до уровня ниже NFR-009 (99.5%) | Низкая (SLA провайдеров: AWS EKS 99.95%) | [01_architecture/_index.md](../01_architecture/_index.md) |
| ASS-005 | S3 Object Storage (AWS S3 / Yandex S3) обеспечивает **durability 99.999999999%** (11 nine's) и доступность ≥ 99.9% | Потеря загруженных документов пользователей — критический инцидент | Очень низкая | [01_architecture/_index.md](../01_architecture/_index.md) |
| ASS-006 | Пользователи работают в **современных браузерах** (Chrome ≥ 110, Firefox ≥ 110, Safari ≥ 16). Поддержка IE и устаревших браузеров не предусмотрена | Функции WebSocket-стриминга и современный CSS не работают в IE | Низкая (целевая аудитория — B2B, корпоративные ноутбуки) | [NFR-016](./01_BR/07_nonfunctional.md) |
| ASS-007 | **Stripe** доступен как платёжная система для всех целевых рынков (РФ + СНГ + EU). Альтернативный платёжный шлюз для РФ (YooKassa) не предусмотрен в MVP | Невозможность приёма платежей от российских пользователей; потеря RU-сегмента | Средняя (Stripe работает с ограничениями в РФ) |  > ⚠️ [ТРЕБУЕТ УТОЧНЕНИЯ: Stripe ограничен в РФ с 2022 г. Вариант А: YooKassa как основной шлюз для RU-региона. Вариант Б: только Stripe для EU-сегмента, ручное выставление счётов для RU Enterprise. От этого зависит: биллинговый модуль, интеграция `subscriptions.external_subscription_id`] |
| ASS-008 | Размер среднего входного документа — **2–15 МБ** (PDF/DOCX/XLSX). Документы > 100 МБ — редкий случай, только Enterprise | Индексация документов > 100 МБ будет превышать NFR-005 и требует отдельной стратегии чанкования | Низкая | [01_architecture/_index.md](../01_architecture/_index.md) |
| ASS-009 | **Celery workers** корректно обрабатывают retry и checkpoint: при падении worker новая задача подхватывает checkpoint из Redis в течение ≤ 60 сек (время обнаружения heartbeat) | Потеря прогресса генерации; пользователь видит задачу как «зависшую» | Низкая (при корректной конфигурации `CELERY_TASK_TRACK_STARTED`) | [cache.md](../../03_backend/01_info_models/cache.md) |
| ASS-010 | **MongoDB** доступна как отдельное хранилище для document collections. Если требования инфраструктуры Enterprise запрещают MongoDB — трейсы хранятся в PostgreSQL JSONB (альтернативная ветка конфигурации) | Потребуется миграция схемы `generation_traces` и `presentation_analytics` в PostgreSQL JSONB | Низкая | [documents.md](../../03_backend/01_info_models/documents.md) |
