function radar_visualization(e){var t,n,s,o,a,c,d,u,f,p,v,b,j,O,x,C,E,F,z,I=42;function y(){var e=Math.sin(I++)*1e4;return e-Math.floor(e)}function P(e,t){return e+y()*(t-e)}function B(e,t){return e+(y()+y())*.5*(t-e)}const r=[{radial_min:0,radial_max:.5,factor_x:1,factor_y:1},{radial_min:.5,radial_max:1,factor_x:-1,factor_y:1},{radial_min:-1,radial_max:-.5,factor_x:-1,factor_y:-1},{radial_min:-.5,radial_max:0,factor_x:1,factor_y:-1}],l=[{radius:130},{radius:220},{radius:310},{radius:400}],m={x:-675,y:-420},S={x:-675,y:420},h=[{x:450,y:90},{x:-675,y:90},{x:-675,y:-310},{x:450,y:-310}];function A(e){var t=e.x,n=e.y;return{t:Math.atan2(n,t),r:Math.sqrt(t*t+n*n)}}function g(e){return{x:e.r*Math.cos(e.t),y:e.r*Math.sin(e.t)}}function _(e,t,n){var s=Math.min(t,n),o=Math.max(t,n);return Math.min(Math.max(e,s),o)}function L(e,t,n){return{t:e.t,r:_(e.r,t,n)}}function M(e,t,n){return{x:_(e.x,t.x,n.x),y:_(e.y,t.y,n.y)}}function R(e,t){var n={t:r[e].radial_min*Math.PI,r:t===0?30:l[t-1].radius},s={t:r[e].radial_max*Math.PI,r:l[t].radius},o={x:15*r[e].factor_x,y:15*r[e].factor_y},i={x:l[3].radius*r[e].factor_x,y:l[3].radius*r[e].factor_y};return{clipx:function(e){var t=M(e,o,i),a=L(A(t),n.r+15,s.r-15);return e.x=g(a).x,e.x},clipy:function(e){var t=M(e,o,i),a=L(A(t),n.r+15,s.r-15);return e.y=g(a).y,e.y},random:function(){return g({t:P(n.t,s.t),r:B(n.r,s.r)})}}}for(t=0;t<e.entries.length;t++)o=e.entries[t],o.segment=R(o.quadrant,o.ring),b=o.segment.random(),o.x=b.x,o.y=b.y,o.color=o.active||e.print_layout?e.rings[o.ring].color:e.colors.inactive;for(c=new Array(4),n=0;n<4;n++){c[n]=new Array(4);for(s=0;s<4;s++)c[n][s]=[]}for(t=0;t<e.entries.length;t++)o=e.entries[t],c[o.quadrant][o.ring].push(o);z=1;for(n of[2,3,1,0])for(s=0;s<4;s++){u=c[n][s],u.sort(function(e,t){return e.label.localeCompare(t.label)});for(t=0;t<u.length;t++)u[t].id=""+z++}function i(e,t){return"translate("+e+","+t+")"}function H(e){return[Math.max(0,r[e].factor_x*400)-420,Math.max(0,r[e].factor_y*400)-420,440,440].join(" ")}e.scale=e.scale||1,v=e.width*e.scale,C=e.height*e.scale,x=d3.select("svg#"+e.svg_id).style("background-color",e.colors.background).attr("width",v).attr("height",C),a=x.append("g"),"zoomed_quadrant"in e?x.attr("viewBox",H(e.zoomed_quadrant)):a.attr("transform",i(v/2,C/2).concat(`scale(${e.scale})`)),d=a.append("g"),d.append("line").attr("x1",0).attr("y1",-400).attr("x2",0).attr("y2",400).style("stroke",e.colors.grid).style("stroke-width",1),d.append("line").attr("x1",-400).attr("y1",0).attr("x2",400).attr("y2",0).style("stroke",e.colors.grid).style("stroke-width",1),F=d.append("defs"),O=F.append("filter").attr("x",0).attr("y",0).attr("width",1).attr("height",1).attr("id","solid"),O.append("feFlood").attr("flood-color","rgb(0, 0, 0, 0.8)"),O.append("feComposite").attr("in","SourceGraphic");for(t=0;t<l.length;t++)d.append("circle").attr("cx",0).attr("cy",0).attr("r",l[t].radius).style("fill","none").style("stroke",e.colors.grid).style("stroke-width",1),e.print_layout&&d.append("text").text(e.rings[t].name).attr("y",-l[t].radius+62).attr("text-anchor","middle").style("fill",e.rings[t].color).style("opacity",.35).style("font-family","Arial, Helvetica").style("font-size","42px").style("font-weight","bold").style("pointer-events","none").style("user-select","none");function w(e,t,n=null){var o=t<2?0:140,s=n==null?-16:n*12;return t%2===1&&(s=s+36+c[e][t-1].length*12),i(h[e].x+o,h[e].y+s)}if(e.print_layout){a.append("text").attr("transform",i(m.x,m.y)).text(e.title).style("font-family","Arial, Helvetica").style("font-size","30").style("font-weight","bold"),a.append("text").attr("transform",i(m.x,m.y+20)).text(e.date||"").style("font-family","Arial, Helvetica").style("font-size","14").style("fill","#999"),a.append("text").attr("transform",i(S.x,S.y)).text("▲ moved up     ▼ moved down").attr("xml:space","preserve").style("font-family","Arial, Helvetica").style("font-size","10px");for(f=a.append("g"),n=0;n<4;n++){f.append("text").attr("transform",i(h[n].x,h[n].y-45)).text(e.quadrants[n].name).style("font-family","Arial, Helvetica").style("font-size","18px").style("font-weight","bold");for(s=0;s<4;s++)f.append("text").attr("transform",w(n,s)).text(e.rings[s].name).style("font-family","Arial, Helvetica").style("font-size","12px").style("font-weight","bold").style("fill",e.rings[s].color),f.selectAll(".legend"+n+s).data(c[n][s]).enter().append("a").attr("href",function(e){return e.link?e.link:"#"}).attr("target",function(t){return t.link&&e.links_in_new_tabs?"_blank":null}).append("text").attr("transform",function(e,t){return w(n,s,t)}).attr("class","legend"+n+s).attr("id",function(e){return"legendItem"+e.id}).text(function(e){return e.id+". "+e.label}).style("font-family","Arial, Helvetica").style("font-size","11px").on("mouseover",function(e){N(e),k(e)}).on("mouseout",function(e){D(e),T(e)})}}E=a.append("g").attr("id","rink"),p=a.append("g").attr("id","bubble").attr("x",0).attr("y",0).style("opacity",0).style("pointer-events","none").style("user-select","none"),p.append("rect").attr("rx",4).attr("ry",4).style("fill","#333"),p.append("text").style("font-family","sans-serif").style("font-size","10px").style("fill","#fff"),p.append("path").attr("d","M 0,0 10,0 5,8 z").style("fill","#333");function N(t){if(t.active||e.print_layout){var s=d3.select("#bubble text").text(t.label),n=s.node().getBBox();d3.select("#bubble").attr("transform",i(t.x-n.width/2,t.y-16)).style("opacity",.8),d3.select("#bubble rect").attr("x",-5).attr("y",-n.height).attr("width",n.width+10).attr("height",n.height+4),d3.select("#bubble path").attr("transform",i(n.width/2-5,3))}}function D(){var t=d3.select("#bubble").attr("transform",i(0,0)).style("opacity",0)}function k(e){var t=document.getElementById("legendItem"+e.id);t.setAttribute("filter","url(#solid)"),t.setAttribute("fill","white")}function T(e){var t=document.getElementById("legendItem"+e.id);t.removeAttribute("filter"),t.removeAttribute("fill")}j=E.selectAll(".blip").data(e.entries).enter().append("g").attr("class","blip").attr("transform",function(e,t){return w(e.quadrant,e.ring,t)}).on("mouseover",function(e){N(e),k(e)}).on("mouseout",function(e){D(e),T(e)}),j.each(function(t){var s,n=d3.select(this);t.active&&Object.prototype.hasOwnProperty.call(t,"link")&&t.link&&(n=n.append("a").attr("xlink:href",t.link),e.links_in_new_tabs&&n.attr("target","_blank")),t.moved>0?n.append("path").attr("d","M -11,5 11,5 0,-13 z").style("fill",t.color):t.moved<0?n.append("path").attr("d","M -11,-5 11,-5 0,13 z").style("fill",t.color):n.append("circle").attr("r",9).attr("fill",t.color),(t.active||e.print_layout)&&(s=e.print_layout?t.id:t.label.match(/[a-z]/i),n.append("text").text(s).attr("y",3).attr("text-anchor","middle").style("fill","#fff").style("font-family","Arial, Helvetica").style("font-size",function(){return s.length>2?"8px":"9px"}).style("pointer-events","none").style("user-select","none"))});function V(){j.attr("transform",function(e){return i(e.segment.clipx(e),e.segment.clipy(e))})}d3.forceSimulation().nodes(e.entries).velocityDecay(.19).force("collision",d3.forceCollide().radius(12).strength(.85)).on("tick",V)}