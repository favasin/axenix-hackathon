<!doctype html><html><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=generator content="Hugo 0.124.1"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Синхронная генерация структуры (оглавления) презентации через RAG + LLM. Цель: p95 ≤ 10 с."><title>POST /presentations/{id}/generate/outline</title>
<link rel=icon href="/images/favicon.png?v=1772351355" type=image/x-icon><link rel=stylesheet rel=preload type=text/css href=/css/main.css><link rel=stylesheet type=text/css href=/css/external/all.min.css><link rel=stylesheet type=text/css href=/css/external/sharp-thin.min.css><link rel=stylesheet type=text/css href=/css/external/sharp-solid.min.css><link rel=stylesheet type=text/css href=/css/external/sharp-regular.min.css><link rel=stylesheet type=text/css href=/css/external/sharp-light.min.css><link rel=stylesheet type=text/css href=/css/external/sorttable/sorttable.min.css><link rel=stylesheet type=text/css href=/css/external/tippy/light-border.min.css><link rel=stylesheet type=text/css href=/css/external/techradar/radar.min.css><link rel=stylesheet type=text/css href=/css/external/form-js/form-js.min.css><link rel=stylesheet type=text/css href=/css/external/overlay-scrollbars/overlayscrollbars.min.css><link rel=stylesheet type=text/css href=/css/external/simplesearch/simplesearch.min.css></head><body onload=browserCompatibility()><div id=navbarInfo class="is-hidden modal-container"><div class="modal-content-box modal-text-box"><div class="card modal-title is-radiusless"><div class=card-header><p class="card-header-title is-marginless">About</p></div></div><div class=modal-content-container><div class="modal-content-block is-block"></div></div></div></div><div id=navbarShortcuts class="is-hidden modal-container"><div class="modal-content-box modal-text-box"><div class="card modal-title is-radiusless"><div class=card-header><p class="card-header-title is-marginless">Keyboard shortcuts</p></div></div><div class=modal-content-container><div class=modal-content-block><div class=modal-content><kbd>Shift</kbd><p>+</p><kbd>q</kbd></div><div class=modal-content><p class=has-text-weight-normal>Show current page QR code</p></div><div class=modal-content><kbd>Escape</kbd></div><div class=modal-content><p class=has-text-weight-normal>Close modals</p></div><div class=modal-content><kbd>Shift</kbd><p>+</p><kbd>i</kbd></div><div class=modal-content><p class=has-text-weight-normal>Show website information</p></div><div class=modal-content><kbd>Shift</kbd><p>+</p><kbd>k</kbd></div><div class=modal-content><p class=has-text-weight-normal>Show shortcuts</p></div><div class=modal-content><kbd>Shift</kbd><p>+</p><kbd>h</kbd></div><div class=modal-content><p class=has-text-weight-normal>Go to homepage</p></div><div class=modal-content><kbd>Shift</kbd><p>+</p><kbd>f</kbd></div><div class=modal-content><p class=has-text-weight-normal>Find on website</p></div><div class=modal-content><kbd>Shift</kbd><p>+</p><kbd>m</kbd></div><div class=modal-content><p class=has-text-weight-normal>Collapse/Uncollapse sidebar</p></div><div class=modal-content><kbd>Shift</kbd><p>+</p><kbd>t</kbd></div><div class=modal-content><p class=has-text-weight-normal>Collapse/Uncollapse table of contents</p></div><div class=modal-content><kbd>Shift</kbd><p>+</p><kbd>↑</kbd></div><div class=modal-content><p class=has-text-weight-normal>Go to the top of the page</p></div><div class=modal-content><kbd>Shift</kbd><p>+</p><kbd>↓</kbd></div><div class=modal-content><p class=has-text-weight-normal>Go to the bottom of the page</p></div><div class=modal-content><kbd>Shift</kbd><p>+</p><kbd>p</kbd></div><div class=modal-content><p class=has-text-weight-normal>Print current page</p></div></div></div></div></div><div id=modalContainer class="is-hidden modal-container"><div id=modal class=modal-content-box></div></div><nav id=navbar class=navbar role=navigation aria-label="main navigation"><div id=navbarItemsContainer class=navbar-brand><div id=globalLogoContainer class=is-flex><a id=globalLogo class="navbar-item navbar-item-standard is-paddingless" href=/><img id=globalLogoImg alt=Homepage src="/images/logo.png?v=1772351355"><div class=logo-header-container><span>Сервис генерации презентаций</span></div></a><a id=globalTouchLogo class="navbar-item navbar-item-standard is-paddingless" href=/><img alt=Homepage src="/images/logoTouch.png?v=1772351355"></a></div><div id=navbarItems class=is-flex><div id=navbarItemsStart class=is-flex></div><div id=navbarItemsEnd class=is-flex><div class=navbar-item><a id=listDocuments class="button navbar-item-standard" href=/listdocuments/><span class=icon><i class="fa-solid fa-list"></i>
</span><span class=icon-text>&nbsp;Список документов</span></a></div><div class=navbar-item><a id=searchButton class="button navbar-item-standard" href=/search/><span class=icon><i class="fa-solid fa-magnifying-glass"></i>
</span><span class=icon-text>&nbsp;Поиск</span></a></div><div class=navbar-item><a id=printButton class="button navbar-item-standard"><span class=icon-text>Print</span>
<span class=icon><i class="fa-solid fa-print fa-lg"></i></span></a></div></div></div></div></nav><div id=navbarOverlay></div><div class="columns is-mobile is-paddingless is-marginless" id=mainContainer><div id=sidebarContainer class="column is-narrow is-paddingless is-marginless"><div id=sidebarWrapper class=is-fixed><div id=sidebar class=is-marginless><aside class="menu is-paddingless is-marginless"><ul class="menu-list is-marginless is-paddingless"><div class="card is-fs-expandable-icon"><div class=card-header><a href=/00_overview/ class=card-header-title><i class='fa-solid fa-circle-info fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class="is-marginless is-entries-expandable is-entries-shrinked"><div class=card><div class=card-header><a href=/00_overview/ class=card-header-title title='Описание и артефакты анализа'><i class='fa-solid fa-circle-info fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Описание и артефакты анализа</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked"><span class=icon></span></a></div></div><ul class=is-marginless><div><div><li class="is-marginless is-entries-expandable is-entries-shrinked"><div class=card><div class=card-header><a href=/00_overview/01_br/ class=card-header-title title=Требования><i class='fa-solid fa-folder-open'></i><p class="pt-0 pb-0 pr-2 pl-1">Требования</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked"><span class=icon></span></a></div></div><ul class=is-marginless><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/00_overview/01_br/01_br/ class=card-header-title title='Бизнес-контекст и БТ'><i class='fa-solid fa-circle-info'></i><p class="pt-0 pb-0 pr-2 pl-1">Бизнес-контекст и БТ</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/00_overview/01_br/02_actors/ class=card-header-title title='Акторы и границы системы'><i class='fa-solid fa-users'></i><p class="pt-0 pb-0 pr-2 pl-1">Акторы и границы системы</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/00_overview/01_br/03_fr_documents/ class=card-header-title title='FR_01: Загрузка и индексация документов'><i class='fa-solid fa-list-check'></i><p class="pt-0 pb-0 pr-2 pl-1">FR_01: Загрузка и индексация документов</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/00_overview/01_br/04_fr_rag/ class=card-header-title title='FR_02: RAG-поиск и генерация презентаций'><i class='fa-solid fa-list-check'></i><p class="pt-0 pb-0 pr-2 pl-1">FR_02: RAG-поиск и генерация презентаций</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/00_overview/01_br/05_fr_users/ class=card-header-title title='FR_03: Управление пользователями'><i class='fa-solid fa-list-check'></i><p class="pt-0 pb-0 pr-2 pl-1">FR_03: Управление пользователями</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/00_overview/01_br/06_fr_admin/ class=card-header-title title='FR_04: Администрирование'><i class='fa-solid fa-list-check'></i><p class="pt-0 pb-0 pr-2 pl-1">FR_04: Администрирование</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/00_overview/01_br/07_nonfunctional/ class=card-header-title title='Нефункциональные требования'><i class='fa-solid fa-gauge-high'></i><p class="pt-0 pb-0 pr-2 pl-1">Нефункциональные требования</p></a></div></div></li></div></div></ul></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/00_overview/02_constraints/ class=card-header-title title='Ограничения и допущения'><i class='fa-solid fa-lock'></i><p class="pt-0 pb-0 pr-2 pl-1">Ограничения и допущения</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/00_overview/03_interfaces/ class=card-header-title title=Интерфейсы><i class='fa-solid fa-plug'></i><p class="pt-0 pb-0 pr-2 pl-1">Интерфейсы</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/00_overview/04_quality_metrics/ class=card-header-title title='Метрики качества и итоговая сводка'><i class='fa-solid fa-chart-bar'></i><p class="pt-0 pb-0 pr-2 pl-1">Метрики качества и итоговая сводка</p></a></div></div></li></div></div></ul></li></div></div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link"><a href=/01_architecture/ class=card-header-title><i class='fa-solid fa-diagram-project fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/01_architecture/ class=card-header-title title=Архитектура><i class='fa-solid fa-diagram-project fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Архитектура</p></a></div></div></li></div></div><div class="card is-fs-expandable-icon is-sidebar-active"><div class=card-header><a href=/03_backend/ class=card-header-title><i class='fa-solid fa-server fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class="is-marginless is-tree-active is-entries-expandable is-entries-expanded"><div class=card><div class=card-header><a href=/03_backend/ class=card-header-title title=Backend><i class='fa-solid fa-server fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Backend</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-expanded"><span class=icon></span></a></div></div><ul class="is-marginless is-tree-active"><div><div><li class="is-marginless is-entries-expandable is-entries-shrinked"><div class=card><div class=card-header><a href=/03_backend/01_info_models/ class=card-header-title title='Модель данных и базы данных'><i class='fa-solid fa-database'></i><p class="pt-0 pb-0 pr-2 pl-1">Модель данных и базы данных</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked"><span class=icon></span></a></div></div><ul class=is-marginless><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/03_backend/01_info_models/relational/ class=card-header-title title='Реляционные таблицы (PostgreSQL)'><i class='fa-solid fa-table'></i><p class="pt-0 pb-0 pr-2 pl-1">Реляционные таблицы (PostgreSQL)</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/03_backend/01_info_models/documents/ class=card-header-title title='Документные коллекции'><i class='fa-solid fa-file-code'></i><p class="pt-0 pb-0 pr-2 pl-1">Документные коллекции</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/03_backend/01_info_models/vector_store/ class=card-header-title title='Векторное хранилище (Qdrant)'><i class='fa-solid fa-magnifying-glass-chart'></i><p class="pt-0 pb-0 pr-2 pl-1">Векторное хранилище (Qdrant)</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/03_backend/01_info_models/cache/ class=card-header-title title='Кэш и очереди (Redis)'><i class='fa-solid fa-bolt'></i><p class="pt-0 pb-0 pr-2 pl-1">Кэш и очереди (Redis)</p></a></div></div></li></div></div></ul></li></div></div><div><div><li class="is-marginless is-entries-expandable is-entries-expanded"><div class=card><div class=card-header><a href=/03_backend/02_rest_methods/ class=card-header-title title='REST API'><i class='fa-solid fa-route'></i><p class="pt-0 pb-0 pr-2 pl-1">REST API</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-expanded"><span class=icon></span></a></div></div><ul class=is-marginless><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/03_backend/02_rest_methods/createproject/ class=card-header-title title='POST /projects'><i class='fa-solid fa-folder-plus'></i><p class="pt-0 pb-0 pr-2 pl-1">POST /projects</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/03_backend/02_rest_methods/createpresentation/ class=card-header-title title='POST /presentations'><i class='fa-solid fa-file-powerpoint'></i><p class="pt-0 pb-0 pr-2 pl-1">POST /presentations</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class="card is-sidebar-active" id=sidebarActiveEntry><div class="card-header is-single-link"><a href=/03_backend/02_rest_methods/generateoutline/ class=card-header-title title='POST /presentations/{id}/generate/outline'><i class='fa-solid fa-list-ol'></i><p class="pt-0 pb-0 pr-2 pl-1">POST /presentations/{id}/generate/outline</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/03_backend/02_rest_methods/generateslides/ class=card-header-title title='POST /presentations/{id}/generate/slides'><i class='fa-solid fa-wand-magic-sparkles'></i><p class="pt-0 pb-0 pr-2 pl-1">POST /presentations/{id}/generate/slides</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/03_backend/02_rest_methods/regenerateslide/ class=card-header-title title='POST /presentations/{id}/generate/slide/{slide_id}'><i class='fa-solid fa-rotate-right'></i><p class="pt-0 pb-0 pr-2 pl-1">POST /presentations/{id}/generate/slide/{slide_id}</p></a></div></div></li></div></div></ul></li></div></div></ul></li></div></div><div class="card is-fs-expandable-icon"><div class=card-header><a href=/02_frontend/ class=card-header-title><i class='fa-solid fa-display fa-lg'></i></a></div></div><div class=is-expandable><div class=is-sidebar-list-wrapper><li class="is-marginless is-entries-expandable is-entries-shrinked"><div class=card><div class=card-header><a href=/02_frontend/ class=card-header-title title=Frontend><i class='fa-solid fa-display fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Frontend</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked"><span class=icon></span></a></div></div><ul class=is-marginless><div><div><li class="is-marginless is-entries-expandable is-entries-shrinked"><div class=card><div class=card-header><a href=/02_frontend/screens/ class=card-header-title title=Экраны><i class='fa-solid fa-window-restore'></i><p class="pt-0 pb-0 pr-2 pl-1">Экраны</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked"><span class=icon></span></a></div></div><ul class=is-marginless><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/02_frontend/screens/landing/ class=card-header-title title=Лендинг><i class='fa-solid fa-house'></i><p class="pt-0 pb-0 pr-2 pl-1">Лендинг</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/02_frontend/screens/wizard_step1/ class=card-header-title title='Wizard — Шаг 1: Данные и контент'><i class='fa-solid fa-upload'></i><p class="pt-0 pb-0 pr-2 pl-1">Wizard — Шаг 1: Данные и контент</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/02_frontend/screens/wizard_step2/ class=card-header-title title='Wizard — Шаг 2: Аудитория и цель'><i class='fa-solid fa-bullseye'></i><p class="pt-0 pb-0 pr-2 pl-1">Wizard — Шаг 2: Аудитория и цель</p></a></div></div></li></div></div></ul></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/02_frontend/components/ class=card-header-title title='Реестр компонентов'><i class='fa-solid fa-cubes'></i><p class="pt-0 pb-0 pr-2 pl-1">Реестр компонентов</p></a></div></div></li></div></div><div><div><li class=is-marginless><div class=card><div class="card-header is-single-link"><a href=/02_frontend/user_flows/ class=card-header-title title='Пользовательские сценарии'><i class='fa-solid fa-route'></i><p class="pt-0 pb-0 pr-2 pl-1">Пользовательские сценарии</p></a></div></div></li></div></div></ul></li></div></div></ul></aside></div><div id=sidebarCollapsible class=is-marginless><div class="card is-uncollapse-action"><div id=sidebarUncollapse class="card-header is-single-link" title="Collapse/Uncollapse sidebar"><a class=card-header-title><i class="fa-solid fa-angles-right fa-lg"></i></a></div></div><div class="card is-collapse-action"><div id=sidebarCollapse class="card-header is-single-link" title="Collapse/Uncollapse sidebar"><a class=card-header-title><i class="fa-solid fa-angles-left fa-lg"></i><p>Collapse sidebar</p></a></div></div></div></div></div><div id=sidebarMobileWrapper class="column is-narrow is-hidden-desktop"></div><div class="columns is-mobile is-marginless is-scroll-smooth has-toc is-toc-collapsed" id=contentContainer><div class=column id=content data-pagefind-body><style>ul.breadcrumb{padding:10px 15px;list-style:none;background-color:#eee}ul.breadcrumb li{display:inline;font-size:14px}ul.breadcrumb li+li:before{padding:8px;color:#000;content:"/\00a0"}ul.breadcrumb li a{color:#0275d8;text-decoration:none}ul.breadcrumb li a:hover{color:#01447e;text-decoration:underline}</style><ul id=breadcrumbs class=breadcrumb><li><a href=/>Промпт-инжиниринг</a></li><li><a href=/03_backend/>Backend</a></li><li><a href=/03_backend/02_rest_methods/>REST API</a></li><li><a href=/03_backend/02_rest_methods/generateoutline/>POST /presentations/{id}/generate/outline</a></li></ul><div id=contentTitle>POST /presentations/{id}/generate/outline</div><h2 id=содержание>Содержание<a href=#%d1%81%d0%be%d0%b4%d0%b5%d1%80%d0%b6%d0%b0%d0%bd%d0%b8%d0%b5 class=anchor>#</a></h2><ul><li><a href=#%d0%be%d0%b1%d0%b7%d0%be%d1%80 class=is-pretty-link>Обзор</a><style>.ramka-5{position:relative;z-index:0;border-radius:10px;overflow:hidden;margin:30px auto;display:flex;align-items:center;justify-content:center;font-size:24px;font-family:roboto,sans-serif}.ramka-5::before{content:'';position:absolute;z-index:-2;left:-50%;top:-50%;width:200%;height:200%;background-color:#bfe2ff;background-repeat:no-repeat;background-size:50% 50%,50% 50%;background-position:0 0,100% 0,100% 100%,0 100%;background-image:linear-gradient(#BFE2FF,#BFE2FF),linear-gradient(#337AB7,#337AB7),linear-gradient(#BFE2FF,#BFE2FF),linear-gradient(#337AB7,#337AB7);animation:anim-ramka-5 4s linear infinite}.ramka-5::after{content:'';position:absolute;z-index:-1;left:6px;top:6px;width:calc(100% - 12px);height:calc(100% - 12px);background:#fff;border-radius:5px}@keyframes anim-ramka-5{100%{transform:rotate(1turn)}}</style><script lang=javascript>document.addEventListener("DOMContentLoaded",e=>{let n=new URLSearchParams(document.location.search),s=n.get("methodName"),t=document.getElementById("createRequest");t!=null&&s!=null&&t.classList.add("ramka-5")})</script></li><li><a href=#%d0%b0%d0%bb%d0%b3%d0%be%d1%80%d0%b8%d1%82%d0%bc class=is-pretty-link>Алгоритм</a><style>.ramka-5{position:relative;z-index:0;border-radius:10px;overflow:hidden;margin:30px auto;display:flex;align-items:center;justify-content:center;font-size:24px;font-family:roboto,sans-serif}.ramka-5::before{content:'';position:absolute;z-index:-2;left:-50%;top:-50%;width:200%;height:200%;background-color:#bfe2ff;background-repeat:no-repeat;background-size:50% 50%,50% 50%;background-position:0 0,100% 0,100% 100%,0 100%;background-image:linear-gradient(#BFE2FF,#BFE2FF),linear-gradient(#337AB7,#337AB7),linear-gradient(#BFE2FF,#BFE2FF),linear-gradient(#337AB7,#337AB7);animation:anim-ramka-5 4s linear infinite}.ramka-5::after{content:'';position:absolute;z-index:-1;left:6px;top:6px;width:calc(100% - 12px);height:calc(100% - 12px);background:#fff;border-radius:5px}@keyframes anim-ramka-5{100%{transform:rotate(1turn)}}</style><script lang=javascript>document.addEventListener("DOMContentLoaded",e=>{let n=new URLSearchParams(document.location.search),s=n.get("methodName"),t=document.getElementById("createRequest");t!=null&&s!=null&&t.classList.add("ramka-5")})</script></li><li><a href=#%d0%bf%d0%b0%d1%80%d0%b0%d0%bc%d0%b5%d1%82%d1%80%d1%8b class=is-pretty-link>Параметры</a><style>.ramka-5{position:relative;z-index:0;border-radius:10px;overflow:hidden;margin:30px auto;display:flex;align-items:center;justify-content:center;font-size:24px;font-family:roboto,sans-serif}.ramka-5::before{content:'';position:absolute;z-index:-2;left:-50%;top:-50%;width:200%;height:200%;background-color:#bfe2ff;background-repeat:no-repeat;background-size:50% 50%,50% 50%;background-position:0 0,100% 0,100% 100%,0 100%;background-image:linear-gradient(#BFE2FF,#BFE2FF),linear-gradient(#337AB7,#337AB7),linear-gradient(#BFE2FF,#BFE2FF),linear-gradient(#337AB7,#337AB7);animation:anim-ramka-5 4s linear infinite}.ramka-5::after{content:'';position:absolute;z-index:-1;left:6px;top:6px;width:calc(100% - 12px);height:calc(100% - 12px);background:#fff;border-radius:5px}@keyframes anim-ramka-5{100%{transform:rotate(1turn)}}</style><script lang=javascript>document.addEventListener("DOMContentLoaded",e=>{let n=new URLSearchParams(document.location.search),s=n.get("methodName"),t=document.getElementById("createRequest");t!=null&&s!=null&&t.classList.add("ramka-5")})</script></li><li><a href=#%d1%82%d0%b5%d0%bb%d0%be-%d0%b7%d0%b0%d0%bf%d1%80%d0%be%d1%81%d0%b0 class=is-pretty-link>Тело запроса</a><style>.ramka-5{position:relative;z-index:0;border-radius:10px;overflow:hidden;margin:30px auto;display:flex;align-items:center;justify-content:center;font-size:24px;font-family:roboto,sans-serif}.ramka-5::before{content:'';position:absolute;z-index:-2;left:-50%;top:-50%;width:200%;height:200%;background-color:#bfe2ff;background-repeat:no-repeat;background-size:50% 50%,50% 50%;background-position:0 0,100% 0,100% 100%,0 100%;background-image:linear-gradient(#BFE2FF,#BFE2FF),linear-gradient(#337AB7,#337AB7),linear-gradient(#BFE2FF,#BFE2FF),linear-gradient(#337AB7,#337AB7);animation:anim-ramka-5 4s linear infinite}.ramka-5::after{content:'';position:absolute;z-index:-1;left:6px;top:6px;width:calc(100% - 12px);height:calc(100% - 12px);background:#fff;border-radius:5px}@keyframes anim-ramka-5{100%{transform:rotate(1turn)}}</style><script lang=javascript>document.addEventListener("DOMContentLoaded",e=>{let n=new URLSearchParams(document.location.search),s=n.get("methodName"),t=document.getElementById("createRequest");t!=null&&s!=null&&t.classList.add("ramka-5")})</script></li><li><a href=#%d0%be%d1%82%d0%b2%d0%b5%d1%82%d1%8b class=is-pretty-link>Ответы</a><style>.ramka-5{position:relative;z-index:0;border-radius:10px;overflow:hidden;margin:30px auto;display:flex;align-items:center;justify-content:center;font-size:24px;font-family:roboto,sans-serif}.ramka-5::before{content:'';position:absolute;z-index:-2;left:-50%;top:-50%;width:200%;height:200%;background-color:#bfe2ff;background-repeat:no-repeat;background-size:50% 50%,50% 50%;background-position:0 0,100% 0,100% 100%,0 100%;background-image:linear-gradient(#BFE2FF,#BFE2FF),linear-gradient(#337AB7,#337AB7),linear-gradient(#BFE2FF,#BFE2FF),linear-gradient(#337AB7,#337AB7);animation:anim-ramka-5 4s linear infinite}.ramka-5::after{content:'';position:absolute;z-index:-1;left:6px;top:6px;width:calc(100% - 12px);height:calc(100% - 12px);background:#fff;border-radius:5px}@keyframes anim-ramka-5{100%{transform:rotate(1turn)}}</style><script lang=javascript>document.addEventListener("DOMContentLoaded",e=>{let n=new URLSearchParams(document.location.search),s=n.get("methodName"),t=document.getElementById("createRequest");t!=null&&s!=null&&t.classList.add("ramka-5")})</script></li><li><a href=#%d0%b2%d0%b0%d0%bb%d0%b8%d0%b4%d0%b0%d1%86%d0%b8%d0%b8 class=is-pretty-link>Валидации</a><style>.ramka-5{position:relative;z-index:0;border-radius:10px;overflow:hidden;margin:30px auto;display:flex;align-items:center;justify-content:center;font-size:24px;font-family:roboto,sans-serif}.ramka-5::before{content:'';position:absolute;z-index:-2;left:-50%;top:-50%;width:200%;height:200%;background-color:#bfe2ff;background-repeat:no-repeat;background-size:50% 50%,50% 50%;background-position:0 0,100% 0,100% 100%,0 100%;background-image:linear-gradient(#BFE2FF,#BFE2FF),linear-gradient(#337AB7,#337AB7),linear-gradient(#BFE2FF,#BFE2FF),linear-gradient(#337AB7,#337AB7);animation:anim-ramka-5 4s linear infinite}.ramka-5::after{content:'';position:absolute;z-index:-1;left:6px;top:6px;width:calc(100% - 12px);height:calc(100% - 12px);background:#fff;border-radius:5px}@keyframes anim-ramka-5{100%{transform:rotate(1turn)}}</style><script lang=javascript>document.addEventListener("DOMContentLoaded",e=>{let n=new URLSearchParams(document.location.search),s=n.get("methodName"),t=document.getElementById("createRequest");t!=null&&s!=null&&t.classList.add("ramka-5")})</script></li><li><a href=#%d0%b4%d0%b8%d0%b0%d0%b3%d1%80%d0%b0%d0%bc%d0%bc%d0%b0-%d0%bf%d0%be%d1%81%d0%bb%d0%b5%d0%b4%d0%be%d0%b2%d0%b0%d1%82%d0%b5%d0%bb%d1%8c%d0%bd%d0%be%d1%81%d1%82%d0%b8 class=is-pretty-link>Диаграмма последовательности</a><style>.ramka-5{position:relative;z-index:0;border-radius:10px;overflow:hidden;margin:30px auto;display:flex;align-items:center;justify-content:center;font-size:24px;font-family:roboto,sans-serif}.ramka-5::before{content:'';position:absolute;z-index:-2;left:-50%;top:-50%;width:200%;height:200%;background-color:#bfe2ff;background-repeat:no-repeat;background-size:50% 50%,50% 50%;background-position:0 0,100% 0,100% 100%,0 100%;background-image:linear-gradient(#BFE2FF,#BFE2FF),linear-gradient(#337AB7,#337AB7),linear-gradient(#BFE2FF,#BFE2FF),linear-gradient(#337AB7,#337AB7);animation:anim-ramka-5 4s linear infinite}.ramka-5::after{content:'';position:absolute;z-index:-1;left:6px;top:6px;width:calc(100% - 12px);height:calc(100% - 12px);background:#fff;border-radius:5px}@keyframes anim-ramka-5{100%{transform:rotate(1turn)}}</style><script lang=javascript>document.addEventListener("DOMContentLoaded",e=>{let n=new URLSearchParams(document.location.search),s=n.get("methodName"),t=document.getElementById("createRequest");t!=null&&s!=null&&t.classList.add("ramka-5")})</script></li><li><a href=#%d0%b1%d0%b5%d0%b7%d0%be%d0%bf%d0%b0%d1%81%d0%bd%d0%be%d1%81%d1%82%d1%8c class=is-pretty-link>Безопасность</a><style>.ramka-5{position:relative;z-index:0;border-radius:10px;overflow:hidden;margin:30px auto;display:flex;align-items:center;justify-content:center;font-size:24px;font-family:roboto,sans-serif}.ramka-5::before{content:'';position:absolute;z-index:-2;left:-50%;top:-50%;width:200%;height:200%;background-color:#bfe2ff;background-repeat:no-repeat;background-size:50% 50%,50% 50%;background-position:0 0,100% 0,100% 100%,0 100%;background-image:linear-gradient(#BFE2FF,#BFE2FF),linear-gradient(#337AB7,#337AB7),linear-gradient(#BFE2FF,#BFE2FF),linear-gradient(#337AB7,#337AB7);animation:anim-ramka-5 4s linear infinite}.ramka-5::after{content:'';position:absolute;z-index:-1;left:6px;top:6px;width:calc(100% - 12px);height:calc(100% - 12px);background:#fff;border-radius:5px}@keyframes anim-ramka-5{100%{transform:rotate(1turn)}}</style><script lang=javascript>document.addEventListener("DOMContentLoaded",e=>{let n=new URLSearchParams(document.location.search),s=n.get("methodName"),t=document.getElementById("createRequest");t!=null&&s!=null&&t.classList.add("ramka-5")})</script></li></ul><hr><h2 id=обзор>Обзор<a href=#%d0%be%d0%b1%d0%b7%d0%be%d1%80 class=anchor>#</a></h2><table><thead><tr><th>Свойство</th><th>Значение</th></tr></thead><tbody><tr><td>Метод</td><td><code>POST</code></td></tr><tr><td>URL</td><td><code>/presentations/{presentation_id}/generate/outline</code></td></tr><tr><td>Тип</td><td><strong>Синхронный</strong> (ответ возвращается в теле, не через задачу)</td></tr><tr><td>LLM</td><td>Claude Sonnet (primary) / GPT-4o (fallback)</td></tr><tr><td>RAG</td><td>Qdrant — поиск по <code>source_file_ids</code>, порог косинусного сходства ≥ 0.72</td></tr><tr><td>Успешный код</td><td><code>200 OK</code></td></tr><tr><td>SLA</td><td>p95 ≤ 10 секунд (NFR-001)</td></tr><tr><td>Теги</td><td>Generation</td></tr><tr><td>Требования</td><td>FR-010 (RAG-поиск), FR-011 (генерация структуры)</td></tr></tbody></table><p>Генерирует структуру презентации: список слайдов с заголовками, ключевыми тезисами и рекомендуемыми типами контента. Перед вызовом слайды (<code>source_file_ids</code>) должны быть в статусе <code>ready</code>. Результат (<code>Outline</code>) сохраняется на сервере — презентация переходит в статус <code>outline_ready</code>. Структуру можно отредактировать через <code>PUT /presentations/{id}/generate/outline</code> перед запуском <code>generateSlides</code>.</p><hr><h2 id=алгоритм>Алгоритм<a href=#%d0%b0%d0%bb%d0%b3%d0%be%d1%80%d0%b8%d1%82%d0%bc class=anchor>#</a></h2><ol><li><strong>Аутентификация и авторизация.</strong> Проверка JWT / API-ключа; роли <code>editor</code> и <code>admin</code> разрешены.</li><li><strong>Проверка лимита тарифного плана.</strong> Если исчерпан лимит презентаций за период — <code>402 Payment Required</code>.</li><li><strong>Rate limit.</strong> Проверка <code>ratelimit:{key_id}:{min}</code> в Redis; при превышении — <code>429 Too Many Requests</code> с заголовком <code>Retry-After</code>.</li><li><strong>Проверка статуса презентации.</strong> Статус должен быть <code>draft</code> или <code>outline_ready</code> (повторная генерация разрешена).</li><li><strong>Валидация источников.</strong> Для каждого <code>source_file_id</code> — проверка <code>file_status = ready</code> в таблице <code>source_documents</code>.</li><li><strong>Семантический кэш.</strong> Проверка ключа <code>semantic_cache:{hash}</code> (Redis + Qdrant-коллекция <code>semantic_cache</code>). При совпадении (cosine ≥ 0.95) — возврат кэшированного <code>Outline</code> без LLM-вызова.</li><li><strong>RAG-поиск.</strong> LangChain выполняет embedding запроса (text-embedding-3-large, 3072d), ищет топ-20 чанков в Qdrant (<code>org_{id}_docs</code>), применяет cross-encoder re-ranking — оставляет топ-10.</li><li><strong>LLM-генерация.</strong> Промпт с контекстом RAG + инструкции по структуре (тип <code>goal</code>, аудитория, желаемое число слайдов) передаётся Claude Sonnet. LLM возвращает JSON-структуру <code>Outline</code>. При ошибке LLM — Circuit Breaker (NFR-011) переключает на GPT-4o.</li><li><strong>Постпроцессинг.</strong> Проверка флагов <code>hallucination_flags</code> (источник знаний модели vs. файл пользователя) и запись в MongoDB <code>generation_traces</code>.</li><li><strong>Сохранение.</strong> <code>Outline</code> записывается в PostgreSQL; статус презентации → <code>outline_ready</code>; семантический кэш обновляется (TTL 24 ч).</li><li><strong>Ответ.</strong> Возврат объекта <code>Outline</code> с <code>structure_rationale</code> и массивом <code>slides</code>.</li></ol><hr><h2 id=параметры>Параметры<a href=#%d0%bf%d0%b0%d1%80%d0%b0%d0%bc%d0%b5%d1%82%d1%80%d1%8b class=anchor>#</a></h2><table><thead><tr><th>Параметр</th><th>Тип</th><th>Расположение</th><th style=text-align:center>Обязательный</th><th>Описание</th></tr></thead><tbody><tr><td><code>presentation_id</code></td><td>uuid</td><td>path</td><td style=text-align:center>Да</td><td>UUID презентации в статусе <code>draft</code> или <code>outline_ready</code></td></tr></tbody></table><hr><h2 id=тело-запроса>Тело запроса<a href=#%d1%82%d0%b5%d0%bb%d0%be-%d0%b7%d0%b0%d0%bf%d1%80%d0%be%d1%81%d0%b0 class=anchor>#</a></h2><p><strong>Content-Type:</strong> <code>application/json</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>PresentationGoal</span> <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;investor_pitch&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;management_report&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;client_adaptation&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;educational&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;consulting_report&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;internal_pitch&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;custom&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>AudienceType</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;investor&#34;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;management&#34;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;client&#34;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;team&#34;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;student&#34;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;custom&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>SlideContentType</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;text&#34;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;chart&#34;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;table&#34;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;image&#34;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;quote&#34;</span> <span style=color:#f92672>|</span> <span style=color:#e6db74>&#34;mixed&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>GenerateOutlineRequest</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>   * Свободное описание темы и цели презентации.
</span></span></span><span style=display:flex><span><span style=color:#75715e>   * Если не передано — берётся из `presentations.prompt`.
</span></span></span><span style=display:flex><span><span style=color:#75715e>   * Длина: 10–2000 символов.
</span></span></span><span style=display:flex><span><span style=color:#75715e>   */</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>prompt?</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#75715e>/** Цель презентации — влияет на выбор структурного шаблона LLM. */</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>goal?</span>: <span style=color:#66d9ef>PresentationGoal</span>;
</span></span><span style=display:flex><span>  <span style=color:#75715e>/** Целевая аудитория. */</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>audience?</span>: <span style=color:#66d9ef>AudienceType</span>;
</span></span><span style=display:flex><span>  <span style=color:#75715e>/** Язык генерации. ISO 639-1. */</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>language?</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>   * Желаемое количество слайдов.
</span></span></span><span style=display:flex><span><span style=color:#75715e>   * LLM может скорректировать в пределах ±3.
</span></span></span><span style=display:flex><span><span style=color:#75715e>   * Диапазон: 5–30.
</span></span></span><span style=display:flex><span><span style=color:#75715e>   */</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>slide_count_hint?</span>: <span style=color:#66d9ef>number</span>;
</span></span><span style=display:flex><span>  <span style=color:#75715e>/** UUIDs файлов-источников, проиндексированных в Qdrant. */</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>source_file_ids?</span>: <span style=color:#66d9ef>string</span>[]; <span style=color:#75715e>// uuid[]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p><strong>Пример запроса:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;prompt&#34;</span>: <span style=color:#e6db74>&#34;Анализ результатов продаж за Q1 2026: динамика по регионам, топ-продукты, прогноз Q2&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;goal&#34;</span>: <span style=color:#e6db74>&#34;management_report&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;audience&#34;</span>: <span style=color:#e6db74>&#34;management&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;language&#34;</span>: <span style=color:#e6db74>&#34;ru&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;slide_count_hint&#34;</span>: <span style=color:#ae81ff>12</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;source_file_ids&#34;</span>: [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;a1b2c3d4-e5f6-7890-abcd-ef1234567890&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;b2c3d4e5-f6a7-8901-bcde-f12345678901&#34;</span>
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><h2 id=ответы>Ответы<a href=#%d0%be%d1%82%d0%b2%d0%b5%d1%82%d1%8b class=anchor>#</a></h2><h3 id=200-ok>200 OK<a href=#200-ok class=anchor>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>OutlineSlide</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>position</span>: <span style=color:#66d9ef>number</span>;                 <span style=color:#75715e>// 1-based
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>title</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>key_thesis</span>: <span style=color:#66d9ef>string</span>;               <span style=color:#75715e>// ключевой тезис слайда
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>content_type?</span>: <span style=color:#66d9ef>SlideContentType</span>;  <span style=color:#75715e>// рекомендуемый тип контента
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#a6e22e>suggested_data_source?</span>: <span style=color:#66d9ef>string</span>;   <span style=color:#75715e>// какой файл будет использован как источник
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Outline</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>presentation_id</span>: <span style=color:#66d9ef>string</span>;      <span style=color:#75715e>// uuid
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>   * Объяснение выбранной структуры (принцип прозрачности, NFR-012).
</span></span></span><span style=display:flex><span><span style=color:#75715e>   * Пример: &#34;Для питч-дека инвестора применена структура Problem→Solution→Market
</span></span></span><span style=display:flex><span><span style=color:#75715e>   * в соответствии со стандартом Y Combinator&#34;
</span></span></span><span style=display:flex><span><span style=color:#75715e>   */</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>structure_rationale</span>: <span style=color:#66d9ef>string</span>;
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>slides</span>: <span style=color:#66d9ef>OutlineSlide</span>[];
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;presentation_id&#34;</span>: <span style=color:#e6db74>&#34;f1a2b3c4-d5e6-7890-abcd-ef1234567890&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;structure_rationale&#34;</span>: <span style=color:#e6db74>&#34;Для отчёта совету директоров применена структура Executive Summary → Финансы → Операции → Риски → Прогноз, обеспечивающая последовательное раскрытие ключевых метрик&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;slides&#34;</span>: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;position&#34;</span>: <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;Executive Summary&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;key_thesis&#34;</span>: <span style=color:#e6db74>&#34;Q1 2026: выручка +18% к плану, EBITDA-маржа 22%&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;content_type&#34;</span>: <span style=color:#e6db74>&#34;text&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;suggested_data_source&#34;</span>: <span style=color:#e6db74>&#34;q1_2026_financials.xlsx&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;position&#34;</span>: <span style=color:#ae81ff>2</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;Динамика продаж по регионам&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;key_thesis&#34;</span>: <span style=color:#e6db74>&#34;Центральный ФО — лидер роста (+34%), Сибирь ниже плана на 8%&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;content_type&#34;</span>: <span style=color:#e6db74>&#34;chart&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;suggested_data_source&#34;</span>: <span style=color:#e6db74>&#34;sales_report_q1.pdf&#34;</span>
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;position&#34;</span>: <span style=color:#ae81ff>3</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;Топ-10 продуктов по выручке&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;key_thesis&#34;</span>: <span style=color:#e6db74>&#34;Продукт A генерирует 41% выручки; продукт C показал рост ×2.3&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;content_type&#34;</span>: <span style=color:#e6db74>&#34;table&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;suggested_data_source&#34;</span>: <span style=color:#e6db74>&#34;q1_2026_financials.xlsx&#34;</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=402-payment-required>402 Payment Required<a href=#402-payment-required class=anchor>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;error&#34;</span>: <span style=color:#e6db74>&#34;PLAN_LIMIT_EXCEEDED&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;Monthly presentation limit reached. Upgrade your plan to continue.&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;details&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;limit&#34;</span>: <span style=color:#ae81ff>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;used&#34;</span>: <span style=color:#ae81ff>5</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;plan&#34;</span>: <span style=color:#e6db74>&#34;free&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;request_id&#34;</span>: <span style=color:#e6db74>&#34;req_01HXABCDE&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=429-too-many-requests>429 Too Many Requests<a href=#429-too-many-requests class=anchor>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;error&#34;</span>: <span style=color:#e6db74>&#34;RATE_LIMIT_EXCEEDED&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;Too many generation requests. Retry after 60 seconds.&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;request_id&#34;</span>: <span style=color:#e6db74>&#34;req_01HXABCDE&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Заголовок ответа: <code>Retry-After: 60</code></p><h3 id=401-unauthorized>401 Unauthorized<a href=#401-unauthorized class=anchor>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;error&#34;</span>: <span style=color:#e6db74>&#34;UNAUTHORIZED&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;Invalid or expired token&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;request_id&#34;</span>: <span style=color:#e6db74>&#34;req_01HXABCDE&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=403-forbidden>403 Forbidden<a href=#403-forbidden class=anchor>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;error&#34;</span>: <span style=color:#e6db74>&#34;INSUFFICIENT_ROLE&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;Role &#39;viewer&#39; cannot trigger generation&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;request_id&#34;</span>: <span style=color:#e6db74>&#34;req_01HXABCDE&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=404-not-found>404 Not Found<a href=#404-not-found class=anchor>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;error&#34;</span>: <span style=color:#e6db74>&#34;PRESENTATION_NOT_FOUND&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;Presentation &#39;f1a2b3c4-...&#39; not found&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;request_id&#34;</span>: <span style=color:#e6db74>&#34;req_01HXABCDE&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><h2 id=валидации>Валидации<a href=#%d0%b2%d0%b0%d0%bb%d0%b8%d0%b4%d0%b0%d1%86%d0%b8%d0%b8 class=anchor>#</a></h2><table><thead><tr><th>Поле / условие</th><th>Правило</th><th>HTTP-код</th><th>Код ошибки</th></tr></thead><tbody><tr><td><code>presentation_id</code></td><td>Должен существовать и принадлежать организации</td><td>404</td><td><code>PRESENTATION_NOT_FOUND</code></td></tr><tr><td>Статус презентации</td><td><code>draft</code> или <code>outline_ready</code> (повторная генерация допустима)</td><td>422</td><td><code>INVALID_STATUS</code></td></tr><tr><td><code>prompt</code></td><td>Если передан: 10–2000 символов</td><td>422</td><td><code>VALIDATION_ERROR</code></td></tr><tr><td><code>slide_count_hint</code></td><td>Если передан: целое число от 5 до 30</td><td>422</td><td><code>VALIDATION_ERROR</code></td></tr><tr><td><code>source_file_ids</code></td><td>Каждый UUID должен существовать и иметь <code>status = ready</code></td><td>422</td><td><code>FILE_NOT_READY</code></td></tr><tr><td>Лимит тарифа</td><td>Число презентаций в периоде &lt; <code>plans.max_presentations_per_month</code></td><td>402</td><td><code>PLAN_LIMIT_EXCEEDED</code></td></tr><tr><td>Rate limit</td><td>Не более N запросов в минуту на API-ключ</td><td>429</td><td><code>RATE_LIMIT_EXCEEDED</code></td></tr><tr><td>Роль</td><td><code>admin</code> или <code>editor</code></td><td>403</td><td><code>INSUFFICIENT_ROLE</code></td></tr></tbody></table><hr><h2 id=безопасность>Безопасность<a href=#%d0%b1%d0%b5%d0%b7%d0%be%d0%bf%d0%b0%d1%81%d0%bd%d0%be%d1%81%d1%82%d1%8c class=anchor>#</a></h2><ul><li><strong>Аутентификация:</strong> Bearer JWT (TTL 15 мин) или <code>X-API-Key</code>.</li><li><strong>Авторизация:</strong> RBAC — <code>viewer</code> не может инициировать генерацию.</li><li><strong>Мультиарендность:</strong> Qdrant-поиск ограничен коллекцией <code>org_{id}_docs</code>; доступ к чужим чанкам исключён на уровне payload-фильтра.</li><li><strong>Контроль стоимости:</strong> семантический кэш снижает количество LLM-вызовов (цель: cache hit ≥ 15%, см. NFR-022). Лимит слайдов и тарифные ограничения — дополнительная защита от злоупотреблений.</li><li><strong>Прозрачность:</strong> <code>structure_rationale</code> в ответе и <code>hallucination_flags</code> в <code>generation_traces</code> обеспечивают объяснимость (Explainability Engine, NFR-012).</li><li><strong>Транспорт:</strong> TLS 1.3 (NFR-006).</li></ul><script lang=js>const innerPages=document.getElementById("inner-pages");innerPages&&innerPages.querySelectorAll("li").forEach(e=>{e.addEventListener("click",()=>{const t=e.innerText.trim();if(openedMenu){if(openedMenu.includes(t)){const e=openedMenu.findIndex(e=>e===t);openedMenu.splice(e,1)}else openedMenu.push(t);localStorage.setItem("openedMenu",JSON.stringify(openedMenu))}else localStorage.setItem("openedMenu","["+t+"]")})})</script><nav class=pagination><a class="nav nav-prev" href=https://example.org/03_backend/02_rest_methods/createpresentation/ title="POST /presentations"><i class="fa fa-arrow-left" aria-hidden=true></i> Предыдущее - POST /presentations</a>
<a class="nav nav-next" href=https://example.org/03_backend/02_rest_methods/generateslides/ title="POST /presentations/{id}/generate/slides">Следующее - POST /presentations/{id}/generate/slides <i class="fa fa-arrow-right" aria-hidden=true></i></a></nav></div><div class="column is-sticky is-paddingless" id=tocWrapper><div class=is-paddingless id=tocContainer><div id=tocContent><div class=additionalinfo><span id=method_name>POST /presentations/{id}/generate/outline</span>
<strong>Описание:</strong> Синхронная генерация структуры (оглавления) презентации через RAG + LLM. Цель: p95 ≤ 10 с.</div><div class=toc-header><h6 class="toc-title is-marginless">Содержание:On this page:</h6><i title="Back to top" id=tocBackToTop class="fa-solid fa-circle-arrow-up"></i></div><div id=toc><nav id=TableOfContents><ul><li><a href=#содержание>Содержание</a></li><li><a href=#обзор>Обзор</a></li><li><a href=#алгоритм>Алгоритм</a></li><li><a href=#параметры>Параметры</a></li><li><a href=#тело-запроса>Тело запроса</a></li><li><a href=#ответы>Ответы</a><ul><li><a href=#200-ok>200 OK</a></li><li><a href=#402-payment-required>402 Payment Required</a></li><li><a href=#429-too-many-requests>429 Too Many Requests</a></li><li><a href=#401-unauthorized>401 Unauthorized</a></li><li><a href=#403-forbidden>403 Forbidden</a></li><li><a href=#404-not-found>404 Not Found</a></li></ul></li><li><a href=#валидации>Валидации</a></li><li><a href=#безопасность>Безопасность</a></li></ul></nav></div><ul class=info style="line-height:1.2;list-style-type:none;border:1px solid;border-radius:1px;padding:5px;margin:16px 10px 0;color:#000"></ul><div id=taxonomies><div class=taxonomy-wrapper></div><div class=taxonomy-wrapper></div></div><div class=toc-header><div class=edit-meta></div></div></div></div><div class=is-paddingless id=tocCollapsible title="Collapse/Uncollapse table of contents"><i class="fa-solid fa-angles-right fa-lg"></i></div></div></div></div><script type=text/javascript>const baseUrl="https://example.org/",codeCopyBefore="Copy to clipboard",codeCopyAfter="Copied to clipboard",svgDownloadLabel="Download as SVG",helperLoadingLabel="Loading",searchNoResults="No result found",introNextLabel="Next",introPrevLabel="Previous",introSkipLabel="✗",introDoneLabel="Done",printLabel="Print current page",qrCodeLabel="Show current page QR code",naCommonLabel="Not available"</script><script type=module src=/js/theme/modules/const.min.js></script><script type=module src=/js/theme/modules/helpers.min.js></script><script type=module src=/js/theme/modules/helpersGlobal.min.js></script><script type=module src=/js/theme/init.min.js></script><script type=module src=/js/theme/navbar.min.js></script><script type=module src=/js/theme/print.min.js></script><script type=module src=/js/theme/qrcode.min.js></script><script type=module src=/js/theme/search.min.js></script><script type=module src=/js/theme/shortcuts.min.js></script><script type=module src=/js/theme/sidebar.min.js></script><script type=module src=/js/theme/toc.min.js></script><script type=text/javascript src=/js/external/jquery/jquery-3.6.3.min.js></script><script type=text/javascript src=/js/external/tippy/popper.min.js></script><script type=text/javascript src=/js/external/tippy/tippy-bundle.umd.min.js></script><script type=text/javascript src=/js/external/markmap/markmap-autoloader.min.js></script><script type=text/javascript src=/js/theme/browserCompatibility.min.js></script><script type=text/javascript src=/js/external/flexsearch/flexsearch.bundle.min.js></script><script type=text/javascript src=/js/external/qrious/qrious.min.js></script><script type=text/javascript src=/js/external/overlay-scrollbars/overlayscrollbars.min.js></script><script type=text/javascript src=/js/external/markmap/markmap.min.js></script><script type=text/javascript src=/js/external/readfile/rawdeflate.min.js></script><script type=text/javascript src=/js/external/1ce05b4b.min.js></script><script type=text/javascript src=/js/external/techradar/d3.v4.min.js></script><script type=text/javascript src=/js/external/techradar/radar.min.js></script><script type=text/javascript src=/js/external/bpmn-visualization/bpmn-visualization.min.js></script><script type=text/javascript src=/js/external/sorttable/sorttable.min.js></script><script type=text/javascript src=/js/external/mermaid/svg-pan-zoom.min.js></script><script type=text/javascript src=/js/external/simplesearch/simplesearch.min.js></script><script>$("table").addClass("sortable")</script></body></html>