<!DOCTYPE html>
<html>
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="generator" content="Hugo 0.126.1">
<meta name="viewport" content="width=device-width, initial-scale=1" /><meta name="description" content="Функциональные требования к RAG-пайплайну, генерации контента, экспорту и аналитике." />

<title>FR: RAG-поиск и генерация презентаций</title>
<link
  rel="icon"
  href="/images/favicon.png?v=1772344819"
  type="image/x-icon"/>
<link
    rel="stylesheet"
    rel="preload"
    type="text/css"
    href="/css/main.css"
  /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/all.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/sharp-thin.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/sharp-solid.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/sharp-regular.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/sharp-light.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/sorttable/sorttable.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/tippy/light-border.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/techradar/radar.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/form-js/form-js.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/overlay-scrollbars/overlayscrollbars.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/simplesearch/simplesearch.min.css"
    />
</head>
  <body onload="browserCompatibility()"><div id="navbarInfo" class="is-hidden modal-container">
  <div class="modal-content-box modal-text-box">
    <div class="card modal-title is-radiusless">
      <div class="card-header">
        <p class="card-header-title is-marginless">About</p>
      </div>
    </div>
    <div class="modal-content-container">
      <div class="modal-content-block is-block">
</div>
    </div>
  </div>
</div>
<div id="navbarShortcuts" class="is-hidden modal-container">
  <div class="modal-content-box modal-text-box"><div class="card modal-title is-radiusless">
        <div class="card-header">
          <p class="card-header-title is-marginless">Keyboard shortcuts</p>
        </div>
      </div>
      <div class="modal-content-container">
        <div class="modal-content-block"><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>q</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Show current page QR code</p>
  </div><div class="modal-content"><kbd>Escape</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Close modals</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>i</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Show website information</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>k</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Show shortcuts</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>h</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Go to homepage</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>f</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Find on website</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>m</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Collapse/Uncollapse sidebar</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>t</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Collapse/Uncollapse table of contents</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>↑</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Go to the top of the page</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>↓</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Go to the bottom of the page</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>p</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Print current page</p>
  </div></div>
      </div></div>
</div>
<div id="modalContainer" class="is-hidden modal-container">
  <div id="modal" class="modal-content-box"></div>
</div>
<nav id="navbar" class="navbar" role="navigation" aria-label="main navigation">
  <div id="navbarItemsContainer" class="navbar-brand"><div id="globalLogoContainer" class="is-flex"><a
    id="globalLogo"
    class="navbar-item navbar-item-standard is-paddingless"
    href="/"
  >
    <img
      id="globalLogoImg"
      alt="Homepage"
      src="/images/logo.png?v=1772344819"/>
    <div class="logo-header-container">
      <span>Сервис генерации презентаций</span>
    </div>
  </a>
  <a
    id="globalTouchLogo"
    class="navbar-item navbar-item-standard is-paddingless"
    href="/"
  >
    <img
      alt="Homepage"
      src="/images/logoTouch.png?v=1772344819"/>
  </a>
</div>
<div id="navbarItems" class="is-flex">
      <div id="navbarItemsStart" class="is-flex">
        
      </div>
      <div id="navbarItemsEnd" class="is-flex"><div class="navbar-item">
  <a
    id="listDocuments"
    class="button navbar-item-standard"
    href="/listdocuments/"
  >
    <span class="icon">
      <i class="fa-solid fa-list"></i>
    </span>
    <span class="icon-text">&nbsp;Список документов</span>
  </a>
</div><div class="navbar-item">
  <a
    id="searchButton"
    class="button navbar-item-standard"
    href="/search/"
  >
    <span class="icon">
      <i class="fa-solid fa-magnifying-glass"></i>
    </span>
    <span class="icon-text">&nbsp;Поиск</span>
  </a>
</div>
<div class="navbar-item">
  <a
    id="printButton"
    class="button navbar-item-standard"
  >
    <span class="icon-text">Print</span>
    <span class="icon">
      <i class="fa-solid fa-print fa-lg"></i>
    </span>
  </a>
</div></div>
    </div>
  </div>
</nav>
<div id="navbarOverlay"></div><div
      class="columns is-mobile is-paddingless is-marginless"
      id="mainContainer"
    ><div
  id="sidebarContainer"
  class="column is-narrow is-paddingless is-marginless"
>
  <div id="sidebarWrapper" class="is-fixed">
    <div id="sidebar" class="is-marginless">
      <aside class="menu is-paddingless is-marginless">
        <ul class="menu-list is-marginless is-paddingless"><div class="card is-fs-expandable-icon is-sidebar-active"><div class="card-header">
      <a
        href='/00_overview/'
        class='card-header-title'>
        <i class='fa-solid fa-circle-info fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless is-tree-active is-entries-expandable is-entries-expanded"><div
            class="card"><div class="card-header">
      <a
        href='/00_overview/'
        class='card-header-title'
          title='Описание и артефакты анализа'>
        <i class='fa-solid fa-circle-info fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Описание и артефакты анализа</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-expanded">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless is-tree-active"><div class="">
      <div class=""><li class="is-marginless is-entries-expandable is-entries-expanded"><div
            class="card"><div class="card-header">
      <a
        href='/00_overview/01_br/'
        class='card-header-title'
          title='Требования'>
        <i class='fa-solid fa-folder-open'></i><p class="pt-0 pb-0 pr-2 pl-1">Требования</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-expanded">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless"><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/01_br/'
        class='card-header-title'
          title='Бизнес-контекст и БТ'>
        <i class='fa-solid fa-circle-info'></i><p class="pt-0 pb-0 pr-2 pl-1">Бизнес-контекст и БТ</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/02_actors/'
        class='card-header-title'
          title='Акторы и границы системы'>
        <i class='fa-solid fa-users'></i><p class="pt-0 pb-0 pr-2 pl-1">Акторы и границы системы</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/03_fr_documents/'
        class='card-header-title'
          title='FR_01: Загрузка и индексация документов'>
        <i class='fa-solid fa-list-check'></i><p class="pt-0 pb-0 pr-2 pl-1">FR_01: Загрузка и индексация документов</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card is-sidebar-active"id='sidebarActiveEntry'><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/04_fr_rag/'
        class='card-header-title'
          title='FR: RAG-поиск и генерация презентаций'>
        <i class='fa-solid fa-list-check'></i><p class="pt-0 pb-0 pr-2 pl-1">FR: RAG-поиск и генерация презентаций</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/05_fr_users/'
        class='card-header-title'
          title='FR: Управление пользователями'>
        <i class='fa-solid fa-list-check'></i><p class="pt-0 pb-0 pr-2 pl-1">FR: Управление пользователями</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/06_fr_admin/'
        class='card-header-title'
          title='FR: Администрирование'>
        <i class='fa-solid fa-list-check'></i><p class="pt-0 pb-0 pr-2 pl-1">FR: Администрирование</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/07_nonfunctional/'
        class='card-header-title'
          title='Нефункциональные требования'>
        <i class='fa-solid fa-gauge-high'></i><p class="pt-0 pb-0 pr-2 pl-1">Нефункциональные требования</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/02_constraints/'
        class='card-header-title'
          title='Ограничения и допущения'>
        <i class='fa-solid fa-lock'></i><p class="pt-0 pb-0 pr-2 pl-1">Ограничения и допущения</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/03_interfaces/'
        class='card-header-title'
          title='Интерфейсы'>
        <i class='fa-solid fa-plug'></i><p class="pt-0 pb-0 pr-2 pl-1">Интерфейсы</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/04_quality_metrics/'
        class='card-header-title'
          title='Метрики качества и итоговая сводка'>
        <i class='fa-solid fa-chart-bar'></i><p class="pt-0 pb-0 pr-2 pl-1">Метрики качества и итоговая сводка</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link">
      <a
        href='/01_architecture/'
        class='card-header-title'>
        <i class='fa-solid fa-diagram-project fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/01_architecture/'
        class='card-header-title'
          title='Архитектура'>
        <i class='fa-solid fa-diagram-project fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Архитектура</p></a></div>
          </div></li>
      </div>
    </div><div class="card is-fs-expandable-icon"><div class="card-header">
      <a
        href='/03_backend/'
        class='card-header-title'>
        <i class='fa-solid fa-server fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless is-entries-expandable is-entries-shrinked"><div
            class="card"><div class="card-header">
      <a
        href='/03_backend/'
        class='card-header-title'
          title='Backend'>
        <i class='fa-solid fa-server fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Backend</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless"><div class="">
      <div class=""><li class="is-marginless is-entries-expandable is-entries-shrinked"><div
            class="card"><div class="card-header">
      <a
        href='/03_backend/01_info_models/'
        class='card-header-title'
          title='Модель данных и базы данных'>
        <i class='fa-solid fa-database'></i><p class="pt-0 pb-0 pr-2 pl-1">Модель данных и базы данных</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless"><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/01_info_models/relational/'
        class='card-header-title'
          title='Реляционные таблицы (PostgreSQL)'>
        <i class='fa-solid fa-table'></i><p class="pt-0 pb-0 pr-2 pl-1">Реляционные таблицы (PostgreSQL)</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/01_info_models/documents/'
        class='card-header-title'
          title='Документные коллекции'>
        <i class='fa-solid fa-file-code'></i><p class="pt-0 pb-0 pr-2 pl-1">Документные коллекции</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/01_info_models/vector_store/'
        class='card-header-title'
          title='Векторное хранилище (Qdrant)'>
        <i class='fa-solid fa-magnifying-glass-chart'></i><p class="pt-0 pb-0 pr-2 pl-1">Векторное хранилище (Qdrant)</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/01_info_models/cache/'
        class='card-header-title'
          title='Кэш и очереди (Redis)'>
        <i class='fa-solid fa-bolt'></i><p class="pt-0 pb-0 pr-2 pl-1">Кэш и очереди (Redis)</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/02_rest_methods/'
        class='card-header-title'
          title='REST API'>
        <i class='fa-solid fa-route'></i><p class="pt-0 pb-0 pr-2 pl-1">REST API</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link">
      <a
        href='/02_frontend/'
        class='card-header-title'>
        <i class='fa-solid fa-display fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/02_frontend/'
        class='card-header-title'
          title='Frontend'>
        <i class='fa-solid fa-display fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Frontend</p></a></div>
          </div></li>
      </div>
    </div></ul>
      </aside>
    </div>
    <div id="sidebarCollapsible" class="is-marginless">
      <div class="card is-uncollapse-action">
        <div
          id="sidebarUncollapse"
          class="card-header is-single-link"
          title="Collapse/Uncollapse sidebar"
        >
          <a class="card-header-title">
            <i class="fa-solid fa-angles-right fa-lg"></i>
          </a>
        </div>
      </div>
      <div class="card is-collapse-action">
        <div
          id="sidebarCollapse"
          class="card-header is-single-link"
          title="Collapse/Uncollapse sidebar"
        >
          <a class="card-header-title">
            <i class="fa-solid fa-angles-left fa-lg"></i>
            <p>Collapse sidebar</p>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
<div id="sidebarMobileWrapper" class="column is-narrow is-hidden-desktop"></div>
<div class="columns is-mobile is-marginless is-scroll-smooth has-toc is-toc-collapsed" id="contentContainer">
  <div class="column" id="content" data-pagefind-body><style>
    ul.breadcrumb {
      padding: 10px 15px;
      list-style: none;
      background-color: #eee;
    }
    ul.breadcrumb li {
      display: inline;
      font-size: 14px;
    }
    ul.breadcrumb li+li:before {
      padding: 8px;
      color: black;
      content: "/\00a0";
    }
    ul.breadcrumb li a {
      color: #0275d8;
      text-decoration: none;
    }
    ul.breadcrumb li a:hover {
      color: #01447e;
      text-decoration: underline;
    }
</style>
<ul id="breadcrumbs" class="breadcrumb">
        <li> <a href="/">Промпт-инжиниринг</a> </li>
        <li> <a href="/00_overview/">Описание и артефакты анализа</a> </li>
        <li> <a href="/00_overview/01_br/">Требования</a> </li>
    <li> <a href="/00_overview/01_br/04_fr_rag/">FR: RAG-поиск и генерация презентаций</a></li>
</ul>
<div id="contentTitle">FR: RAG-поиск и генерация презентаций</div><p>&ndash;</p>
<h2 id='содержание'>Содержание<a href='#%d1%81%d0%be%d0%b4%d0%b5%d1%80%d0%b6%d0%b0%d0%bd%d0%b8%d0%b5' class='anchor'>#</a>
</h2><ul>
<li><a
  href="#us-010-%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d1%81%d1%82%d1%80%d1%83%d0%ba%d1%82%d1%83%d1%80%d1%8b-%d0%bf%d1%80%d0%b5%d0%b7%d0%b5%d0%bd%d1%82%d0%b0%d1%86%d0%b8%d0%b8-outline"
    class="is-pretty-link">US-010: Создание структуры презентации (outline)</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></li>
<li><a
  href="#us-011-%d0%b3%d0%b5%d0%bd%d0%b5%d1%80%d0%b0%d1%86%d0%b8%d1%8f-%d1%81%d0%bb%d0%b0%d0%b9%d0%b4%d0%be%d0%b2-%d1%81-%d0%b0%d1%82%d1%80%d0%b8%d0%b1%d1%83%d1%86%d0%b8%d0%b5%d0%b9-%d0%b8%d1%81%d1%82%d0%be%d1%87%d0%bd%d0%b8%d0%ba%d0%be%d0%b2"
    class="is-pretty-link">US-011: Генерация слайдов с атрибуцией источников</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></li>
<li><a
  href="#us-012-%d0%b8%d1%82%d0%b5%d1%80%d0%b0%d1%82%d0%b8%d0%b2%d0%bd%d0%be%d0%b5-%d1%80%d0%b5%d0%b4%d0%b0%d0%ba%d1%82%d0%b8%d1%80%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5-%d0%b8-%d1%81%d0%bc%d0%b5%d0%bd%d0%b0-%d1%82%d0%be%d0%bd%d0%b0%d0%bb%d1%8c%d0%bd%d0%be%d1%81%d1%82%d0%b8"
    class="is-pretty-link">US-012: Итеративное редактирование и смена тональности</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></li>
<li><a
  href="#us-013-%d1%8d%d0%ba%d1%81%d0%bf%d0%be%d1%80%d1%82-%d0%bf%d1%80%d0%b5%d0%b7%d0%b5%d0%bd%d1%82%d0%b0%d1%86%d0%b8%d0%b8"
    class="is-pretty-link">US-013: Экспорт презентации</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></li>
<li><a
  href="#us-014-%d0%bf%d1%83%d0%b1%d0%bb%d0%b8%d1%87%d0%bd%d0%b0%d1%8f-%d1%81%d1%81%d1%8b%d0%bb%d0%ba%d0%b0-%d0%b8-%d0%b0%d0%bd%d0%b0%d0%bb%d0%b8%d1%82%d0%b8%d0%ba%d0%b0-%d0%bf%d1%80%d0%be%d1%81%d0%bc%d0%be%d1%82%d1%80%d0%be%d0%b2"
    class="is-pretty-link">US-014: Публичная ссылка и аналитика просмотров</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></li>
</ul>
<blockquote>
<p><strong>Нумерация:</strong> FR-010 — FR-024. Продолжение в <a
  href="/00_overview/01_br/05_fr_users/"
    class="is-pretty-link">05_fr_users.md</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script> с FR-025.</p>
</blockquote>
<hr>
<h2 id='us-010-создание-структуры-презентации-outline'>US-010: Создание структуры презентации (outline)<a href='#us-010-%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d1%81%d1%82%d1%80%d1%83%d0%ba%d1%82%d1%83%d1%80%d1%8b-%d0%bf%d1%80%d0%b5%d0%b7%d0%b5%d0%bd%d1%82%d0%b0%d1%86%d0%b8%d0%b8-outline' class='anchor'>#</a>
</h2><blockquote>
<p>Как <strong>пользователь</strong>, я хочу задать цель презентации и аудиторию, чтобы система автоматически сгенерировала логичную структуру слайдов на основе моих данных.</p>
</blockquote>
<p><strong>Источник:</strong> <a
  href="/03_backend/01_info_models/relational/"
    class="is-pretty-link">presentations</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script> — поля <code>tone</code>, <code>target_audience</code>, <code>status</code>; <a
  href="/03_backend/01_info_models/relational/"
    class="is-pretty-link">generation_jobs</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script>; <a
  href="/03_backend/01_info_models/documents/"
    class="is-pretty-link">documents.md</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script> — <code>generation_traces.outline_step</code>; <a
  href="/03_backend/01_info_models/vector_store/"
    class="is-pretty-link">vector_store.md</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script> — retrieval pipeline; <a
  href="/03_backend/01_info_models/cache/"
    class="is-pretty-link">cache.md</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script> — <code>semantic_cache</code>, <code>gen_checkpoint</code></p>
<h3 id='fr-010-создание-презентации-с-параметрами'>FR-010: Создание презентации с параметрами<a href='#fr-010-%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%bf%d1%80%d0%b5%d0%b7%d0%b5%d0%bd%d1%82%d0%b0%d1%86%d0%b8%d0%b8-%d1%81-%d0%bf%d0%b0%d1%80%d0%b0%d0%bc%d0%b5%d1%82%d1%80%d0%b0%d0%bc%d0%b8' class='anchor'>#</a>
</h3><p><strong>Описание:</strong> POST <code>/presentations</code> принимает: <code>title</code>, <code>project_id</code>, <code>goal</code> (цель презентации, обязательно), <code>target_audience</code>, <code>tone</code> (ENUM: formal/business/persuasive/technical/educational/friendly), <code>slide_count</code> (5–30, default 15), <code>language</code> (ru/en), <code>brand_kit_id</code> (опционально). Создаётся запись <code>presentations</code> со статусом <code>draft</code>.</p>
<p><strong>Приоритет:</strong> Must</p>
<p><strong>Зависимости:</strong> NFR-001 (latency создания ≤ 500 мс)</p>
<h3 id='fr-011-генерация-outline-через-rag--llm'>FR-011: Генерация outline через RAG + LLM<a href='#fr-011-%d0%b3%d0%b5%d0%bd%d0%b5%d1%80%d0%b0%d1%86%d0%b8%d1%8f-outline-%d1%87%d0%b5%d1%80%d0%b5%d0%b7-rag--llm' class='anchor'>#</a>
</h3><p><strong>Описание:</strong> POST <code>/presentations/{id}/generate/outline</code> запускает async-задачу. Пайплайн:</p>
<ol>
<li>Retrieval: для каждого <code>source_document</code> презентации выполняется similarity-поиск в Qdrant (top_k=8, threshold=0.72) с запросом = <code>goal</code> пользователя.</li>
<li>Семантический кэш: если cosine similarity запроса с кэшированным ≥ 0.95 — возвращается кэшированный ответ (<code>semantic_cache:{hash}</code> в Redis).</li>
<li>LLM (Claude Sonnet, temperature=0.3): генерируется JSON-массив outline с полями: <code>slide_number</code>, <code>title</code>, <code>key_thesis</code>, <code>slide_type</code>, <code>data_required</code>.</li>
<li>Outline сохраняется в <code>gen_checkpoint:{job_id}</code> (Redis) и в <code>generation_jobs</code>.</li>
<li>Статус <code>presentations</code> обновляется: <code>draft → outline_ready</code>.</li>
<li>WebSocket-событие <code>outline_generated</code> отправляется клиенту.</li>
</ol>
<p><strong>Приоритет:</strong> Must</p>
<p><strong>Зависимости:</strong> FR-009 (минимум 1 источник проиндексирован), NFR-001 (p95 outline ≤ 10 сек), NFR-005 (поведение при недоступности LLM)</p>
<h4 id='rag-специфика'>RAG-специфика<a href='#rag-%d1%81%d0%bf%d0%b5%d1%86%d0%b8%d1%84%d0%b8%d0%ba%d0%b0' class='anchor'>#</a>
</h4><table>
<thead>
<tr>
<th>Параметр</th>
<th>Значение</th>
<th>Источник</th>
</tr>
</thead>
<tbody>
<tr>
<td>Chunking</td>
<td>512 токенов, overlap 64</td>
<td><a
  href="/03_backend/01_info_models/vector_store/"
    class="is-pretty-link">vector_store.md</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></td>
</tr>
<tr>
<td>Embedding model</td>
<td>text-embedding-3-large (3072d) / BGE-M3 on-premise</td>
<td><a
  href="/03_backend/01_info_models/vector_store/"
    class="is-pretty-link">vector_store.md</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></td>
</tr>
<tr>
<td>Similarity threshold (outline)</td>
<td>0.72 (cosine)</td>
<td><a
  href="/03_backend/01_info_models/vector_store/"
    class="is-pretty-link">vector_store.md</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></td>
</tr>
<tr>
<td>Semantic cache threshold</td>
<td>0.95 (cosine)</td>
<td><a
  href="/03_backend/01_info_models/cache/"
    class="is-pretty-link">cache.md</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></td>
</tr>
<tr>
<td>Fallback при низком score</td>
<td>Если все чанки &lt; 0.72: LLM генерирует outline только из <code>goal</code> и <code>target_audience</code> без RAG-контекста; пользователь получает предупреждение «Источники данных не содержат релевантной информации для указанной цели»</td>
<td>—</td>
</tr>
<tr>
<td>Fallback при недоступности LLM</td>
<td>Circuit Breaker: Claude → GPT-4o (failover, ≤ 30 сек retry). Если оба недоступны — HTTP 503 с <code>retry_after: 60</code></td>
<td><a
  href="/01_architecture/"
    class="is-pretty-link">01_architecture/_index.md</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></td>
</tr>
</tbody>
</table>
<h4 id='критерии-приёмки-fr-010--fr-011'>Критерии приёмки FR-010 + FR-011<a href='#%d0%ba%d1%80%d0%b8%d1%82%d0%b5%d1%80%d0%b8%d0%b8-%d0%bf%d1%80%d0%b8%d1%91%d0%bc%d0%ba%d0%b8-fr-010--fr-011' class='anchor'>#</a>
</h4><table>
<thead>
<tr>
<th>#</th>
<th>Сценарий</th>
<th>Входные данные</th>
<th>Ожидаемый результат</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Happy path</td>
<td>goal + audience + 2 проиндексированных файла</td>
<td>outline за ≤ 10 сек (p95), статус <code>outline_ready</code>, WebSocket-событие <code>outline_generated</code></td>
</tr>
<tr>
<td>2</td>
<td>Семантический кэш</td>
<td>Запрос с cosine similarity 0.96 к кэшированному</td>
<td>Ответ из кэша за ≤ 200 мс, LLM не вызывается, в трейсе <code>cache_hit: true</code></td>
</tr>
<tr>
<td>3</td>
<td>Нет проиндексированных источников</td>
<td>Презентация без источников</td>
<td>HTTP 422, <code>{&quot;error&quot;: &quot;no_indexed_sources&quot;}</code></td>
</tr>
<tr>
<td>4</td>
<td>Источники нерелевантны</td>
<td>Все чанки score &lt; 0.72</td>
<td>outline сгенерирован только из goal; предупреждение в UI</td>
</tr>
<tr>
<td>5</td>
<td>LLM Claude недоступен</td>
<td>Claude API timeout &gt; 30 сек</td>
<td>Автоматический failover на GPT-4o; в трейсе <code>fallback_triggered: true</code></td>
</tr>
<tr>
<td>6</td>
<td>Оба LLM недоступны</td>
<td>Claude и GPT-4o недоступны</td>
<td>HTTP 503, <code>{&quot;error&quot;: &quot;llm_unavailable&quot;, &quot;retry_after&quot;: 60}</code></td>
</tr>
</tbody>
</table>
<hr>
<h2 id='us-011-генерация-слайдов-с-атрибуцией-источников'>US-011: Генерация слайдов с атрибуцией источников<a href='#us-011-%d0%b3%d0%b5%d0%bd%d0%b5%d1%80%d0%b0%d1%86%d0%b8%d1%8f-%d1%81%d0%bb%d0%b0%d0%b9%d0%b4%d0%be%d0%b2-%d1%81-%d0%b0%d1%82%d1%80%d0%b8%d0%b1%d1%83%d1%86%d0%b8%d0%b5%d0%b9-%d0%b8%d1%81%d1%82%d0%be%d1%87%d0%bd%d0%b8%d0%ba%d0%be%d0%b2' class='anchor'>#</a>
</h2><blockquote>
<p>Как <strong>пользователь</strong>, я хочу чтобы каждый факт на сгенерированном слайде был привязан к конкретному источнику, чтобы я мог верифицировать информацию перед презентацией.</p>
</blockquote>
<p><strong>Источник:</strong> <a
  href="/03_backend/01_info_models/relational/"
    class="is-pretty-link">slides</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script> — поля <code>source_refs</code>, <code>hallucination_flags</code>; <a
  href="/03_backend/01_info_models/relational/"
    class="is-pretty-link">generation_jobs</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script>; <a
  href="/03_backend/01_info_models/documents/"
    class="is-pretty-link">documents.md</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script> — <code>generation_traces.slide_steps</code>, <code>postprocessing</code>; <a
  href="/03_backend/01_info_models/cache/"
    class="is-pretty-link">cache.md</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script> — <code>gen_checkpoint</code>, <code>gen_progress</code></p>
<h3 id='fr-012-генерация-контента-слайда-с-retrieval'>FR-012: Генерация контента слайда с retrieval<a href='#fr-012-%d0%b3%d0%b5%d0%bd%d0%b5%d1%80%d0%b0%d1%86%d0%b8%d1%8f-%d0%ba%d0%be%d0%bd%d1%82%d0%b5%d0%bd%d1%82%d0%b0-%d1%81%d0%bb%d0%b0%d0%b9%d0%b4%d0%b0-%d1%81-retrieval' class='anchor'>#</a>
</h3><p><strong>Описание:</strong> Для каждого слайда из outline система выполняет:</p>
<ol>
<li>Retrieval из Qdrant: query = <code>slide.title + slide.key_thesis</code>, top_k=8, threshold=0.72. При наличии числовых данных (<code>data_required=true</code>) — дополнительный поиск с фильтром <code>contains_numbers=true</code>.</li>
<li>Cross-encoder re-ranking при &gt; 8 результатов.</li>
<li>LLM-генерация: модель получает чанки с метаданными (<code>filename</code>, <code>page_number</code>, <code>section_title</code>) и обязана в ответе JSON явно указать <code>source_refs</code> для каждого утверждения.</li>
<li>Постпроцессинг (см. FR-013).</li>
<li>Слайд сохраняется в PostgreSQL (<code>slides</code>), чекпоинт обновляется в Redis (<code>gen_checkpoint:{job_id}</code>).</li>
<li>Прогресс трансляции через Redis Stream (<code>gen_progress:{job_id}</code>) → WebSocket → клиент.</li>
</ol>
<p><strong>Приоритет:</strong> Must</p>
<p><strong>Зависимости:</strong> FR-011 (outline должен быть готов), NFR-001 (p95 одного слайда ≤ 5 сек), NFR-005 (fallback LLM)</p>
<h3 id='fr-013-постпроцессинг-удаление-ai-клише-и-проверка-фактов'>FR-013: Постпроцессинг: удаление AI-клише и проверка фактов<a href='#fr-013-%d0%bf%d0%be%d1%81%d1%82%d0%bf%d1%80%d0%be%d1%86%d0%b5%d1%81%d1%81%d0%b8%d0%bd%d0%b3-%d1%83%d0%b4%d0%b0%d0%bb%d0%b5%d0%bd%d0%b8%d0%b5-ai-%d0%ba%d0%bb%d0%b8%d1%88%d0%b5-%d0%b8-%d0%bf%d1%80%d0%be%d0%b2%d0%b5%d1%80%d0%ba%d0%b0-%d1%84%d0%b0%d0%ba%d1%82%d0%be%d0%b2' class='anchor'>#</a>
</h3><p><strong>Описание:</strong></p>
<ul>
<li><strong>AI-клише filter:</strong> регулярные выражения + классификатор удаляют конструкции типа «в современном мире», «это позволяет нам», «инновационный подход». Целевая метрика: GPTZero классифицирует текст как «человеческий» с P &gt; 70%.</li>
<li><strong>Проверка числовых утверждений:</strong> для каждого числа из сгенерированного текста — поиск в векторном хранилище. Если чанк с числом в ±5% диапазоне не найден — утверждение помечается флагом <code>not_in_sources</code> в <code>slides.hallucination_flags</code>.</li>
<li><strong>Атрибуция:</strong> каждый факт в <code>slides.source_refs</code> содержит <code>source_document_id</code>, <code>chunk_id</code>, <code>text_fragment</code>. В UI рядом с фактом отображается иконка источника; по наведению — preview оригинального фрагмента.</li>
</ul>
<p><strong>Приоритет:</strong> Must</p>
<p><strong>Зависимости:</strong> FR-012, NFR-003 (HIR &lt; 0.5 на 1000 презентаций)</p>
<h3 id='fr-014-checkpoint-based-recovery-генерации'>FR-014: Checkpoint-based recovery генерации<a href='#fr-014-checkpoint-based-recovery-%d0%b3%d0%b5%d0%bd%d0%b5%d1%80%d0%b0%d1%86%d0%b8%d0%b8' class='anchor'>#</a>
</h3><p><strong>Описание:</strong> После каждого завершённого слайда состояние сохраняется в <code>gen_checkpoint:{job_id}</code> (Redis HASH). При падении Celery worker новый worker читает checkpoint и продолжает с <code>slides_completed + 1</code>. Максимальное время возобновления после падения worker: ≤ 60 секунд.</p>
<p><strong>Приоритет:</strong> Must</p>
<p><strong>Зависимости:</strong> NFR-002 (надёжность), CON-002 (Redis AOF persistence)</p>
<h4 id='критерии-приёмки-fr-012--fr-013--fr-014'>Критерии приёмки FR-012 + FR-013 + FR-014<a href='#%d0%ba%d1%80%d0%b8%d1%82%d0%b5%d1%80%d0%b8%d0%b8-%d0%bf%d1%80%d0%b8%d1%91%d0%bc%d0%ba%d0%b8-fr-012--fr-013--fr-014' class='anchor'>#</a>
</h4><table>
<thead>
<tr>
<th>#</th>
<th>Сценарий</th>
<th>Входные данные</th>
<th>Ожидаемый результат</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Happy path — 15 слайдов</td>
<td>Outline из 15 пунктов, 3 проиндексированных файла</td>
<td>Все слайды сгенерированы, каждый имеет <code>source_refs</code>, статус <code>ready</code> за ≤ 60 сек (p95)</td>
</tr>
<tr>
<td>2</td>
<td>Слайд с числами</td>
<td>Слайд с <code>data_required=true</code></td>
<td>Чанки с <code>contains_numbers=true</code> приоритизированы; числа имеют <code>source_refs</code> или <code>hallucination_flags</code></td>
</tr>
<tr>
<td>3</td>
<td>AI-клише в ответе</td>
<td>LLM вернул «в современном мире&hellip;»</td>
<td>Клише удалено постпроцессором; в <code>generation_traces</code> <code>ai_cliche_removed &gt; 0</code></td>
</tr>
<tr>
<td>4</td>
<td>Галлюцинация числа</td>
<td>Число не найдено в источниках ±5%</td>
<td><code>hallucination_flags: [{flag_type: &quot;not_in_sources&quot;}]</code>; в UI предупреждение ⚠</td>
</tr>
<tr>
<td>5</td>
<td>Падение worker на слайде 7</td>
<td>Worker процесс завершён</td>
<td>Новый worker читает checkpoint, продолжает с слайда 8; пользователь не замечает сбоя</td>
</tr>
<tr>
<td>6</td>
<td>Стриминг прогресса</td>
<td>WebSocket подключён</td>
<td>Событие <code>slide_completed</code> приходит после каждого слайда с <code>progress_pct</code></td>
</tr>
</tbody>
</table>
<h4 id='примечания-архитектора'>Примечания архитектора<a href='#%d0%bf%d1%80%d0%b8%d0%bc%d0%b5%d1%87%d0%b0%d0%bd%d0%b8%d1%8f-%d0%b0%d1%80%d1%85%d0%b8%d1%82%d0%b5%d0%ba%d1%82%d0%be%d1%80%d0%b0' class='anchor'>#</a>
</h4><blockquote>
<p>⚙️ Генерация 15 слайдов параллелизируется: до 3 слайдов генерируются одновременно (LangGraph параллельные ветви), при условии независимости контекста. Это снижает p95 с 75 сек до ≈ 30 сек при полной параллелизации.</p>
</blockquote>
<hr>
<h2 id='us-012-итеративное-редактирование-и-смена-тональности'>US-012: Итеративное редактирование и смена тональности<a href='#us-012-%d0%b8%d1%82%d0%b5%d1%80%d0%b0%d1%82%d0%b8%d0%b2%d0%bd%d0%be%d0%b5-%d1%80%d0%b5%d0%b4%d0%b0%d0%ba%d1%82%d0%b8%d1%80%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5-%d0%b8-%d1%81%d0%bc%d0%b5%d0%bd%d0%b0-%d1%82%d0%be%d0%bd%d0%b0%d0%bb%d1%8c%d0%bd%d0%be%d1%81%d1%82%d0%b8' class='anchor'>#</a>
</h2><blockquote>
<p>Как <strong>пользователь</strong>, я хочу изменить тональность готовой презентации или перегенерировать отдельный слайд, чтобы адаптировать результат без полной перегенерации.</p>
</blockquote>
<p><strong>Источник:</strong> <a
  href="/03_backend/01_info_models/relational/"
    class="is-pretty-link">slides</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script> — <code>slide_versions</code>; <a
  href="/03_backend/01_info_models/relational/"
    class="is-pretty-link">presentations</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script> — <code>tone</code>; <a
  href="/03_backend/01_info_models/documents/"
    class="is-pretty-link">documents.md</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script> — <code>prompt_templates</code> — <code>tone_variant</code></p>
<h3 id='fr-015-смена-тональности-презентации'>FR-015: Смена тональности презентации<a href='#fr-015-%d1%81%d0%bc%d0%b5%d0%bd%d0%b0-%d1%82%d0%be%d0%bd%d0%b0%d0%bb%d1%8c%d0%bd%d0%be%d1%81%d1%82%d0%b8-%d0%bf%d1%80%d0%b5%d0%b7%d0%b5%d0%bd%d1%82%d0%b0%d1%86%d0%b8%d0%b8' class='anchor'>#</a>
</h3><p><strong>Описание:</strong> PATCH <code>/presentations/{id}</code> с полем <code>tone</code> инициирует перегенерацию всех слайдов с промптом, соответствующим новой тональности (из <code>prompt_templates</code> с <code>tone_variant = new_tone</code>). Прежние версии слайдов сохраняются в <code>slide_versions</code>. Операция асинхронная; прогресс через WebSocket.</p>
<p><strong>Приоритет:</strong> Must</p>
<p><strong>Зависимости:</strong> FR-012, NFR-001 (p95 смены тональности ≤ 30 сек для 15 слайдов)</p>
<h3 id='fr-016-регенерация-отдельного-слайда'>FR-016: Регенерация отдельного слайда<a href='#fr-016-%d1%80%d0%b5%d0%b3%d0%b5%d0%bd%d0%b5%d1%80%d0%b0%d1%86%d0%b8%d1%8f-%d0%be%d1%82%d0%b4%d0%b5%d0%bb%d1%8c%d0%bd%d0%be%d0%b3%d0%be-%d1%81%d0%bb%d0%b0%d0%b9%d0%b4%d0%b0' class='anchor'>#</a>
</h3><p><strong>Описание:</strong> POST <code>/slides/{id}/regenerate</code> с опциональным <code>instruction</code> (например, «сделай короче», «добавь данные о конкурентах»). Система регенерирует только этот слайд, сохраняя текущую версию в <code>slide_versions</code>. Retrieval выполняется заново с учётом <code>instruction</code>.</p>
<p><strong>Приоритет:</strong> Must</p>
<p><strong>Зависимости:</strong> FR-012</p>
<h3 id='fr-017-версионирование-слайдов-и-откат'>FR-017: Версионирование слайдов и откат<a href='#fr-017-%d0%b2%d0%b5%d1%80%d1%81%d0%b8%d0%be%d0%bd%d0%b8%d1%80%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5-%d1%81%d0%bb%d0%b0%d0%b9%d0%b4%d0%be%d0%b2-%d0%b8-%d0%be%d1%82%d0%ba%d0%b0%d1%82' class='anchor'>#</a>
</h3><p><strong>Описание:</strong> GET <code>/slides/{id}/versions</code> возвращает историю версий (<code>slide_versions</code>). POST <code>/slides/{id}/restore/{version_number}</code> восстанавливает указанную версию как текущую (создаётся новая версия с контентом старой). Хранится не более 10 версий на слайд; при превышении — удаляется самая старая.</p>
<p><strong>Приоритет:</strong> Should</p>
<p><strong>Зависимости:</strong> FR-015, FR-016</p>
<h4 id='критерии-приёмки-fr-015--fr-017'>Критерии приёмки FR-015 — FR-017<a href='#%d0%ba%d1%80%d0%b8%d1%82%d0%b5%d1%80%d0%b8%d0%b8-%d0%bf%d1%80%d0%b8%d1%91%d0%bc%d0%ba%d0%b8-fr-015--fr-017' class='anchor'>#</a>
</h4><table>
<thead>
<tr>
<th>#</th>
<th>Сценарий</th>
<th>Входные данные</th>
<th>Ожидаемый результат</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Смена тональности</td>
<td>PATCH tone: formal → persuasive</td>
<td>Все слайды перегенерированы с persuasive-промптом ≤ 30 сек (p95); прежние версии в <code>slide_versions</code></td>
</tr>
<tr>
<td>2</td>
<td>Регенерация слайда с инструкцией</td>
<td>POST <code>/slides/{id}/regenerate</code>, instruction: «добавь сравнение с конкурентами»</td>
<td>Слайд перегенерирован с учётом инструкции; предыдущая версия сохранена</td>
</tr>
<tr>
<td>3</td>
<td>Откат слайда</td>
<td>POST restore version_number=2</td>
<td>Текущий контент заменён версией 2; создана новая версия 4 (= контент v2)</td>
</tr>
<tr>
<td>4</td>
<td>Превышение лимита версий</td>
<td>11-я регенерация слайда</td>
<td>Версия 1 удалена; хранятся версии 2–11</td>
</tr>
</tbody>
</table>
<hr>
<h2 id='us-013-экспорт-презентации'>US-013: Экспорт презентации<a href='#us-013-%d1%8d%d0%ba%d1%81%d0%bf%d0%be%d1%80%d1%82-%d0%bf%d1%80%d0%b5%d0%b7%d0%b5%d0%bd%d1%82%d0%b0%d1%86%d0%b8%d0%b8' class='anchor'>#</a>
</h2><blockquote>
<p>Как <strong>пользователь</strong>, я хочу скачать готовую презентацию в нужном формате, чтобы использовать её в своей работе.</p>
</blockquote>
<p><strong>Источник:</strong> <a
  href="/03_backend/01_info_models/relational/"
    class="is-pretty-link">export_jobs</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script> — <code>format</code>, <code>status</code>, <code>s3_key</code>, <code>download_url</code>; <a
  href="/01_architecture/"
    class="is-pretty-link">01_architecture/_index.md</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script> — Export Service</p>
<h3 id='fr-018-экспорт-в-pptx'>FR-018: Экспорт в PPTX<a href='#fr-018-%d1%8d%d0%ba%d1%81%d0%bf%d0%be%d1%80%d1%82-%d0%b2-pptx' class='anchor'>#</a>
</h3><p><strong>Описание:</strong> POST <code>/presentations/{id}/export</code> с <code>format: pptx</code>. Задача помещается в <code>celery_queue:export</code>. Export Service (python-pptx) рендерит PPTX: применяет Brand Kit (цвета, шрифты, логотип, шаблон из <code>brand_kits.template_s3_key</code>), встраивает диаграммы Matplotlib как редактируемые объекты PowerPoint, добавляет footnote с attribution для каждого источника. PPTX сохраняется в S3, <code>export_jobs.download_url</code> проставляется с TTL 24 часа.</p>
<p><strong>Приоритет:</strong> Must</p>
<p><strong>Зависимости:</strong> NFR-001 (p95 экспорта ≤ 15 сек), NFR-004 (файл шифруется at-rest в S3)</p>
<h3 id='fr-019-экспорт-в-pdf'>FR-019: Экспорт в PDF<a href='#fr-019-%d1%8d%d0%ba%d1%81%d0%bf%d0%be%d1%80%d1%82-%d0%b2-pdf' class='anchor'>#</a>
</h3><p><strong>Описание:</strong> POST <code>/presentations/{id}/export</code> с <code>format: pdf</code>. LibreOffice headless конвертирует PPTX → PDF с закладками по слайдам. Векторный рендеринг. Файл в S3, TTL 24 часа.</p>
<p><strong>Приоритет:</strong> Must</p>
<p><strong>Зависимости:</strong> FR-018 (PDF генерируется из PPTX)</p>
<h3 id='fr-020-экспорт-в-google-slides'>FR-020: Экспорт в Google Slides<a href='#fr-020-%d1%8d%d0%ba%d1%81%d0%bf%d0%be%d1%80%d1%82-%d0%b2-google-slides' class='anchor'>#</a>
</h3><p><strong>Описание:</strong> POST <code>/presentations/{id}/export</code> с <code>format: google_slides</code>. Требует наличия <code>oauth_connections</code> с <code>provider = google</code> и scope <code>https://www.googleapis.com/auth/drive</code>. Система создаёт презентацию в Google Slides через API v1 в корне Drive пользователя. <code>export_jobs.google_file_id</code> сохраняется для прямой ссылки.</p>
<p><strong>Приоритет:</strong> Should</p>
<p><strong>Зависимости:</strong> FR-004 (Google OAuth), FR-018</p>
<h3 id='fr-021-экспорт-в-png-слайды'>FR-021: Экспорт в PNG (слайды)<a href='#fr-021-%d1%8d%d0%ba%d1%81%d0%bf%d0%be%d1%80%d1%82-%d0%b2-png-%d1%81%d0%bb%d0%b0%d0%b9%d0%b4%d1%8b' class='anchor'>#</a>
</h3><p><strong>Описание:</strong> POST <code>/presentations/{id}/export</code> с <code>format: png</code> и опциональным <code>slide_range: [1, 5]</code>. Playwright headless рендерит каждый слайд как PNG (1920×1080). ZIP-архив со слайдами сохраняется в S3.</p>
<p><strong>Приоритет:</strong> Could</p>
<p><strong>Зависимости:</strong> FR-018</p>
<h4 id='критерии-приёмки-fr-018--fr-021'>Критерии приёмки FR-018 — FR-021<a href='#%d0%ba%d1%80%d0%b8%d1%82%d0%b5%d1%80%d0%b8%d0%b8-%d0%bf%d1%80%d0%b8%d1%91%d0%bc%d0%ba%d0%b8-fr-018--fr-021' class='anchor'>#</a>
</h4><table>
<thead>
<tr>
<th>#</th>
<th>Сценарий</th>
<th>Входные данные</th>
<th>Ожидаемый результат</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>PPTX с Brand Kit</td>
<td>Презентация с brand_kit_id, 15 слайдов</td>
<td>PPTX ≤ 15 сек (p95); содержит корпоративные цвета, шрифты, логотип; диаграммы редактируемые</td>
</tr>
<tr>
<td>2</td>
<td>PPTX без Brand Kit</td>
<td>brand_kit_id = null</td>
<td>Применяется дефолтный шаблон; PPTX корректен</td>
</tr>
<tr>
<td>3</td>
<td>Экспорт в PDF</td>
<td>format: pdf</td>
<td>PDF с векторной графикой и закладками ≤ 20 сек</td>
</tr>
<tr>
<td>4</td>
<td>Google Slides — токен истёк</td>
<td>access_token expired</td>
<td>Автоматический refresh через refresh_token; экспорт выполнен</td>
</tr>
<tr>
<td>5</td>
<td>Скачивание по истёкшей ссылке</td>
<td>download_url после 24 часов</td>
<td>HTTP 410 Gone, <code>{&quot;error&quot;: &quot;download_url_expired&quot;}</code></td>
</tr>
</tbody>
</table>
<hr>
<h2 id='us-014-публичная-ссылка-и-аналитика-просмотров'>US-014: Публичная ссылка и аналитика просмотров<a href='#us-014-%d0%bf%d1%83%d0%b1%d0%bb%d0%b8%d1%87%d0%bd%d0%b0%d1%8f-%d1%81%d1%81%d1%8b%d0%bb%d0%ba%d0%b0-%d0%b8-%d0%b0%d0%bd%d0%b0%d0%bb%d0%b8%d1%82%d0%b8%d0%ba%d0%b0-%d0%bf%d1%80%d0%be%d1%81%d0%bc%d0%be%d1%82%d1%80%d0%be%d0%b2' class='anchor'>#</a>
</h2><blockquote>
<p>Как <strong>пользователь</strong>, я хочу поделиться презентацией по публичной ссылке и видеть статистику просмотров, чтобы понимать вовлечённость аудитории.</p>
</blockquote>
<p><strong>Источник:</strong> <a
  href="/03_backend/01_info_models/relational/"
    class="is-pretty-link">presentation_shares</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script> — <code>token</code>, <code>access_level</code>, <code>expires_at</code>; <a
  href="/03_backend/01_info_models/documents/"
    class="is-pretty-link">documents.md</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script> — <code>presentation_analytics</code>; <a
  href="/03_backend/01_info_models/cache/"
    class="is-pretty-link">cache.md</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script> — <code>presentation_view_count:{id}</code></p>
<h3 id='fr-022-создание-публичной-ссылки'>FR-022: Создание публичной ссылки<a href='#fr-022-%d1%81%d0%be%d0%b7%d0%b4%d0%b0%d0%bd%d0%b8%d0%b5-%d0%bf%d1%83%d0%b1%d0%bb%d0%b8%d1%87%d0%bd%d0%be%d0%b9-%d1%81%d1%81%d1%8b%d0%bb%d0%ba%d0%b8' class='anchor'>#</a>
</h3><p><strong>Описание:</strong> POST <code>/presentations/{id}/shares</code> создаёт <code>presentation_shares</code> с уникальным 32-символьным <code>token</code>. Параметры: <code>access_level</code> (view/comment/edit), <code>password</code> (опционально, хранится как bcrypt hash), <code>expires_at</code> (опционально). Публичная ссылка вида <code>https://present.ai/share/{token}</code>.</p>
<p><strong>Приоритет:</strong> Must</p>
<p><strong>Зависимости:</strong> NFR-004 (пароль — bcrypt)</p>
<h3 id='fr-023-просмотр-презентации-по-публичной-ссылке'>FR-023: Просмотр презентации по публичной ссылке<a href='#fr-023-%d0%bf%d1%80%d0%be%d1%81%d0%bc%d0%be%d1%82%d1%80-%d0%bf%d1%80%d0%b5%d0%b7%d0%b5%d0%bd%d1%82%d0%b0%d1%86%d0%b8%d0%b8-%d0%bf%d0%be-%d0%bf%d1%83%d0%b1%d0%bb%d0%b8%d1%87%d0%bd%d0%be%d0%b9-%d1%81%d1%81%d1%8b%d0%bb%d0%ba%d0%b5' class='anchor'>#</a>
</h3><p><strong>Описание:</strong> GET <code>/share/{token}</code> — анонимный endpoint. Система проверяет: токен существует, не истёк, пароль (если задан). Возвращает презентацию в read-only режиме. Каждый просмотр записывает событие в <code>presentation_analytics</code> (MongoDB): <code>event_type</code>, <code>device_type</code>, <code>country_code</code> (GeoIP), <code>ip_hash</code> (SHA-256 от IP, не сам IP — GDPR).</p>
<p><strong>Приоритет:</strong> Must</p>
<p><strong>Зависимости:</strong> NFR-007 (GDPR: ip_hash вместо IP)</p>
<h3 id='fr-024-аналитика-просмотров'>FR-024: Аналитика просмотров<a href='#fr-024-%d0%b0%d0%bd%d0%b0%d0%bb%d0%b8%d1%82%d0%b8%d0%ba%d0%b0-%d0%bf%d1%80%d0%be%d1%81%d0%bc%d0%be%d1%82%d1%80%d0%be%d0%b2' class='anchor'>#</a>
</h3><p><strong>Описание:</strong> GET <code>/presentations/{id}/analytics</code> возвращает агрегированную статистику из <code>presentation_analytics</code>: <code>total_views</code>, <code>unique_sessions</code>, <code>avg_completion_rate</code>, <code>avg_time_per_slide_ms</code>, <code>views_by_device</code>, <code>views_by_country</code>. Актуальный счётчик просмотров (<code>presentation_view_count:{id}</code>) берётся из Redis (O(1)).</p>
<p><strong>Приоритет:</strong> Should</p>
<p><strong>Зависимости:</strong> FR-023</p>
<h4 id='критерии-приёмки-fr-022--fr-024'>Критерии приёмки FR-022 — FR-024<a href='#%d0%ba%d1%80%d0%b8%d1%82%d0%b5%d1%80%d0%b8%d0%b8-%d0%bf%d1%80%d0%b8%d1%91%d0%bc%d0%ba%d0%b8-fr-022--fr-024' class='anchor'>#</a>
</h4><table>
<thead>
<tr>
<th>#</th>
<th>Сценарий</th>
<th>Входные данные</th>
<th>Ожидаемый результат</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Создание ссылки без пароля</td>
<td>POST <code>/shares</code>, access_level: view</td>
<td>token = 32 символа, URL <code>https://present.ai/share/{token}</code></td>
</tr>
<tr>
<td>2</td>
<td>Просмотр с паролем</td>
<td>GET <code>/share/{token}</code>, пароль верный</td>
<td>Презентация открыта; в analytics записано событие <code>view_started</code></td>
</tr>
<tr>
<td>3</td>
<td>Просмотр с неверным паролем</td>
<td>Неверный пароль</td>
<td>HTTP 403, <code>{&quot;error&quot;: &quot;invalid_share_password&quot;}</code></td>
</tr>
<tr>
<td>4</td>
<td>Истёкшая ссылка</td>
<td>expires_at в прошлом</td>
<td>HTTP 410, <code>{&quot;error&quot;: &quot;share_expired&quot;}</code></td>
</tr>
<tr>
<td>5</td>
<td>Аналитика</td>
<td>GET <code>/presentations/{id}/analytics</code> после 10 просмотров</td>
<td>JSON с <code>total_views: 10</code>, <code>views_by_device: {desktop: 8, mobile: 2}</code></td>
</tr>
<tr>
<td>6</td>
<td>IP в аналитике</td>
<td>Запрос от IP 192.168.1.1</td>
<td>В MongoDB <code>ip_hash = sha256(&quot;192.168.1.1{salt}&quot;)</code>, не сам IP</td>
</tr>
</tbody>
</table>
<script lang="js">
  const innerPages = document.getElementById("inner-pages");
  if (innerPages) {
    innerPages.querySelectorAll("li").forEach(listElement => {
      listElement.addEventListener("click", () => {
        const name = listElement.innerText.trim();
        if (openedMenu) {
          if (openedMenu.includes(name)) {
            const index = openedMenu.findIndex(item => item === name);
            openedMenu.splice(index, 1);
          } else {
            openedMenu.push(name);
          }
          localStorage.setItem("openedMenu", JSON.stringify(openedMenu));
        } else {
          localStorage.setItem("openedMenu", "[" + name + "]")
        }
      });
    });
  }
</script><nav class="pagination"><a class="nav nav-prev" href="http://localhost:1313/00_overview/01_br/03_fr_documents/" title="FR_01: Загрузка и индексация документов"><i class="fa fa-arrow-left" aria-hidden="true"></i> Предыдущее - FR_01: Загрузка и индексация документов</a>
  <a class="nav nav-next" href="http://localhost:1313/00_overview/01_br/05_fr_users/" title="FR: Управление пользователями">Следующее - FR: Управление пользователями <i class="fa fa-arrow-right" aria-hidden="true"></i></a>
</nav></div><div class="column is-sticky is-paddingless" id="tocWrapper">
  <div class="is-paddingless" id="tocContainer">
    <div id="tocContent">
      <div class="additionalinfo">
    <span id="method_name">FR: RAG-поиск и генерация презентаций</span>







    <strong>Описание:</strong> Функциональные требования к RAG-пайплайну, генерации контента, экспорту и аналитике.
</div>
      <div class="toc-header">
        <h6 class="toc-title is-marginless">Содержание:On this page:</h6>
        <i
          title="Back to top"
          id="tocBackToTop"
          class="fa-solid fa-circle-arrow-up"
        ></i>      
      </div>
      <div id="toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#содержание">Содержание</a></li>
    <li><a href="#us-010-создание-структуры-презентации-outline">US-010: Создание структуры презентации (outline)</a>
      <ul>
        <li><a href="#fr-010-создание-презентации-с-параметрами">FR-010: Создание презентации с параметрами</a></li>
        <li><a href="#fr-011-генерация-outline-через-rag--llm">FR-011: Генерация outline через RAG + LLM</a></li>
      </ul>
    </li>
    <li><a href="#us-011-генерация-слайдов-с-атрибуцией-источников">US-011: Генерация слайдов с атрибуцией источников</a>
      <ul>
        <li><a href="#fr-012-генерация-контента-слайда-с-retrieval">FR-012: Генерация контента слайда с retrieval</a></li>
        <li><a href="#fr-013-постпроцессинг-удаление-ai-клише-и-проверка-фактов">FR-013: Постпроцессинг: удаление AI-клише и проверка фактов</a></li>
        <li><a href="#fr-014-checkpoint-based-recovery-генерации">FR-014: Checkpoint-based recovery генерации</a></li>
      </ul>
    </li>
    <li><a href="#us-012-итеративное-редактирование-и-смена-тональности">US-012: Итеративное редактирование и смена тональности</a>
      <ul>
        <li><a href="#fr-015-смена-тональности-презентации">FR-015: Смена тональности презентации</a></li>
        <li><a href="#fr-016-регенерация-отдельного-слайда">FR-016: Регенерация отдельного слайда</a></li>
        <li><a href="#fr-017-версионирование-слайдов-и-откат">FR-017: Версионирование слайдов и откат</a></li>
      </ul>
    </li>
    <li><a href="#us-013-экспорт-презентации">US-013: Экспорт презентации</a>
      <ul>
        <li><a href="#fr-018-экспорт-в-pptx">FR-018: Экспорт в PPTX</a></li>
        <li><a href="#fr-019-экспорт-в-pdf">FR-019: Экспорт в PDF</a></li>
        <li><a href="#fr-020-экспорт-в-google-slides">FR-020: Экспорт в Google Slides</a></li>
        <li><a href="#fr-021-экспорт-в-png-слайды">FR-021: Экспорт в PNG (слайды)</a></li>
      </ul>
    </li>
    <li><a href="#us-014-публичная-ссылка-и-аналитика-просмотров">US-014: Публичная ссылка и аналитика просмотров</a>
      <ul>
        <li><a href="#fr-022-создание-публичной-ссылки">FR-022: Создание публичной ссылки</a></li>
        <li><a href="#fr-023-просмотр-презентации-по-публичной-ссылке">FR-023: Просмотр презентации по публичной ссылке</a></li>
        <li><a href="#fr-024-аналитика-просмотров">FR-024: Аналитика просмотров</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
<ul class="info" style="line-height: 1.2; list-style-type: none; border: 1px solid; border-radius: 1px; padding: 5px; margin: 16px 10px 0; color: black;">
    
    
    
    
    
    
    
    
    </ul>
    
<div id="taxonomies"><div class="taxonomy-wrapper"></div><div class="taxonomy-wrapper"></div></div>
      <div class="toc-header"><div class="edit-meta"></div>
</div>
    </div>
  </div>
  <div
    class="is-paddingless"
    id="tocCollapsible"
    title="Collapse/Uncollapse table of contents"
  >
    <i class="fa-solid fa-angles-right fa-lg"></i>
  </div>
</div>
</div>
</div><script type='text/javascript'>
  const baseUrl = 'http:\/\/localhost:1313\/';
  const codeCopyBefore = 'Copy to clipboard';
  const codeCopyAfter = 'Copied to clipboard';
  const svgDownloadLabel = 'Download as SVG';
  const helperLoadingLabel = 'Loading';
  const searchNoResults = 'No result found';
  const introNextLabel = 'Next';
  const introPrevLabel = 'Previous';
  const introSkipLabel = '✗';
  const introDoneLabel = 'Done';
  const printLabel = 'Print current page';
  const qrCodeLabel = 'Show current page QR code';
  const naCommonLabel = 'Not available';
</script>
<script
      type="module"
      src="/js/theme/modules/const.min.js"
    ></script><script
      type="module"
      src="/js/theme/modules/helpers.min.js"
    ></script><script
      type="module"
      src="/js/theme/modules/helpersGlobal.min.js"
    ></script><script
      type="module"
      src="/js/theme/init.min.js"
    ></script><script
      type="module"
      src="/js/theme/navbar.min.js"
    ></script><script
      type="module"
      src="/js/theme/print.min.js"
    ></script><script
      type="module"
      src="/js/theme/qrcode.min.js"
    ></script><script
      type="module"
      src="/js/theme/search.min.js"
    ></script><script
      type="module"
      src="/js/theme/shortcuts.min.js"
    ></script><script
      type="module"
      src="/js/theme/sidebar.min.js"
    ></script><script
      type="module"
      src="/js/theme/toc.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/jquery/jquery-3.6.3.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/tippy/popper.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/tippy/tippy-bundle.umd.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/markmap/markmap-autoloader.min.js"
    ></script><script
      type="text/javascript"
      src="/js/theme/browserCompatibility.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/flexsearch/flexsearch.bundle.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/qrious/qrious.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/overlay-scrollbars/overlayscrollbars.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/markmap/markmap.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/readfile/rawdeflate.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/1ce05b4b.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/techradar/d3.v4.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/techradar/radar.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/bpmn-visualization/bpmn-visualization.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/sorttable/sorttable.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/mermaid/svg-pan-zoom.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/simplesearch/simplesearch.min.js"
    ></script>
<script>$("table").addClass("sortable");</script>
  </body>
</html>
