<!DOCTYPE html>
<html>
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="generator" content="Hugo 0.126.1">
<meta name="viewport" content="width=device-width, initial-scale=1" /><meta name="description" content="Асинхронная генерация всех слайдов по утверждённой структуре. Результат доставляется через WebSocket. Цель: p95 ≤ 60 с." />

<title>POST /presentations/{id}/generate/slides</title>
<link
  rel="icon"
  href="/images/favicon.png?v=1772348693"
  type="image/x-icon"/>
<link
    rel="stylesheet"
    rel="preload"
    type="text/css"
    href="/css/main.css"
  /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/all.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/sharp-thin.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/sharp-solid.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/sharp-regular.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/sharp-light.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/sorttable/sorttable.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/tippy/light-border.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/techradar/radar.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/form-js/form-js.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/overlay-scrollbars/overlayscrollbars.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/simplesearch/simplesearch.min.css"
    />
</head>
  <body onload="browserCompatibility()"><div id="navbarInfo" class="is-hidden modal-container">
  <div class="modal-content-box modal-text-box">
    <div class="card modal-title is-radiusless">
      <div class="card-header">
        <p class="card-header-title is-marginless">About</p>
      </div>
    </div>
    <div class="modal-content-container">
      <div class="modal-content-block is-block">
</div>
    </div>
  </div>
</div>
<div id="navbarShortcuts" class="is-hidden modal-container">
  <div class="modal-content-box modal-text-box"><div class="card modal-title is-radiusless">
        <div class="card-header">
          <p class="card-header-title is-marginless">Keyboard shortcuts</p>
        </div>
      </div>
      <div class="modal-content-container">
        <div class="modal-content-block"><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>q</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Show current page QR code</p>
  </div><div class="modal-content"><kbd>Escape</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Close modals</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>i</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Show website information</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>k</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Show shortcuts</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>h</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Go to homepage</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>f</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Find on website</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>m</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Collapse/Uncollapse sidebar</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>t</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Collapse/Uncollapse table of contents</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>↑</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Go to the top of the page</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>↓</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Go to the bottom of the page</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>p</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Print current page</p>
  </div></div>
      </div></div>
</div>
<div id="modalContainer" class="is-hidden modal-container">
  <div id="modal" class="modal-content-box"></div>
</div>
<nav id="navbar" class="navbar" role="navigation" aria-label="main navigation">
  <div id="navbarItemsContainer" class="navbar-brand"><div id="globalLogoContainer" class="is-flex"><a
    id="globalLogo"
    class="navbar-item navbar-item-standard is-paddingless"
    href="/"
  >
    <img
      id="globalLogoImg"
      alt="Homepage"
      src="/images/logo.png?v=1772348693"/>
    <div class="logo-header-container">
      <span>Сервис генерации презентаций</span>
    </div>
  </a>
  <a
    id="globalTouchLogo"
    class="navbar-item navbar-item-standard is-paddingless"
    href="/"
  >
    <img
      alt="Homepage"
      src="/images/logoTouch.png?v=1772348693"/>
  </a>
</div>
<div id="navbarItems" class="is-flex">
      <div id="navbarItemsStart" class="is-flex">
        
      </div>
      <div id="navbarItemsEnd" class="is-flex"><div class="navbar-item">
  <a
    id="listDocuments"
    class="button navbar-item-standard"
    href="/listdocuments/"
  >
    <span class="icon">
      <i class="fa-solid fa-list"></i>
    </span>
    <span class="icon-text">&nbsp;Список документов</span>
  </a>
</div><div class="navbar-item">
  <a
    id="searchButton"
    class="button navbar-item-standard"
    href="/search/"
  >
    <span class="icon">
      <i class="fa-solid fa-magnifying-glass"></i>
    </span>
    <span class="icon-text">&nbsp;Поиск</span>
  </a>
</div>
<div class="navbar-item">
  <a
    id="printButton"
    class="button navbar-item-standard"
  >
    <span class="icon-text">Print</span>
    <span class="icon">
      <i class="fa-solid fa-print fa-lg"></i>
    </span>
  </a>
</div></div>
    </div>
  </div>
</nav>
<div id="navbarOverlay"></div><div
      class="columns is-mobile is-paddingless is-marginless"
      id="mainContainer"
    ><div
  id="sidebarContainer"
  class="column is-narrow is-paddingless is-marginless"
>
  <div id="sidebarWrapper" class="is-fixed">
    <div id="sidebar" class="is-marginless">
      <aside class="menu is-paddingless is-marginless">
        <ul class="menu-list is-marginless is-paddingless"><div class="card is-fs-expandable-icon"><div class="card-header">
      <a
        href='/00_overview/'
        class='card-header-title'>
        <i class='fa-solid fa-circle-info fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless is-entries-expandable is-entries-shrinked"><div
            class="card"><div class="card-header">
      <a
        href='/00_overview/'
        class='card-header-title'
          title='Описание и артефакты анализа'>
        <i class='fa-solid fa-circle-info fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Описание и артефакты анализа</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless"><div class="">
      <div class=""><li class="is-marginless is-entries-expandable is-entries-shrinked"><div
            class="card"><div class="card-header">
      <a
        href='/00_overview/01_br/'
        class='card-header-title'
          title='Требования'>
        <i class='fa-solid fa-folder-open'></i><p class="pt-0 pb-0 pr-2 pl-1">Требования</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless"><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/01_br/'
        class='card-header-title'
          title='Бизнес-контекст и БТ'>
        <i class='fa-solid fa-circle-info'></i><p class="pt-0 pb-0 pr-2 pl-1">Бизнес-контекст и БТ</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/02_actors/'
        class='card-header-title'
          title='Акторы и границы системы'>
        <i class='fa-solid fa-users'></i><p class="pt-0 pb-0 pr-2 pl-1">Акторы и границы системы</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/03_fr_documents/'
        class='card-header-title'
          title='FR_01: Загрузка и индексация документов'>
        <i class='fa-solid fa-list-check'></i><p class="pt-0 pb-0 pr-2 pl-1">FR_01: Загрузка и индексация документов</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/04_fr_rag/'
        class='card-header-title'
          title='FR_02: RAG-поиск и генерация презентаций'>
        <i class='fa-solid fa-list-check'></i><p class="pt-0 pb-0 pr-2 pl-1">FR_02: RAG-поиск и генерация презентаций</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/05_fr_users/'
        class='card-header-title'
          title='FR_03: Управление пользователями'>
        <i class='fa-solid fa-list-check'></i><p class="pt-0 pb-0 pr-2 pl-1">FR_03: Управление пользователями</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/06_fr_admin/'
        class='card-header-title'
          title='FR_04: Администрирование'>
        <i class='fa-solid fa-list-check'></i><p class="pt-0 pb-0 pr-2 pl-1">FR_04: Администрирование</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/07_nonfunctional/'
        class='card-header-title'
          title='Нефункциональные требования'>
        <i class='fa-solid fa-gauge-high'></i><p class="pt-0 pb-0 pr-2 pl-1">Нефункциональные требования</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/02_constraints/'
        class='card-header-title'
          title='Ограничения и допущения'>
        <i class='fa-solid fa-lock'></i><p class="pt-0 pb-0 pr-2 pl-1">Ограничения и допущения</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/03_interfaces/'
        class='card-header-title'
          title='Интерфейсы'>
        <i class='fa-solid fa-plug'></i><p class="pt-0 pb-0 pr-2 pl-1">Интерфейсы</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/04_quality_metrics/'
        class='card-header-title'
          title='Метрики качества и итоговая сводка'>
        <i class='fa-solid fa-chart-bar'></i><p class="pt-0 pb-0 pr-2 pl-1">Метрики качества и итоговая сводка</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link">
      <a
        href='/01_architecture/'
        class='card-header-title'>
        <i class='fa-solid fa-diagram-project fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/01_architecture/'
        class='card-header-title'
          title='Архитектура'>
        <i class='fa-solid fa-diagram-project fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Архитектура</p></a></div>
          </div></li>
      </div>
    </div><div class="card is-fs-expandable-icon is-sidebar-active"><div class="card-header">
      <a
        href='/03_backend/'
        class='card-header-title'>
        <i class='fa-solid fa-server fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless is-tree-active is-entries-expandable is-entries-expanded"><div
            class="card"><div class="card-header">
      <a
        href='/03_backend/'
        class='card-header-title'
          title='Backend'>
        <i class='fa-solid fa-server fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Backend</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-expanded">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless is-tree-active"><div class="">
      <div class=""><li class="is-marginless is-entries-expandable is-entries-shrinked"><div
            class="card"><div class="card-header">
      <a
        href='/03_backend/01_info_models/'
        class='card-header-title'
          title='Модель данных и базы данных'>
        <i class='fa-solid fa-database'></i><p class="pt-0 pb-0 pr-2 pl-1">Модель данных и базы данных</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless"><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/01_info_models/relational/'
        class='card-header-title'
          title='Реляционные таблицы (PostgreSQL)'>
        <i class='fa-solid fa-table'></i><p class="pt-0 pb-0 pr-2 pl-1">Реляционные таблицы (PostgreSQL)</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/01_info_models/documents/'
        class='card-header-title'
          title='Документные коллекции'>
        <i class='fa-solid fa-file-code'></i><p class="pt-0 pb-0 pr-2 pl-1">Документные коллекции</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/01_info_models/vector_store/'
        class='card-header-title'
          title='Векторное хранилище (Qdrant)'>
        <i class='fa-solid fa-magnifying-glass-chart'></i><p class="pt-0 pb-0 pr-2 pl-1">Векторное хранилище (Qdrant)</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/01_info_models/cache/'
        class='card-header-title'
          title='Кэш и очереди (Redis)'>
        <i class='fa-solid fa-bolt'></i><p class="pt-0 pb-0 pr-2 pl-1">Кэш и очереди (Redis)</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless is-entries-expandable is-entries-expanded"><div
            class="card"><div class="card-header">
      <a
        href='/03_backend/02_rest_methods/'
        class='card-header-title'
          title='REST API'>
        <i class='fa-solid fa-route'></i><p class="pt-0 pb-0 pr-2 pl-1">REST API</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-expanded">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless"><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/02_rest_methods/createproject/'
        class='card-header-title'
          title='POST /projects'>
        <i class='fa-solid fa-folder-plus'></i><p class="pt-0 pb-0 pr-2 pl-1">POST /projects</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/02_rest_methods/createpresentation/'
        class='card-header-title'
          title='POST /presentations'>
        <i class='fa-solid fa-file-powerpoint'></i><p class="pt-0 pb-0 pr-2 pl-1">POST /presentations</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/02_rest_methods/generateoutline/'
        class='card-header-title'
          title='POST /presentations/{id}/generate/outline'>
        <i class='fa-solid fa-list-ol'></i><p class="pt-0 pb-0 pr-2 pl-1">POST /presentations/{id}/generate/outline</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card is-sidebar-active"id='sidebarActiveEntry'><div class="card-header is-single-link">
      <a
        href='/03_backend/02_rest_methods/generateslides/'
        class='card-header-title'
          title='POST /presentations/{id}/generate/slides'>
        <i class='fa-solid fa-wand-magic-sparkles'></i><p class="pt-0 pb-0 pr-2 pl-1">POST /presentations/{id}/generate/slides</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/02_rest_methods/regenerateslide/'
        class='card-header-title'
          title='POST /presentations/{id}/generate/slide/{slide_id}'>
        <i class='fa-solid fa-rotate-right'></i><p class="pt-0 pb-0 pr-2 pl-1">POST /presentations/{id}/generate/slide/{slide_id}</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div></ul></li>
      </div>
    </div><div class="card is-fs-expandable-icon"><div class="card-header">
      <a
        href='/02_frontend/'
        class='card-header-title'>
        <i class='fa-solid fa-display fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless is-entries-expandable is-entries-shrinked"><div
            class="card"><div class="card-header">
      <a
        href='/02_frontend/'
        class='card-header-title'
          title='Frontend'>
        <i class='fa-solid fa-display fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Frontend</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless"><div class="">
      <div class=""><li class="is-marginless is-entries-expandable is-entries-shrinked"><div
            class="card"><div class="card-header">
      <a
        href='/02_frontend/screens/'
        class='card-header-title'
          title='Экраны'>
        <i class='fa-solid fa-window-restore'></i><p class="pt-0 pb-0 pr-2 pl-1">Экраны</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless"><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/02_frontend/screens/landing/'
        class='card-header-title'
          title='Лендинг'>
        <i class='fa-solid fa-house'></i><p class="pt-0 pb-0 pr-2 pl-1">Лендинг</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/02_frontend/screens/wizard_step1/'
        class='card-header-title'
          title='Wizard — Шаг 1: Данные и контент'>
        <i class='fa-solid fa-upload'></i><p class="pt-0 pb-0 pr-2 pl-1">Wizard — Шаг 1: Данные и контент</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/02_frontend/screens/wizard_step2/'
        class='card-header-title'
          title='Wizard — Шаг 2: Аудитория и цель'>
        <i class='fa-solid fa-bullseye'></i><p class="pt-0 pb-0 pr-2 pl-1">Wizard — Шаг 2: Аудитория и цель</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/02_frontend/components/'
        class='card-header-title'
          title='Реестр компонентов'>
        <i class='fa-solid fa-cubes'></i><p class="pt-0 pb-0 pr-2 pl-1">Реестр компонентов</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/02_frontend/user_flows/'
        class='card-header-title'
          title='Пользовательские сценарии'>
        <i class='fa-solid fa-route'></i><p class="pt-0 pb-0 pr-2 pl-1">Пользовательские сценарии</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div></ul>
      </aside>
    </div>
    <div id="sidebarCollapsible" class="is-marginless">
      <div class="card is-uncollapse-action">
        <div
          id="sidebarUncollapse"
          class="card-header is-single-link"
          title="Collapse/Uncollapse sidebar"
        >
          <a class="card-header-title">
            <i class="fa-solid fa-angles-right fa-lg"></i>
          </a>
        </div>
      </div>
      <div class="card is-collapse-action">
        <div
          id="sidebarCollapse"
          class="card-header is-single-link"
          title="Collapse/Uncollapse sidebar"
        >
          <a class="card-header-title">
            <i class="fa-solid fa-angles-left fa-lg"></i>
            <p>Collapse sidebar</p>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
<div id="sidebarMobileWrapper" class="column is-narrow is-hidden-desktop"></div>
<div class="columns is-mobile is-marginless is-scroll-smooth has-toc is-toc-collapsed" id="contentContainer">
  <div class="column" id="content" data-pagefind-body><style>
    ul.breadcrumb {
      padding: 10px 15px;
      list-style: none;
      background-color: #eee;
    }
    ul.breadcrumb li {
      display: inline;
      font-size: 14px;
    }
    ul.breadcrumb li+li:before {
      padding: 8px;
      color: black;
      content: "/\00a0";
    }
    ul.breadcrumb li a {
      color: #0275d8;
      text-decoration: none;
    }
    ul.breadcrumb li a:hover {
      color: #01447e;
      text-decoration: underline;
    }
</style>
<ul id="breadcrumbs" class="breadcrumb">
        <li> <a href="/">Промпт-инжиниринг</a> </li>
        <li> <a href="/03_backend/">Backend</a> </li>
        <li> <a href="/03_backend/02_rest_methods/">REST API</a> </li>
    <li> <a href="/03_backend/02_rest_methods/generateslides/">POST /presentations/{id}/generate/slides</a></li>
</ul>
<div id="contentTitle">POST /presentations/{id}/generate/slides</div><h2 id='содержание'>Содержание<a href='#%d1%81%d0%be%d0%b4%d0%b5%d1%80%d0%b6%d0%b0%d0%bd%d0%b8%d0%b5' class='anchor'>#</a>
</h2><ul>
<li><a
  href="#%d0%be%d0%b1%d0%b7%d0%be%d1%80"
    class="is-pretty-link">Обзор</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></li>
<li><a
  href="#%d0%b0%d0%bb%d0%b3%d0%be%d1%80%d0%b8%d1%82%d0%bc"
    class="is-pretty-link">Алгоритм</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></li>
<li><a
  href="#%d0%bf%d0%b0%d1%80%d0%b0%d0%bc%d0%b5%d1%82%d1%80%d1%8b"
    class="is-pretty-link">Параметры</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></li>
<li><a
  href="#%d1%82%d0%b5%d0%bb%d0%be-%d0%b7%d0%b0%d0%bf%d1%80%d0%be%d1%81%d0%b0"
    class="is-pretty-link">Тело запроса</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></li>
<li><a
  href="#%d0%be%d1%82%d0%b2%d0%b5%d1%82%d1%8b"
    class="is-pretty-link">Ответы</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></li>
<li><a
  href="#%d0%b2%d0%b0%d0%bb%d0%b8%d0%b4%d0%b0%d1%86%d0%b8%d0%b8"
    class="is-pretty-link">Валидации</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></li>
<li><a
  href="#%d0%b4%d0%b8%d0%b0%d0%b3%d1%80%d0%b0%d0%bc%d0%bc%d0%b0-%d0%bf%d0%be%d1%81%d0%bb%d0%b5%d0%b4%d0%be%d0%b2%d0%b0%d1%82%d0%b5%d0%bb%d1%8c%d0%bd%d0%be%d1%81%d1%82%d0%b8"
    class="is-pretty-link">Диаграмма последовательности</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></li>
<li><a
  href="#%d0%b1%d0%b5%d0%b7%d0%be%d0%bf%d0%b0%d1%81%d0%bd%d0%be%d1%81%d1%82%d1%8c"
    class="is-pretty-link">Безопасность</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></li>
</ul>
<hr>
<h2 id='обзор'>Обзор<a href='#%d0%be%d0%b1%d0%b7%d0%be%d1%80' class='anchor'>#</a>
</h2><table>
<thead>
<tr>
<th>Свойство</th>
<th>Значение</th>
</tr>
</thead>
<tbody>
<tr>
<td>Метод</td>
<td><code>POST</code></td>
</tr>
<tr>
<td>URL</td>
<td><code>/presentations/{presentation_id}/generate/slides</code></td>
</tr>
<tr>
<td>Тип</td>
<td><strong>Асинхронный</strong> — возвращает <code>task_id</code>, прогресс через WebSocket</td>
</tr>
<tr>
<td>LLM</td>
<td>Claude Sonnet (primary) / GPT-4o (fallback); Claude Haiku — постпроцессинг</td>
</tr>
<tr>
<td>RAG</td>
<td>Qdrant — по source_file_ids из утверждённой структуры</td>
</tr>
<tr>
<td>Успешный код</td>
<td><code>202 Accepted</code></td>
</tr>
<tr>
<td>SLA</td>
<td>p95 ≤ 60 секунд для 15 слайдов (NFR-002)</td>
</tr>
<tr>
<td>Теги</td>
<td>Generation</td>
</tr>
<tr>
<td>Требования</td>
<td>FR-012 (генерация слайдов), FR-013 (постпроцессинг), FR-014 (checkpoint-восстановление)</td>
</tr>
</tbody>
</table>
<p>Запускает генерацию всех слайдов по ранее утверждённому <code>Outline</code>. Операция ставится в очередь Celery; клиент отслеживает прогресс через WebSocket (события <code>slide_completed</code>, <code>generation_done</code>, <code>generation_error</code>). Поддерживается checkpoint-восстановление через LangGraph: при сбое воркера новый воркер продолжает с последнего завершённого слайда.</p>
<blockquote>
<p><strong>Предусловие:</strong> презентация должна находиться в статусе <code>outline_ready</code>. Если статус <code>draft</code> — сначала вызовите <code>POST /presentations/{id}/generate/outline</code>.</p>
</blockquote>
<hr>
<h2 id='алгоритм'>Алгоритм<a href='#%d0%b0%d0%bb%d0%b3%d0%be%d1%80%d0%b8%d1%82%d0%bc' class='anchor'>#</a>
</h2><ol>
<li><strong>Аутентификация и авторизация.</strong> Проверка JWT / API-ключа; роли <code>editor</code> и <code>admin</code> разрешены.</li>
<li><strong>Проверка статуса.</strong> <code>presentation.status</code> должен быть <code>outline_ready</code>; иначе — <code>422 INVALID_STATUS</code>.</li>
<li><strong>Проверка лимитов тарифного плана.</strong> Если исчерпан лимит — <code>402 Payment Required</code>.</li>
<li><strong>Rate limit.</strong> Проверка Redis <code>ratelimit:{key_id}:{min}</code>; при превышении — <code>429</code>.</li>
<li><strong>Создание задачи Celery.</strong> Задача помещается в очередь <code>celery_queue:generation</code>; генерируется <code>task_id</code> (UUID). Статус презентации → <code>generating</code>.</li>
<li><strong>Возврат <code>202 Accepted</code>.</strong> Клиент получает <code>task_id</code> и <code>estimated_seconds</code>.</li>
</ol>
<p><strong>Параллельно (воркер Celery / LangGraph):</strong></p>
<ol start="7">
<li><strong>Инициализация checkpoint.</strong> Запись начального состояния LangGraph в Redis HASH <code>gen_checkpoint:{task_id}</code> (TTL 1 ч).</li>
<li><strong>Цикл по слайдам.</strong> Для каждого слайда из <code>Outline</code>:
a. RAG-поиск в Qdrant по <code>suggested_data_source</code> и <code>key_thesis</code> (top-10 чанков).
b. LLM-генерация контента слайда (Claude Sonnet): заголовок, bullets / chart / table, speaker_notes (если запрошены), атрибуция источников (<code>AttributionItem</code>).
c. Постпроцессинг (Claude Haiku): фильтрация AI-клише, проверка <code>forbidden_words</code> из Brand Kit, запись <code>hallucination_flags</code>.
d. Обновление прогресса: Redis Stream <code>gen_progress:{task_id}</code>, публикация в <code>pubsub:gen_progress</code>.
e. Обновление checkpoint в Redis.
f. Push события <code>slide_completed</code> через WebSocket.</li>
<li><strong>Завершение.</strong> Статус презентации → <code>ready</code>; создание версии в <code>presentation_versions</code>. Push события <code>generation_done</code> через WebSocket.</li>
<li><strong>Обработка сбоя.</strong> При падении воркера новый воркер читает checkpoint из Redis и возобновляет с последнего записанного слайда. При исчерпании retry — статус <code>error</code>, push события <code>generation_error</code>.</li>
</ol>
<hr>
<h2 id='параметры'>Параметры<a href='#%d0%bf%d0%b0%d1%80%d0%b0%d0%bc%d0%b5%d1%82%d1%80%d1%8b' class='anchor'>#</a>
</h2><table>
<thead>
<tr>
<th>Параметр</th>
<th>Тип</th>
<th>Расположение</th>
<th style="text-align:center">Обязательный</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>presentation_id</code></td>
<td>uuid</td>
<td>path</td>
<td style="text-align:center">Да</td>
<td>UUID презентации со статусом <code>outline_ready</code></td>
</tr>
</tbody>
</table>
<hr>
<h2 id='тело-запроса'>Тело запроса<a href='#%d1%82%d0%b5%d0%bb%d0%be-%d0%b7%d0%b0%d0%bf%d1%80%d0%be%d1%81%d0%b0' class='anchor'>#</a>
</h2><p><strong>Content-Type:</strong> <code>application/json</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">ToneType</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;formal&#34;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&#34;business&#34;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&#34;persuasive&#34;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&#34;technical&#34;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&#34;educational&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">GenerateSlidesRequest</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * Тон генерируемого контента.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * Если не передан — используется `presentations.tone`.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">tone?</span>: <span style="color:#66d9ef">ToneType</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * Включить генерацию заметок докладчика для каждого слайда.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * @default false
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">include_speaker_notes?</span>: <span style="color:#66d9ef">boolean</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/**
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * UUID Brand Kit для применения стиля, шрифтов и forbidden_words.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   * Если не передан — используется Brand Kit, указанный при создании презентации.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">   */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">brand_kit_id?</span>: <span style="color:#66d9ef">string</span>; <span style="color:#75715e">// uuid
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><p><strong>Пример запроса:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;tone&#34;</span>: <span style="color:#e6db74">&#34;formal&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;include_speaker_notes&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;brand_kit_id&#34;</span>: <span style="color:#e6db74">&#34;aabbccdd-1234-5678-9012-aabbccddeeff&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Тело может быть пустым объектом <code>{}</code> — в этом случае используются настройки из созданной презентации.</p>
<hr>
<h2 id='ответы'>Ответы<a href='#%d0%be%d1%82%d0%b2%d0%b5%d1%82%d1%8b' class='anchor'>#</a>
</h2><h3 id='202-accepted'>202 Accepted<a href='#202-accepted' class='anchor'>#</a>
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">TaskStatusEnum</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;pending&#34;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&#34;running&#34;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&#34;completed&#34;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&#34;failed&#34;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&#34;cancelled&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">TaskResponse</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">task_id</span>: <span style="color:#66d9ef">string</span>;              <span style="color:#75715e">// uuid — использовать для GET /tasks/{task_id}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">status</span>: <span style="color:#66d9ef">TaskStatusEnum</span>;       <span style="color:#75715e">// при 202 всегда &#34;pending&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">estimated_seconds?</span>: <span style="color:#66d9ef">number</span>;   <span style="color:#75715e">// оценочное время выполнения
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;task_id&#34;</span>: <span style="color:#e6db74">&#34;d4e5f6a7-b8c9-0123-def0-123456789abc&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;status&#34;</span>: <span style="color:#e6db74">&#34;pending&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;estimated_seconds&#34;</span>: <span style="color:#ae81ff">45</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>После получения <code>task_id</code> клиент подписывается на WebSocket-события:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#75715e">// Событие: один слайд сгенерирован
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">SlideCompletedEvent</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">event_type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;slide_completed&#34;</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">presentation_id</span>: <span style="color:#66d9ef">string</span>;  <span style="color:#75715e">// uuid
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">slide_id</span>: <span style="color:#66d9ef">string</span>;          <span style="color:#75715e">// uuid
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">position</span>: <span style="color:#66d9ef">number</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">progress_percent</span>: <span style="color:#66d9ef">number</span>;  <span style="color:#75715e">// 0–100
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Событие: генерация завершена
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">GenerationDoneEvent</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">event_type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;generation_done&#34;</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">presentation_id</span>: <span style="color:#66d9ef">string</span>;  <span style="color:#75715e">// uuid
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">task_id</span>: <span style="color:#66d9ef">string</span>;           <span style="color:#75715e">// uuid
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">slide_count</span>: <span style="color:#66d9ef">number</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Событие: генерация завершилась с ошибкой
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">GenerationErrorEvent</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">event_type</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;generation_error&#34;</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">presentation_id</span>: <span style="color:#66d9ef">string</span>;  <span style="color:#75715e">// uuid
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">task_id</span>: <span style="color:#66d9ef">string</span>;           <span style="color:#75715e">// uuid
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">error_code</span>: <span style="color:#66d9ef">string</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">message</span>: <span style="color:#66d9ef">string</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">last_completed_slide</span>: <span style="color:#66d9ef">number</span>;  <span style="color:#75715e">// слайд, с которого возможно возобновление
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><h3 id='опрос-статуса-polling-альтернатива-websocket'>Опрос статуса (polling-альтернатива WebSocket)<a href='#%d0%be%d0%bf%d1%80%d0%be%d1%81-%d1%81%d1%82%d0%b0%d1%82%d1%83%d1%81%d0%b0-polling-%d0%b0%d0%bb%d1%8c%d1%82%d0%b5%d1%80%d0%bd%d0%b0%d1%82%d0%b8%d0%b2%d0%b0-websocket' class='anchor'>#</a>
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-http" data-lang="http"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">GET /tasks/{task_id}
</span></span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">TaskStatus</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">task_id</span>: <span style="color:#66d9ef">string</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">status</span>: <span style="color:#66d9ef">TaskStatusEnum</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">progress?</span>: <span style="color:#66d9ef">number</span>;         <span style="color:#75715e">// 0–100
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">result?</span>: <span style="color:#66d9ef">object</span>;           <span style="color:#75715e">// заполняется после completed
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">error?</span>: <span style="color:#66d9ef">string</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">created_at</span>: <span style="color:#66d9ef">string</span>;        <span style="color:#75715e">// ISO 8601
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">completed_at?</span>: <span style="color:#66d9ef">string</span>;     <span style="color:#75715e">// ISO 8601
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><h3 id='402-payment-required'>402 Payment Required<a href='#402-payment-required' class='anchor'>#</a>
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;error&#34;</span>: <span style="color:#e6db74">&#34;PLAN_LIMIT_EXCEEDED&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Monthly presentation limit reached. Upgrade your plan to continue.&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;details&#34;</span>: { <span style="color:#f92672">&#34;limit&#34;</span>: <span style="color:#ae81ff">5</span>, <span style="color:#f92672">&#34;used&#34;</span>: <span style="color:#ae81ff">5</span>, <span style="color:#f92672">&#34;plan&#34;</span>: <span style="color:#e6db74">&#34;free&#34;</span> },
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;request_id&#34;</span>: <span style="color:#e6db74">&#34;req_01HXABCDE&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id='422-unprocessable-entity'>422 Unprocessable Entity<a href='#422-unprocessable-entity' class='anchor'>#</a>
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;error&#34;</span>: <span style="color:#e6db74">&#34;INVALID_STATUS&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Presentation must be in &#39;outline_ready&#39; status to generate slides. Current status: &#39;draft&#39;.&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;request_id&#34;</span>: <span style="color:#e6db74">&#34;req_01HXABCDE&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id='429-too-many-requests'>429 Too Many Requests<a href='#429-too-many-requests' class='anchor'>#</a>
</h3><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-json" data-lang="json"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;error&#34;</span>: <span style="color:#e6db74">&#34;RATE_LIMIT_EXCEEDED&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;message&#34;</span>: <span style="color:#e6db74">&#34;Too many generation requests. Retry after 60 seconds.&#34;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&#34;request_id&#34;</span>: <span style="color:#e6db74">&#34;req_01HXABCDE&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<h2 id='валидации'>Валидации<a href='#%d0%b2%d0%b0%d0%bb%d0%b8%d0%b4%d0%b0%d1%86%d0%b8%d0%b8' class='anchor'>#</a>
</h2><table>
<thead>
<tr>
<th>Условие</th>
<th>Правило</th>
<th>HTTP-код</th>
<th>Код ошибки</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>presentation_id</code></td>
<td>Должен существовать и принадлежать организации</td>
<td>404</td>
<td><code>PRESENTATION_NOT_FOUND</code></td>
</tr>
<tr>
<td>Статус презентации</td>
<td>Должен быть <code>outline_ready</code></td>
<td>422</td>
<td><code>INVALID_STATUS</code></td>
</tr>
<tr>
<td><code>tone</code></td>
<td>Если передан: одно из значений <code>ToneType</code></td>
<td>422</td>
<td><code>VALIDATION_ERROR</code></td>
</tr>
<tr>
<td><code>brand_kit_id</code></td>
<td>Если передан: UUID, Brand Kit принадлежит организации</td>
<td>404</td>
<td><code>BRAND_KIT_NOT_FOUND</code></td>
</tr>
<tr>
<td>Лимит тарифа</td>
<td>Число презентаций &lt; <code>plans.max_presentations_per_month</code></td>
<td>402</td>
<td><code>PLAN_LIMIT_EXCEEDED</code></td>
</tr>
<tr>
<td>Rate limit</td>
<td>Не более N запросов в минуту на API-ключ</td>
<td>429</td>
<td><code>RATE_LIMIT_EXCEEDED</code></td>
</tr>
<tr>
<td>Роль</td>
<td><code>admin</code> или <code>editor</code></td>
<td>403</td>
<td><code>INSUFFICIENT_ROLE</code></td>
</tr>
</tbody>
</table>
<hr>
<h2 id='безопасность'>Безопасность<a href='#%d0%b1%d0%b5%d0%b7%d0%be%d0%bf%d0%b0%d1%81%d0%bd%d0%be%d1%81%d1%82%d1%8c' class='anchor'>#</a>
</h2><ul>
<li><strong>Аутентификация:</strong> Bearer JWT (TTL 15 мин) или <code>X-API-Key</code>; WebSocket использует тот же JWT в заголовке <code>Authorization</code> при рукопожатии.</li>
<li><strong>Авторизация:</strong> RBAC — только <code>editor</code> и <code>admin</code>; <code>viewer</code> получает <code>403</code>.</li>
<li><strong>Мультиарендность:</strong> Qdrant-поиск ограничен коллекцией <code>org_{id}_docs</code>; Brand Kit применяется только из организации пользователя.</li>
<li><strong>Checkpoint-безопасность:</strong> состояние LangGraph в Redis <code>gen_checkpoint:{task_id}</code> имеет TTL 1 ч; при завершении ключ удаляется.</li>
<li><strong>Стоимость:</strong> постпроцессинг (Claude Haiku) сокращает стоимость относительно Sonnet; семантический кэш на уровне слайдов снижает повторные LLM-вызовы. Цель: ≤ $0.15 за презентацию (NFR-022).</li>
<li><strong>Транспорт:</strong> TLS 1.3; WebSocket — WSS (NFR-006).</li>
</ul>
<script lang="js">
  const innerPages = document.getElementById("inner-pages");
  if (innerPages) {
    innerPages.querySelectorAll("li").forEach(listElement => {
      listElement.addEventListener("click", () => {
        const name = listElement.innerText.trim();
        if (openedMenu) {
          if (openedMenu.includes(name)) {
            const index = openedMenu.findIndex(item => item === name);
            openedMenu.splice(index, 1);
          } else {
            openedMenu.push(name);
          }
          localStorage.setItem("openedMenu", JSON.stringify(openedMenu));
        } else {
          localStorage.setItem("openedMenu", "[" + name + "]")
        }
      });
    });
  }
</script><nav class="pagination"><a class="nav nav-prev" href="http://localhost:1313/03_backend/02_rest_methods/generateoutline/" title="POST /presentations/{id}/generate/outline"><i class="fa fa-arrow-left" aria-hidden="true"></i> Предыдущее - POST /presentations/{id}/generate/outline</a>
  <a class="nav nav-next" href="http://localhost:1313/03_backend/02_rest_methods/regenerateslide/" title="POST /presentations/{id}/generate/slide/{slide_id}">Следующее - POST /presentations/{id}/generate/slide/{slide_id} <i class="fa fa-arrow-right" aria-hidden="true"></i></a>
</nav></div><div class="column is-sticky is-paddingless" id="tocWrapper">
  <div class="is-paddingless" id="tocContainer">
    <div id="tocContent">
      <div class="additionalinfo">
    <span id="method_name">POST /presentations/{id}/generate/slides</span>







    <strong>Описание:</strong> Асинхронная генерация всех слайдов по утверждённой структуре. Результат доставляется через WebSocket. Цель: p95 ≤ 60 с.
</div>
      <div class="toc-header">
        <h6 class="toc-title is-marginless">Содержание:On this page:</h6>
        <i
          title="Back to top"
          id="tocBackToTop"
          class="fa-solid fa-circle-arrow-up"
        ></i>      
      </div>
      <div id="toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#содержание">Содержание</a></li>
    <li><a href="#обзор">Обзор</a></li>
    <li><a href="#алгоритм">Алгоритм</a></li>
    <li><a href="#параметры">Параметры</a></li>
    <li><a href="#тело-запроса">Тело запроса</a></li>
    <li><a href="#ответы">Ответы</a>
      <ul>
        <li><a href="#202-accepted">202 Accepted</a></li>
        <li><a href="#опрос-статуса-polling-альтернатива-websocket">Опрос статуса (polling-альтернатива WebSocket)</a></li>
        <li><a href="#402-payment-required">402 Payment Required</a></li>
        <li><a href="#422-unprocessable-entity">422 Unprocessable Entity</a></li>
        <li><a href="#429-too-many-requests">429 Too Many Requests</a></li>
      </ul>
    </li>
    <li><a href="#валидации">Валидации</a></li>
    <li><a href="#безопасность">Безопасность</a></li>
  </ul>
</nav></div>
<ul class="info" style="line-height: 1.2; list-style-type: none; border: 1px solid; border-radius: 1px; padding: 5px; margin: 16px 10px 0; color: black;">
    
    
    
    
    
    
    
    
    </ul>
    
<div id="taxonomies"><div class="taxonomy-wrapper"></div><div class="taxonomy-wrapper"></div></div>
      <div class="toc-header"><div class="edit-meta"></div>
</div>
    </div>
  </div>
  <div
    class="is-paddingless"
    id="tocCollapsible"
    title="Collapse/Uncollapse table of contents"
  >
    <i class="fa-solid fa-angles-right fa-lg"></i>
  </div>
</div>
</div>
</div><script type='text/javascript'>
  const baseUrl = 'http:\/\/localhost:1313\/';
  const codeCopyBefore = 'Copy to clipboard';
  const codeCopyAfter = 'Copied to clipboard';
  const svgDownloadLabel = 'Download as SVG';
  const helperLoadingLabel = 'Loading';
  const searchNoResults = 'No result found';
  const introNextLabel = 'Next';
  const introPrevLabel = 'Previous';
  const introSkipLabel = '✗';
  const introDoneLabel = 'Done';
  const printLabel = 'Print current page';
  const qrCodeLabel = 'Show current page QR code';
  const naCommonLabel = 'Not available';
</script>
<script
      type="module"
      src="/js/theme/modules/const.min.js"
    ></script><script
      type="module"
      src="/js/theme/modules/helpers.min.js"
    ></script><script
      type="module"
      src="/js/theme/modules/helpersGlobal.min.js"
    ></script><script
      type="module"
      src="/js/theme/init.min.js"
    ></script><script
      type="module"
      src="/js/theme/navbar.min.js"
    ></script><script
      type="module"
      src="/js/theme/print.min.js"
    ></script><script
      type="module"
      src="/js/theme/qrcode.min.js"
    ></script><script
      type="module"
      src="/js/theme/search.min.js"
    ></script><script
      type="module"
      src="/js/theme/shortcuts.min.js"
    ></script><script
      type="module"
      src="/js/theme/sidebar.min.js"
    ></script><script
      type="module"
      src="/js/theme/toc.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/jquery/jquery-3.6.3.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/tippy/popper.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/tippy/tippy-bundle.umd.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/markmap/markmap-autoloader.min.js"
    ></script><script
      type="text/javascript"
      src="/js/theme/browserCompatibility.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/flexsearch/flexsearch.bundle.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/qrious/qrious.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/overlay-scrollbars/overlayscrollbars.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/markmap/markmap.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/readfile/rawdeflate.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/1ce05b4b.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/techradar/d3.v4.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/techradar/radar.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/bpmn-visualization/bpmn-visualization.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/sorttable/sorttable.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/mermaid/svg-pan-zoom.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/simplesearch/simplesearch.min.js"
    ></script>
<script>$("table").addClass("sortable");</script>
  </body>
</html>
