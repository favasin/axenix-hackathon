<!DOCTYPE html>
<html>
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="generator" content="Hugo 0.126.1">
<meta name="viewport" content="width=device-width, initial-scale=1" /><meta name="description" content="Описание сущностей, связей и принципов хранения данных." />

<title>Модель данных и базы данных</title>
<link
  rel="icon"
  href="/images/favicon.png?v=1772346347"
  type="image/x-icon"/>
<link
    rel="stylesheet"
    rel="preload"
    type="text/css"
    href="/css/main.css"
  /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/all.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/sharp-thin.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/sharp-solid.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/sharp-regular.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/sharp-light.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/sorttable/sorttable.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/tippy/light-border.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/techradar/radar.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/form-js/form-js.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/overlay-scrollbars/overlayscrollbars.min.css"
    /><link
      rel="stylesheet"
      type="text/css"
      href="/css/external/simplesearch/simplesearch.min.css"
    />
</head>
  <body onload="browserCompatibility()"><div id="navbarInfo" class="is-hidden modal-container">
  <div class="modal-content-box modal-text-box">
    <div class="card modal-title is-radiusless">
      <div class="card-header">
        <p class="card-header-title is-marginless">About</p>
      </div>
    </div>
    <div class="modal-content-container">
      <div class="modal-content-block is-block">
</div>
    </div>
  </div>
</div>
<div id="navbarShortcuts" class="is-hidden modal-container">
  <div class="modal-content-box modal-text-box"><div class="card modal-title is-radiusless">
        <div class="card-header">
          <p class="card-header-title is-marginless">Keyboard shortcuts</p>
        </div>
      </div>
      <div class="modal-content-container">
        <div class="modal-content-block"><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>q</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Show current page QR code</p>
  </div><div class="modal-content"><kbd>Escape</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Close modals</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>i</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Show website information</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>k</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Show shortcuts</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>h</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Go to homepage</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>f</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Find on website</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>m</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Collapse/Uncollapse sidebar</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>t</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Collapse/Uncollapse table of contents</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>↑</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Go to the top of the page</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>↓</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Go to the bottom of the page</p>
  </div><div class="modal-content"><kbd>Shift</kbd><p>+</p><kbd>p</kbd></div>
  <div class="modal-content">
    <p class="has-text-weight-normal">Print current page</p>
  </div></div>
      </div></div>
</div>
<div id="modalContainer" class="is-hidden modal-container">
  <div id="modal" class="modal-content-box"></div>
</div>
<nav id="navbar" class="navbar" role="navigation" aria-label="main navigation">
  <div id="navbarItemsContainer" class="navbar-brand"><div id="globalLogoContainer" class="is-flex"><a
    id="globalLogo"
    class="navbar-item navbar-item-standard is-paddingless"
    href="/"
  >
    <img
      id="globalLogoImg"
      alt="Homepage"
      src="/images/logo.png?v=1772346347"/>
    <div class="logo-header-container">
      <span>Сервис генерации презентаций</span>
    </div>
  </a>
  <a
    id="globalTouchLogo"
    class="navbar-item navbar-item-standard is-paddingless"
    href="/"
  >
    <img
      alt="Homepage"
      src="/images/logoTouch.png?v=1772346347"/>
  </a>
</div>
<div id="navbarItems" class="is-flex">
      <div id="navbarItemsStart" class="is-flex">
        
      </div>
      <div id="navbarItemsEnd" class="is-flex"><div class="navbar-item">
  <a
    id="listDocuments"
    class="button navbar-item-standard"
    href="/listdocuments/"
  >
    <span class="icon">
      <i class="fa-solid fa-list"></i>
    </span>
    <span class="icon-text">&nbsp;Список документов</span>
  </a>
</div><div class="navbar-item">
  <a
    id="searchButton"
    class="button navbar-item-standard"
    href="/search/"
  >
    <span class="icon">
      <i class="fa-solid fa-magnifying-glass"></i>
    </span>
    <span class="icon-text">&nbsp;Поиск</span>
  </a>
</div>
<div class="navbar-item">
  <a
    id="printButton"
    class="button navbar-item-standard"
  >
    <span class="icon-text">Print</span>
    <span class="icon">
      <i class="fa-solid fa-print fa-lg"></i>
    </span>
  </a>
</div></div>
    </div>
  </div>
</nav>
<div id="navbarOverlay"></div><div
      class="columns is-mobile is-paddingless is-marginless"
      id="mainContainer"
    ><div
  id="sidebarContainer"
  class="column is-narrow is-paddingless is-marginless"
>
  <div id="sidebarWrapper" class="is-fixed">
    <div id="sidebar" class="is-marginless">
      <aside class="menu is-paddingless is-marginless">
        <ul class="menu-list is-marginless is-paddingless"><div class="card is-fs-expandable-icon"><div class="card-header">
      <a
        href='/00_overview/'
        class='card-header-title'>
        <i class='fa-solid fa-circle-info fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless is-entries-expandable is-entries-shrinked"><div
            class="card"><div class="card-header">
      <a
        href='/00_overview/'
        class='card-header-title'
          title='Описание и артефакты анализа'>
        <i class='fa-solid fa-circle-info fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Описание и артефакты анализа</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless"><div class="">
      <div class=""><li class="is-marginless is-entries-expandable is-entries-shrinked"><div
            class="card"><div class="card-header">
      <a
        href='/00_overview/01_br/'
        class='card-header-title'
          title='Требования'>
        <i class='fa-solid fa-folder-open'></i><p class="pt-0 pb-0 pr-2 pl-1">Требования</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless"><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/01_br/'
        class='card-header-title'
          title='Бизнес-контекст и БТ'>
        <i class='fa-solid fa-circle-info'></i><p class="pt-0 pb-0 pr-2 pl-1">Бизнес-контекст и БТ</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/02_actors/'
        class='card-header-title'
          title='Акторы и границы системы'>
        <i class='fa-solid fa-users'></i><p class="pt-0 pb-0 pr-2 pl-1">Акторы и границы системы</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/03_fr_documents/'
        class='card-header-title'
          title='FR_01: Загрузка и индексация документов'>
        <i class='fa-solid fa-list-check'></i><p class="pt-0 pb-0 pr-2 pl-1">FR_01: Загрузка и индексация документов</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/04_fr_rag/'
        class='card-header-title'
          title='FR: RAG-поиск и генерация презентаций'>
        <i class='fa-solid fa-list-check'></i><p class="pt-0 pb-0 pr-2 pl-1">FR: RAG-поиск и генерация презентаций</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/05_fr_users/'
        class='card-header-title'
          title='FR: Управление пользователями'>
        <i class='fa-solid fa-list-check'></i><p class="pt-0 pb-0 pr-2 pl-1">FR: Управление пользователями</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/06_fr_admin/'
        class='card-header-title'
          title='FR: Администрирование'>
        <i class='fa-solid fa-list-check'></i><p class="pt-0 pb-0 pr-2 pl-1">FR: Администрирование</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/01_br/07_nonfunctional/'
        class='card-header-title'
          title='Нефункциональные требования'>
        <i class='fa-solid fa-gauge-high'></i><p class="pt-0 pb-0 pr-2 pl-1">Нефункциональные требования</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/02_constraints/'
        class='card-header-title'
          title='Ограничения и допущения'>
        <i class='fa-solid fa-lock'></i><p class="pt-0 pb-0 pr-2 pl-1">Ограничения и допущения</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/03_interfaces/'
        class='card-header-title'
          title='Интерфейсы'>
        <i class='fa-solid fa-plug'></i><p class="pt-0 pb-0 pr-2 pl-1">Интерфейсы</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/00_overview/04_quality_metrics/'
        class='card-header-title'
          title='Метрики качества и итоговая сводка'>
        <i class='fa-solid fa-chart-bar'></i><p class="pt-0 pb-0 pr-2 pl-1">Метрики качества и итоговая сводка</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link">
      <a
        href='/01_architecture/'
        class='card-header-title'>
        <i class='fa-solid fa-diagram-project fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/01_architecture/'
        class='card-header-title'
          title='Архитектура'>
        <i class='fa-solid fa-diagram-project fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Архитектура</p></a></div>
          </div></li>
      </div>
    </div><div class="card is-fs-expandable-icon is-sidebar-active"><div class="card-header">
      <a
        href='/03_backend/'
        class='card-header-title'>
        <i class='fa-solid fa-server fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless is-tree-active is-entries-expandable is-entries-expanded"><div
            class="card"><div class="card-header">
      <a
        href='/03_backend/'
        class='card-header-title'
          title='Backend'>
        <i class='fa-solid fa-server fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Backend</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-expanded">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless is-tree-active"><div class="">
      <div class=""><li class="is-marginless is-entries-expandable is-entries-expanded"><div
            class="card is-sidebar-active"id='sidebarActiveEntry'><div class="card-header">
      <a
        href='/03_backend/01_info_models/'
        class='card-header-title'
          title='Модель данных и базы данных'>
        <i class='fa-solid fa-database'></i><p class="pt-0 pb-0 pr-2 pl-1">Модель данных и базы данных</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless"><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/01_info_models/relational/'
        class='card-header-title'
          title='Реляционные таблицы (PostgreSQL)'>
        <i class='fa-solid fa-table'></i><p class="pt-0 pb-0 pr-2 pl-1">Реляционные таблицы (PostgreSQL)</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/01_info_models/documents/'
        class='card-header-title'
          title='Документные коллекции'>
        <i class='fa-solid fa-file-code'></i><p class="pt-0 pb-0 pr-2 pl-1">Документные коллекции</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/01_info_models/vector_store/'
        class='card-header-title'
          title='Векторное хранилище (Qdrant)'>
        <i class='fa-solid fa-magnifying-glass-chart'></i><p class="pt-0 pb-0 pr-2 pl-1">Векторное хранилище (Qdrant)</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/01_info_models/cache/'
        class='card-header-title'
          title='Кэш и очереди (Redis)'>
        <i class='fa-solid fa-bolt'></i><p class="pt-0 pb-0 pr-2 pl-1">Кэш и очереди (Redis)</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless is-entries-expandable is-entries-shrinked"><div
            class="card"><div class="card-header">
      <a
        href='/03_backend/02_rest_methods/'
        class='card-header-title'
          title='REST API'>
        <i class='fa-solid fa-route'></i><p class="pt-0 pb-0 pr-2 pl-1">REST API</p></a><a class="card-header-icon is-icon-expandable is-paddingless is-icon-shrinked">
                <span class='icon'></span>
              </a>
            </div>
          </div><ul class="is-marginless"><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/02_rest_methods/createproject/'
        class='card-header-title'
          title='POST /projects'>
        <i class='fa-solid fa-folder-plus'></i><p class="pt-0 pb-0 pr-2 pl-1">POST /projects</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/02_rest_methods/createpresentation/'
        class='card-header-title'
          title='POST /presentations'>
        <i class='fa-solid fa-file-powerpoint'></i><p class="pt-0 pb-0 pr-2 pl-1">POST /presentations</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/02_rest_methods/generateoutline/'
        class='card-header-title'
          title='POST /presentations/{id}/generate/outline'>
        <i class='fa-solid fa-list-ol'></i><p class="pt-0 pb-0 pr-2 pl-1">POST /presentations/{id}/generate/outline</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/02_rest_methods/generateslides/'
        class='card-header-title'
          title='POST /presentations/{id}/generate/slides'>
        <i class='fa-solid fa-wand-magic-sparkles'></i><p class="pt-0 pb-0 pr-2 pl-1">POST /presentations/{id}/generate/slides</p></a></div>
          </div></li>
      </div>
    </div><div class="">
      <div class=""><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/03_backend/02_rest_methods/regenerateslide/'
        class='card-header-title'
          title='POST /presentations/{id}/generate/slide/{slide_id}'>
        <i class='fa-solid fa-rotate-right'></i><p class="pt-0 pb-0 pr-2 pl-1">POST /presentations/{id}/generate/slide/{slide_id}</p></a></div>
          </div></li>
      </div>
    </div></ul></li>
      </div>
    </div></ul></li>
      </div>
    </div><div class="card is-fs-expandable-icon"><div class="card-header is-single-link">
      <a
        href='/02_frontend/'
        class='card-header-title'>
        <i class='fa-solid fa-display fa-lg'></i></a></div>
      </div><div class="is-expandable">
      <div class="is-sidebar-list-wrapper"><li class="is-marginless"><div
            class="card"><div class="card-header is-single-link">
      <a
        href='/02_frontend/'
        class='card-header-title'
          title='Frontend'>
        <i class='fa-solid fa-display fa-lg'></i><p class="pt-0 pb-0 pr-2 pl-1">Frontend</p></a></div>
          </div></li>
      </div>
    </div></ul>
      </aside>
    </div>
    <div id="sidebarCollapsible" class="is-marginless">
      <div class="card is-uncollapse-action">
        <div
          id="sidebarUncollapse"
          class="card-header is-single-link"
          title="Collapse/Uncollapse sidebar"
        >
          <a class="card-header-title">
            <i class="fa-solid fa-angles-right fa-lg"></i>
          </a>
        </div>
      </div>
      <div class="card is-collapse-action">
        <div
          id="sidebarCollapse"
          class="card-header is-single-link"
          title="Collapse/Uncollapse sidebar"
        >
          <a class="card-header-title">
            <i class="fa-solid fa-angles-left fa-lg"></i>
            <p>Collapse sidebar</p>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
<div id="sidebarMobileWrapper" class="column is-narrow is-hidden-desktop"></div>
<div class="columns is-mobile is-marginless is-scroll-smooth has-toc is-toc-collapsed" id="contentContainer">
  <div class="column" id="content" data-pagefind-body><style>
    ul.breadcrumb {
      padding: 10px 15px;
      list-style: none;
      background-color: #eee;
    }
    ul.breadcrumb li {
      display: inline;
      font-size: 14px;
    }
    ul.breadcrumb li+li:before {
      padding: 8px;
      color: black;
      content: "/\00a0";
    }
    ul.breadcrumb li a {
      color: #0275d8;
      text-decoration: none;
    }
    ul.breadcrumb li a:hover {
      color: #01447e;
      text-decoration: underline;
    }
</style>
<ul id="breadcrumbs" class="breadcrumb">
        <li> <a href="/">Промпт-инжиниринг</a> </li>
        <li> <a href="/03_backend/">Backend</a> </li>
    <li> <a href="/03_backend/01_info_models/">Модель данных и базы данных</a></li>
</ul>
<div id="contentTitle">Модель данных и базы данных</div><p>Раздел фиксирует информационную модель, структуру хранилища и правила целостности данных. Здесь описываются ключевые сущности, связи, ограничения и атрибуты, необходимые для согласованной реализации.</p>
<p>Материалы используются для проектирования схемы, миграций и контроля совместимости изменений на уровне данных.</p>
<hr>
<h2 id='хранилища-данных'>Хранилища данных<a href='#%d1%85%d1%80%d0%b0%d0%bd%d0%b8%d0%bb%d0%b8%d1%89%d0%b0-%d0%b4%d0%b0%d0%bd%d0%bd%d1%8b%d1%85' class='anchor'>#</a>
</h2><table>
<thead>
<tr>
<th>Хранилище</th>
<th>Назначение</th>
</tr>
</thead>
<tbody>
<tr>
<td><a
  href="/03_backend/01_info_models/relational/"
    class="is-pretty-link">PostgreSQL (реляционные таблицы)</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></td>
<td>Пользователи, организации, презентации, billing, audit</td>
</tr>
<tr>
<td><a
  href="/03_backend/01_info_models/documents/"
    class="is-pretty-link">Document Store (MongoDB)</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></td>
<td>Трейсы генерации, аналитика просмотров</td>
</tr>
<tr>
<td><a
  href="/03_backend/01_info_models/vector_store/"
    class="is-pretty-link">Qdrant (векторное хранилище)</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></td>
<td>Embeddings чанков исходных документов (RAG)</td>
</tr>
<tr>
<td><a
  href="/03_backend/01_info_models/cache/"
    class="is-pretty-link">Redis (кэш и очереди)</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></td>
<td>Сессии, семантический кэш LLM, checkpoint генерации</td>
</tr>
</tbody>
</table>
<hr>
<h1 id='проектирование-базы-данных-presentai'>Проектирование базы данных PresentAI<a href='#%d0%bf%d1%80%d0%be%d0%b5%d0%ba%d1%82%d0%b8%d1%80%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5-%d0%b1%d0%b0%d0%b7%d1%8b-%d0%b4%d0%b0%d0%bd%d0%bd%d1%8b%d1%85-presentai' class='anchor'>#</a>
</h1><blockquote>
<p><strong>Версия:</strong> 1.0 | <strong>Дата:</strong> 01.03.2026 | <strong>СУБД:</strong> PostgreSQL 16</p>
</blockquote>
<hr>
<h2 id='1-концептуальный-уровень'>1. Концептуальный уровень<a href='#1-%d0%ba%d0%be%d0%bd%d1%86%d0%b5%d0%bf%d1%82%d1%83%d0%b0%d0%bb%d1%8c%d0%bd%d1%8b%d0%b9-%d1%83%d1%80%d0%be%d0%b2%d0%b5%d0%bd%d1%8c' class='anchor'>#</a>
</h2><h3 id='11-предметная-область'>1.1 Предметная область<a href='#11-%d0%bf%d1%80%d0%b5%d0%b4%d0%bc%d0%b5%d1%82%d0%bd%d0%b0%d1%8f-%d0%be%d0%b1%d0%bb%d0%b0%d1%81%d1%82%d1%8c' class='anchor'>#</a>
</h3><p>Система генерации презентаций оперирует следующими <strong>ключевыми понятиями</strong>:</p>
<ul>
<li><strong>Пользователь</strong> — физическое лицо, авторизованное в системе.</li>
<li><strong>Организация (Тенант)</strong> — юридическое или функциональное объединение пользователей. Единица изоляции данных (multi-tenancy).</li>
<li><strong>Проект</strong> — папка для группировки презентаций внутри организации.</li>
<li><strong>Презентация</strong> — основной артефакт. Содержит слайды, источники данных и параметры генерации.</li>
<li><strong>Слайд</strong> — единица контента внутри презентации. Имеет тип, содержимое и ссылки на источники.</li>
<li><strong>Brand Kit</strong> — корпоративный стиль: цвета, шрифты, логотип, шаблон слайда.</li>
<li><strong>Исходный документ</strong> — загруженный пользователем файл или URL, используемый RAG-пайплайном.</li>
<li><strong>Задача генерации</strong> — асинхронная задача создания презентации через LLM.</li>
<li><strong>Задача экспорта</strong> — асинхронная задача конвертации в PPTX / PDF / Google Slides.</li>
<li><strong>Задача индексации</strong> — асинхронная задача обработки исходного документа (chunking + embedding).</li>
<li><strong>Подписка</strong> — тарифный план организации (Free / Pro / Team / Enterprise).</li>
<li><strong>API-ключ</strong> — токен для внешних интеграций.</li>
<li><strong>Webhook</strong> — подписка на события системы с гарантией доставки.</li>
<li><strong>Аудит-лог</strong> — запись каждого значимого действия в системе.</li>
</ul>
<h3 id='12-концептуальная-er-диаграмма-сущности-и-связи'>1.2 Концептуальная ER-диаграмма (сущности и связи)<a href='#12-%d0%ba%d0%be%d0%bd%d1%86%d0%b5%d0%bf%d1%82%d1%83%d0%b0%d0%bb%d1%8c%d0%bd%d0%b0%d1%8f-er-%d0%b4%d0%b8%d0%b0%d0%b3%d1%80%d0%b0%d0%bc%d0%bc%d0%b0-%d1%81%d1%83%d1%89%d0%bd%d0%be%d1%81%d1%82%d0%b8-%d0%b8-%d1%81%d0%b2%d1%8f%d0%b7%d0%b8' class='anchor'>#</a>
</h3><pre tabindex="0"><code class="language-mermaid" data-lang="mermaid">erDiagram
    USERS ||--o{ ORGANIZATION_MEMBERS : &#34;состоит в&#34;
    USERS ||--o{ PRESENTATIONS : &#34;создаёт&#34;
    USERS ||--o{ SOURCE_DOCUMENTS : &#34;загружает&#34;
    USERS ||--o{ API_KEYS : &#34;владеет&#34;
    USERS ||--o{ OAUTH_CONNECTIONS : &#34;имеет&#34;
    USERS ||--o{ PRESENTATION_SHARES : &#34;создаёт&#34;

    ORGANIZATIONS ||--o{ ORGANIZATION_MEMBERS : &#34;включает&#34;
    ORGANIZATIONS ||--o{ PROJECTS : &#34;содержит&#34;
    ORGANIZATIONS ||--o{ BRAND_KITS : &#34;имеет&#34;
    ORGANIZATIONS ||--o{ API_KEYS : &#34;имеет&#34;
    ORGANIZATIONS ||--o{ WEBHOOK_SUBSCRIPTIONS : &#34;подписана на&#34;
    ORGANIZATIONS ||--o{ SOURCE_DOCUMENTS : &#34;хранит&#34;
    ORGANIZATIONS ||--o{ SUBSCRIPTIONS : &#34;оформляет&#34;
    ORGANIZATIONS ||--o{ AUDIT_LOGS : &#34;генерирует&#34;

    PLANS ||--o{ SUBSCRIPTIONS : &#34;определяет&#34;

    PROJECTS ||--o{ PRESENTATIONS : &#34;содержит&#34;

    PRESENTATIONS ||--o{ SLIDES : &#34;состоит из&#34;
    PRESENTATIONS ||--o{ GENERATION_JOBS : &#34;генерируется через&#34;
    PRESENTATIONS ||--o{ EXPORT_JOBS : &#34;экспортируется через&#34;
    PRESENTATIONS ||--o{ PRESENTATION_SOURCES : &#34;использует&#34;
    PRESENTATIONS ||--o{ PRESENTATION_SHARES : &#34;расшаривается через&#34;

    SLIDES ||--o{ SLIDE_VERSIONS : &#34;версионируется&#34;

    SOURCE_DOCUMENTS ||--o{ PRESENTATION_SOURCES : &#34;включается в&#34;
    SOURCE_DOCUMENTS ||--o{ DOCUMENT_INGESTION_JOBS : &#34;обрабатывается&#34;

    BRAND_KITS ||--o{ PRESENTATIONS : &#34;применяется к&#34;

    WEBHOOK_SUBSCRIPTIONS ||--o{ WEBHOOK_EVENTS : &#34;порождает&#34;
</code></pre><h3 id='13-список-сущностей-и-их-роли'>1.3 Список сущностей и их роли<a href='#13-%d1%81%d0%bf%d0%b8%d1%81%d0%be%d0%ba-%d1%81%d1%83%d1%89%d0%bd%d0%be%d1%81%d1%82%d0%b5%d0%b9-%d0%b8-%d0%b8%d1%85-%d1%80%d0%be%d0%bb%d0%b8' class='anchor'>#</a>
</h3><table>
<thead>
<tr>
<th>Сущность</th>
<th>Домен</th>
<th>Описание</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>users</code></td>
<td>Auth</td>
<td>Учётная запись пользователя</td>
</tr>
<tr>
<td><code>organizations</code></td>
<td>Auth</td>
<td>Тенант (компания или команда)</td>
</tr>
<tr>
<td><code>organization_members</code></td>
<td>Auth</td>
<td>Членство пользователя в организации + роль</td>
</tr>
<tr>
<td><code>oauth_connections</code></td>
<td>Auth</td>
<td>OAuth-токены внешних сервисов (Google, Microsoft…)</td>
</tr>
<tr>
<td><code>api_keys</code></td>
<td>Auth</td>
<td>API-ключи для внешних интеграций</td>
</tr>
<tr>
<td><code>plans</code></td>
<td>Billing</td>
<td>Тарифные планы с лимитами</td>
</tr>
<tr>
<td><code>subscriptions</code></td>
<td>Billing</td>
<td>Подписка организации на план</td>
</tr>
<tr>
<td><code>usage_records</code></td>
<td>Billing</td>
<td>Учёт потребления по периодам</td>
</tr>
<tr>
<td><code>projects</code></td>
<td>Presentation</td>
<td>Группа презентаций</td>
</tr>
<tr>
<td><code>brand_kits</code></td>
<td>Presentation</td>
<td>Корпоративный стиль</td>
</tr>
<tr>
<td><code>presentations</code></td>
<td>Presentation</td>
<td>Презентация</td>
</tr>
<tr>
<td><code>slides</code></td>
<td>Presentation</td>
<td>Слайд презентации</td>
</tr>
<tr>
<td><code>slide_versions</code></td>
<td>Presentation</td>
<td>Версия контента слайда</td>
</tr>
<tr>
<td><code>presentation_shares</code></td>
<td>Presentation</td>
<td>Ссылка для шеринга</td>
</tr>
<tr>
<td><code>source_documents</code></td>
<td>AI</td>
<td>Исходный документ / URL</td>
</tr>
<tr>
<td><code>presentation_sources</code></td>
<td>AI</td>
<td>Связь презентации с источниками</td>
</tr>
<tr>
<td><code>document_ingestion_jobs</code></td>
<td>AI</td>
<td>Задача индексации документа</td>
</tr>
<tr>
<td><code>generation_jobs</code></td>
<td>AI</td>
<td>Задача генерации презентации</td>
</tr>
<tr>
<td><code>export_jobs</code></td>
<td>AI</td>
<td>Задача экспорта</td>
</tr>
<tr>
<td><code>webhook_subscriptions</code></td>
<td>AI</td>
<td>Webhook-подписка</td>
</tr>
<tr>
<td><code>webhook_events</code></td>
<td>AI</td>
<td>Событие доставки webhook</td>
</tr>
<tr>
<td><code>audit_logs</code></td>
<td>Auth</td>
<td>Журнал аудита действий</td>
</tr>
</tbody>
</table>
<hr>
<h2 id='2-логический-уровень'>2. Логический уровень<a href='#2-%d0%bb%d0%be%d0%b3%d0%b8%d1%87%d0%b5%d1%81%d0%ba%d0%b8%d0%b9-%d1%83%d1%80%d0%be%d0%b2%d0%b5%d0%bd%d1%8c' class='anchor'>#</a>
</h2><h3 id='21-принципы-нормализации-3nf'>2.1 Принципы нормализации (3NF)<a href='#21-%d0%bf%d1%80%d0%b8%d0%bd%d1%86%d0%b8%d0%bf%d1%8b-%d0%bd%d0%be%d1%80%d0%bc%d0%b0%d0%bb%d0%b8%d0%b7%d0%b0%d1%86%d0%b8%d0%b8-3nf' class='anchor'>#</a>
</h3><p>Все таблицы спроектированы по правилам <strong>Третьей нормальной формы</strong>:</p>
<p><strong>1NF (Первая нормальная форма):</strong></p>
<ul>
<li>Каждый атрибут атомарен.</li>
<li>Нет повторяющихся групп (массивы <code>TEXT[]</code> используются только для простых скалярных наборов — scopes, events; сложные структуры выделены в отдельные таблицы или JSONB).</li>
<li>Каждая таблица имеет первичный ключ.</li>
</ul>
<p><strong>2NF (Вторая нормальная форма):</strong></p>
<ul>
<li>Все таблицы имеют однополевой суррогатный PK (UUID), поэтому частичных зависимостей нет по определению.</li>
<li>Составные естественные ключи при необходимости определены как <code>UNIQUE</code>-ограничения, а не PK.</li>
</ul>
<p><strong>3NF (Третья нормальная форма):</strong></p>
<ul>
<li>Нет транзитивных зависимостей: например, данные тарифного плана (<code>max_users</code>, <code>ai_tokens_month</code>) вынесены в отдельную таблицу <code>plans</code> и связаны через <code>subscriptions</code>, а не дублируются в <code>organizations</code>.</li>
<li>Контактные данные организации (название, slug) хранятся только в <code>organizations</code>, а не дублируются в <code>projects</code> или <code>presentations</code>.</li>
<li>Информация о пользователе (email, name) — только в <code>users</code>.</li>
<li>Статусы генерации хранятся в <code>generation_jobs</code>, а не в <code>presentations</code> (в <code>presentations</code> — только денормализованный <code>status</code> для быстрой фильтрации, обновляемый триггером).</li>
</ul>
<p><strong>Допустимые отклонения (обоснованная денормализация):</strong></p>
<ul>
<li><code>presentations.status</code> — денормализованный кэш из <code>generation_jobs.status</code> для производительности.</li>
<li><code>slides.content</code> — JSONB-структура сложного типа содержимого слайда (текстовые блоки, ссылки на чарты) хранится единым документом из-за высокой вариативности схемы.</li>
<li><code>audit_logs</code> — не связан FK с <code>users</code> и <code>organizations</code> (только хранит ID) для гарантированной записи даже при удалении пользователя.</li>
</ul>
<h3 id='22-логическая-модель-нормализованные-таблицы'>2.2 Логическая модель (нормализованные таблицы)<a href='#22-%d0%bb%d0%be%d0%b3%d0%b8%d1%87%d0%b5%d1%81%d0%ba%d0%b0%d1%8f-%d0%bc%d0%be%d0%b4%d0%b5%d0%bb%d1%8c-%d0%bd%d0%be%d1%80%d0%bc%d0%b0%d0%bb%d0%b8%d0%b7%d0%be%d0%b2%d0%b0%d0%bd%d0%bd%d1%8b%d0%b5-%d1%82%d0%b0%d0%b1%d0%bb%d0%b8%d1%86%d1%8b' class='anchor'>#</a>
</h3><h4 id='домен-auth'>Домен Auth<a href='#%d0%b4%d0%be%d0%bc%d0%b5%d0%bd-auth' class='anchor'>#</a>
</h4><p><strong>users</strong></p>
<pre tabindex="0"><code>id UUID PK
email VARCHAR(255) UNIQUE NOT NULL
name VARCHAR(255) NOT NULL
avatar_url TEXT
is_email_verified BOOLEAN
last_login_at TIMESTAMPTZ
created_at TIMESTAMPTZ
updated_at TIMESTAMPTZ
deleted_at TIMESTAMPTZ  -- soft delete
</code></pre><p><strong>organizations</strong></p>
<pre tabindex="0"><code>id UUID PK
name VARCHAR(255) NOT NULL
slug VARCHAR(100) UNIQUE NOT NULL
logo_url TEXT
website TEXT
created_at TIMESTAMPTZ
updated_at TIMESTAMPTZ
deleted_at TIMESTAMPTZ
</code></pre><p><strong>organization_members</strong></p>
<pre tabindex="0"><code>id UUID PK
organization_id UUID FK → organizations.id
user_id UUID FK → users.id
role org_role ENUM(admin, editor, viewer)
invited_by UUID FK → users.id
joined_at TIMESTAMPTZ
created_at TIMESTAMPTZ
UNIQUE(organization_id, user_id)
</code></pre><p><strong>oauth_connections</strong></p>
<pre tabindex="0"><code>id UUID PK
user_id UUID FK → users.id
provider oauth_provider ENUM(google, microsoft, notion, confluence)
provider_user_id VARCHAR(255) NOT NULL
access_token_encrypted BYTEA NOT NULL
refresh_token_encrypted BYTEA
token_expires_at TIMESTAMPTZ
scopes TEXT[]
created_at TIMESTAMPTZ
updated_at TIMESTAMPTZ
UNIQUE(user_id, provider)
</code></pre><p><strong>api_keys</strong></p>
<pre tabindex="0"><code>id UUID PK
organization_id UUID FK → organizations.id
name VARCHAR(100) NOT NULL
key_hash CHAR(64) NOT NULL  -- SHA-256 of the actual key
key_prefix CHAR(8) NOT NULL -- first 8 chars for display
scopes TEXT[]
rate_limit_per_minute INT
created_by UUID FK → users.id
expires_at TIMESTAMPTZ
last_used_at TIMESTAMPTZ
revoked_at TIMESTAMPTZ
created_at TIMESTAMPTZ
</code></pre><h4 id='домен-billing'>Домен Billing<a href='#%d0%b4%d0%be%d0%bc%d0%b5%d0%bd-billing' class='anchor'>#</a>
</h4><p><strong>plans</strong></p>
<pre tabindex="0"><code>id UUID PK
name VARCHAR(50) UNIQUE NOT NULL
max_users INT  -- NULL = unlimited
max_presentations_per_month INT  -- NULL = unlimited
max_file_size_mb INT NOT NULL
max_source_files_per_presentation INT NOT NULL
ai_tokens_per_month BIGINT  -- NULL = unlimited
storage_gb INT NOT NULL
features JSONB NOT NULL  -- feature flags
price_monthly_usd NUMERIC(10,2)
price_yearly_usd NUMERIC(10,2)
is_active BOOLEAN DEFAULT TRUE
created_at TIMESTAMPTZ
updated_at TIMESTAMPTZ
</code></pre><p><strong>subscriptions</strong></p>
<pre tabindex="0"><code>id UUID PK
organization_id UUID FK → organizations.id UNIQUE
plan_id UUID FK → plans.id
status subscription_status ENUM(active, trialing, past_due, canceled, expired)
current_period_start TIMESTAMPTZ NOT NULL
current_period_end TIMESTAMPTZ NOT NULL
external_subscription_id VARCHAR(255)  -- Stripe subscription ID
cancel_at_period_end BOOLEAN DEFAULT FALSE
created_at TIMESTAMPTZ
updated_at TIMESTAMPTZ
</code></pre><p><strong>usage_records</strong></p>
<pre tabindex="0"><code>id UUID PK
organization_id UUID FK → organizations.id
period_start DATE NOT NULL
period_end DATE NOT NULL
presentations_generated INT DEFAULT 0
slides_generated INT DEFAULT 0
tokens_used BIGINT DEFAULT 0
storage_bytes_used BIGINT DEFAULT 0
cost_usd NUMERIC(12,4) DEFAULT 0
created_at TIMESTAMPTZ
updated_at TIMESTAMPTZ
UNIQUE(organization_id, period_start)
</code></pre><h4 id='домен-presentation'>Домен Presentation<a href='#%d0%b4%d0%be%d0%bc%d0%b5%d0%bd-presentation' class='anchor'>#</a>
</h4><p><strong>brand_kits</strong></p>
<pre tabindex="0"><code>id UUID PK
organization_id UUID FK → organizations.id
name VARCHAR(100) NOT NULL
is_default BOOLEAN DEFAULT FALSE
primary_color CHAR(7)     -- HEX #RRGGBB
secondary_color CHAR(7)
background_color CHAR(7)
accent_color CHAR(7)
text_color CHAR(7)
logo_url TEXT
font_heading VARCHAR(100)
font_body VARCHAR(100)
additional_settings JSONB  -- extra colors, spacing, etc.
template_s3_key TEXT       -- PPTX template file
created_by UUID FK → users.id
created_at TIMESTAMPTZ
updated_at TIMESTAMPTZ
UNIQUE(organization_id, name)
</code></pre><p><strong>projects</strong></p>
<pre tabindex="0"><code>id UUID PK
organization_id UUID FK → organizations.id
name VARCHAR(255) NOT NULL
description TEXT
is_archived BOOLEAN DEFAULT FALSE
created_by UUID FK → users.id
created_at TIMESTAMPTZ
updated_at TIMESTAMPTZ
</code></pre><p><strong>presentations</strong></p>
<pre tabindex="0"><code>id UUID PK
project_id UUID FK → projects.id
title VARCHAR(500) NOT NULL
description TEXT
status presentation_status ENUM(draft, outline_ready, generating, ready, error)
tone tone_type ENUM(formal, business, persuasive, technical, educational, friendly)
target_audience VARCHAR(100)
language CHAR(5) DEFAULT &#39;ru&#39;
slide_count INT DEFAULT 0
thumbnail_url TEXT
brand_kit_id UUID FK → brand_kits.id
current_generation_job_id UUID  -- FK → generation_jobs.id (delayed)
created_by UUID FK → users.id
created_at TIMESTAMPTZ
updated_at TIMESTAMPTZ
deleted_at TIMESTAMPTZ
</code></pre><p><strong>slides</strong></p>
<pre tabindex="0"><code>id UUID PK
presentation_id UUID FK → presentations.id
position SMALLINT NOT NULL
title TEXT
content JSONB NOT NULL       -- {type, blocks[], chart_config, table_data, ...}
slide_type slide_type ENUM(title_slide, content, chart, table, image, quote, divider)
status slide_status ENUM(pending, generating, ready, error)
source_refs JSONB            -- [{source_id, chunk_id, text_fragment}, ...]
hallucination_flags JSONB    -- [{claim, flag_type, confidence}, ...]
created_at TIMESTAMPTZ
updated_at TIMESTAMPTZ
UNIQUE(presentation_id, position)
</code></pre><p><strong>slide_versions</strong></p>
<pre tabindex="0"><code>id UUID PK
slide_id UUID FK → slides.id
version_number SMALLINT NOT NULL
content JSONB NOT NULL
created_by UUID FK → users.id
created_at TIMESTAMPTZ
UNIQUE(slide_id, version_number)
</code></pre><p><strong>presentation_shares</strong></p>
<pre tabindex="0"><code>id UUID PK
presentation_id UUID FK → presentations.id
token CHAR(32) UNIQUE NOT NULL
access_level share_access ENUM(view, comment, edit)
password_hash TEXT
expires_at TIMESTAMPTZ
view_count INT DEFAULT 0
created_by UUID FK → users.id
created_at TIMESTAMPTZ
</code></pre><h4 id='домен-ai'>Домен AI<a href='#%d0%b4%d0%be%d0%bc%d0%b5%d0%bd-ai' class='anchor'>#</a>
</h4><p><strong>source_documents</strong></p>
<pre tabindex="0"><code>id UUID PK
organization_id UUID FK → organizations.id
original_filename TEXT NOT NULL
file_type source_file_type ENUM(pdf, docx, xlsx, csv, pptx, url, image, txt)
s3_key TEXT        -- NULL for URL sources
file_size_bytes BIGINT
content_hash CHAR(64)  -- SHA-256 for deduplication
url TEXT           -- for web sources
ingestion_status ingestion_status ENUM(pending, processing, indexed, failed)
page_count INT
word_count INT
created_by UUID FK → users.id
created_at TIMESTAMPTZ
updated_at TIMESTAMPTZ
</code></pre><p><strong>presentation_sources</strong></p>
<pre tabindex="0"><code>id UUID PK
presentation_id UUID FK → presentations.id
source_document_id UUID FK → source_documents.id
added_at TIMESTAMPTZ DEFAULT now()
UNIQUE(presentation_id, source_document_id)
</code></pre><p><strong>document_ingestion_jobs</strong></p>
<pre tabindex="0"><code>id UUID PK
source_document_id UUID FK → source_documents.id
status job_status ENUM(pending, running, completed, failed, retrying)
chunks_created INT
embeddings_created INT
worker_id VARCHAR(100)
started_at TIMESTAMPTZ
completed_at TIMESTAMPTZ
error_message TEXT
retry_count SMALLINT DEFAULT 0
created_at TIMESTAMPTZ
</code></pre><p><strong>generation_jobs</strong></p>
<pre tabindex="0"><code>id UUID PK
presentation_id UUID FK → presentations.id
status job_status ENUM(pending, running, completed, failed, retrying)
llm_provider llm_provider ENUM(claude, gpt4o, llama3, gemini)
outline_tokens_used INT
generation_tokens_used INT
total_tokens_used INT
total_cost_usd NUMERIC(10,6)
slides_completed INT DEFAULT 0
slides_total INT
worker_id VARCHAR(100)
started_at TIMESTAMPTZ
completed_at TIMESTAMPTZ
error_message TEXT
retry_count SMALLINT DEFAULT 0
created_at TIMESTAMPTZ
</code></pre><p><strong>export_jobs</strong></p>
<pre tabindex="0"><code>id UUID PK
presentation_id UUID FK → presentations.id
format export_format ENUM(pptx, pdf, google_slides, png, web)
status job_status ENUM(pending, running, completed, failed)
s3_key TEXT
google_file_id TEXT
download_url TEXT
expires_at TIMESTAMPTZ
slide_range INT[]          -- NULL = all slides
created_by UUID FK → users.id
started_at TIMESTAMPTZ
completed_at TIMESTAMPTZ
error_message TEXT
created_at TIMESTAMPTZ
</code></pre><p><strong>webhook_subscriptions</strong></p>
<pre tabindex="0"><code>id UUID PK
organization_id UUID FK → organizations.id
url TEXT NOT NULL
secret_hash TEXT NOT NULL   -- HMAC-SHA256 secret
events TEXT[] NOT NULL      -- event type filters
is_active BOOLEAN DEFAULT TRUE
created_by UUID FK → users.id
created_at TIMESTAMPTZ
updated_at TIMESTAMPTZ
</code></pre><p><strong>webhook_events</strong></p>
<pre tabindex="0"><code>id UUID PK
webhook_subscription_id UUID FK → webhook_subscriptions.id
event_type VARCHAR(100) NOT NULL
payload JSONB NOT NULL
status webhook_status ENUM(pending, delivered, failed, abandoned)
http_status_code SMALLINT
attempts SMALLINT DEFAULT 0
last_attempt_at TIMESTAMPTZ
next_retry_at TIMESTAMPTZ
delivered_at TIMESTAMPTZ
created_at TIMESTAMPTZ
</code></pre><p><strong>audit_logs</strong></p>
<pre tabindex="0"><code>id UUID PK
organization_id UUID NOT NULL   -- no FK, хранить даже после удаления орг.
user_id UUID                    -- no FK, nullable для системных действий
action VARCHAR(100) NOT NULL    -- &#39;presentation.created&#39;, &#39;user.deleted&#39;, ...
resource_type VARCHAR(50)
resource_id UUID
metadata JSONB
ip_address INET
user_agent TEXT
created_at TIMESTAMPTZ NOT NULL
-- PARTITION BY RANGE (created_at)
</code></pre><h3 id='23-диаграмма-связей-логический-уровень'>2.3 Диаграмма связей (логический уровень)<a href='#23-%d0%b4%d0%b8%d0%b0%d0%b3%d1%80%d0%b0%d0%bc%d0%bc%d0%b0-%d1%81%d0%b2%d1%8f%d0%b7%d0%b5%d0%b9-%d0%bb%d0%be%d0%b3%d0%b8%d1%87%d0%b5%d1%81%d0%ba%d0%b8%d0%b9-%d1%83%d1%80%d0%be%d0%b2%d0%b5%d0%bd%d1%8c' class='anchor'>#</a>
</h3><pre tabindex="0"><code class="language-mermaid" data-lang="mermaid">erDiagram
    users {
        uuid id PK
        varchar email
        varchar name
        timestamptz deleted_at
    }
    organizations {
        uuid id PK
        varchar name
        varchar slug
    }
    organization_members {
        uuid id PK
        uuid organization_id FK
        uuid user_id FK
        enum role
    }
    plans {
        uuid id PK
        varchar name
        int max_users
        bigint ai_tokens_per_month
        jsonb features
    }
    subscriptions {
        uuid id PK
        uuid organization_id FK
        uuid plan_id FK
        enum status
        date current_period_end
    }
    usage_records {
        uuid id PK
        uuid organization_id FK
        date period_start
        int presentations_generated
        bigint tokens_used
    }
    brand_kits {
        uuid id PK
        uuid organization_id FK
        varchar name
        char primary_color
        varchar font_heading
        text logo_url
    }
    projects {
        uuid id PK
        uuid organization_id FK
        varchar name
        uuid created_by FK
    }
    presentations {
        uuid id PK
        uuid project_id FK
        varchar title
        enum status
        enum tone
        uuid brand_kit_id FK
        uuid created_by FK
    }
    slides {
        uuid id PK
        uuid presentation_id FK
        smallint position
        enum slide_type
        jsonb content
        jsonb source_refs
    }
    slide_versions {
        uuid id PK
        uuid slide_id FK
        smallint version_number
        jsonb content
    }
    source_documents {
        uuid id PK
        uuid organization_id FK
        text original_filename
        enum file_type
        char content_hash
        enum ingestion_status
    }
    presentation_sources {
        uuid id PK
        uuid presentation_id FK
        uuid source_document_id FK
    }
    generation_jobs {
        uuid id PK
        uuid presentation_id FK
        enum status
        enum llm_provider
        int total_tokens_used
        numeric total_cost_usd
    }
    export_jobs {
        uuid id PK
        uuid presentation_id FK
        enum format
        enum status
        text s3_key
    }
    webhook_subscriptions {
        uuid id PK
        uuid organization_id FK
        text url
        text_array events
    }
    webhook_events {
        uuid id PK
        uuid webhook_subscription_id FK
        varchar event_type
        enum status
        smallint attempts
    }
    audit_logs {
        uuid id PK
        uuid organization_id
        uuid user_id
        varchar action
        timestamptz created_at
    }

    users ||--o{ organization_members : &#34;member_of&#34;
    organizations ||--o{ organization_members : &#34;has&#34;
    organizations ||--o{ projects : &#34;owns&#34;
    organizations ||--o{ brand_kits : &#34;owns&#34;
    organizations ||--o{ subscriptions : &#34;has&#34;
    organizations ||--o{ usage_records : &#34;tracks&#34;
    organizations ||--o{ webhook_subscriptions : &#34;has&#34;
    plans ||--o{ subscriptions : &#34;defines&#34;
    projects ||--o{ presentations : &#34;contains&#34;
    presentations ||--o{ slides : &#34;has&#34;
    presentations ||--o{ generation_jobs : &#34;spawns&#34;
    presentations ||--o{ export_jobs : &#34;exports_via&#34;
    presentations ||--o{ presentation_sources : &#34;references&#34;
    slides ||--o{ slide_versions : &#34;versioned_by&#34;
    source_documents ||--o{ presentation_sources : &#34;used_in&#34;
    source_documents ||--o{ document_ingestion_jobs : &#34;processed_by&#34;
    brand_kits ||--o{ presentations : &#34;styles&#34;
    webhook_subscriptions ||--o{ webhook_events : &#34;generates&#34;
</code></pre><hr>
<h2 id='3-физический-уровень'>3. Физический уровень<a href='#3-%d1%84%d0%b8%d0%b7%d0%b8%d1%87%d0%b5%d1%81%d0%ba%d0%b8%d0%b9-%d1%83%d1%80%d0%be%d0%b2%d0%b5%d0%bd%d1%8c' class='anchor'>#</a>
</h2><h3 id='31-хранилище-и-субд'>3.1 Хранилище и СУБД<a href='#31-%d1%85%d1%80%d0%b0%d0%bd%d0%b8%d0%bb%d0%b8%d1%89%d0%b5-%d0%b8-%d1%81%d1%83%d0%b1%d0%b4' class='anchor'>#</a>
</h3><ul>
<li><strong>PostgreSQL 16</strong> — основная реляционная БД.</li>
<li><strong>RDS Multi-AZ</strong> в cloud; альтернативно — managed PostgreSQL (Yandex Managed PostgreSQL, Supabase) для РФ-региона.</li>
<li><strong>Репликация:</strong> streaming replication с 1 read replica для отчётных запросов.</li>
<li><strong>Бэкап:</strong> continuous WAL archiving в S3 + ежедневный pg_dump snapshot. RPO = 5 мин.</li>
</ul>
<h3 id='32-row-level-security-rls'>3.2 Row-Level Security (RLS)<a href='#32-row-level-security-rls' class='anchor'>#</a>
</h3><p>Для Free/Pro тарифов данные разных тенантов изолируются через <strong>PostgreSQL RLS</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#75715e">-- Пример для таблицы presentations
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">TABLE</span> presentations ENABLE <span style="color:#66d9ef">ROW</span> <span style="color:#66d9ef">LEVEL</span> <span style="color:#66d9ef">SECURITY</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> POLICY tenant_isolation <span style="color:#66d9ef">ON</span> presentations
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">USING</span> (
</span></span><span style="display:flex;"><span>        project_id <span style="color:#66d9ef">IN</span> (
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">SELECT</span> id <span style="color:#66d9ef">FROM</span> projects
</span></span><span style="display:flex;"><span>            <span style="color:#66d9ef">WHERE</span> organization_id <span style="color:#f92672">=</span> current_setting(<span style="color:#e6db74">&#39;app.current_org_id&#39;</span>)::uuid
</span></span><span style="display:flex;"><span>        )
</span></span><span style="display:flex;"><span>    );
</span></span></code></pre></div><p>Для Enterprise — выделенная схема PostgreSQL (<code>CREATE SCHEMA tenant_&lt;id&gt;</code>) или отдельный инстанс.</p>
<h3 id='33-партиционирование'>3.3 Партиционирование<a href='#33-%d0%bf%d0%b0%d1%80%d1%82%d0%b8%d1%86%d0%b8%d0%be%d0%bd%d0%b8%d1%80%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5' class='anchor'>#</a>
</h3><p><strong><code>audit_logs</code></strong> — партиционирование по диапазону дат (ежемесячные партиции):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> audit_logs (
</span></span><span style="display:flex;"><span>    id UUID <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    created_at TIMESTAMPTZ <span style="color:#66d9ef">NOT</span> <span style="color:#66d9ef">NULL</span>,
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>) PARTITION <span style="color:#66d9ef">BY</span> RANGE (created_at);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> audit_logs_2026_03
</span></span><span style="display:flex;"><span>    PARTITION <span style="color:#66d9ef">OF</span> audit_logs
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">FOR</span> <span style="color:#66d9ef">VALUES</span> <span style="color:#66d9ef">FROM</span> (<span style="color:#e6db74">&#39;2026-03-01&#39;</span>) <span style="color:#66d9ef">TO</span> (<span style="color:#e6db74">&#39;2026-04-01&#39;</span>);
</span></span></code></pre></div><p>Retention policy: партиции старше 90 дней архивируются в S3, локальные удаляются.</p>
<p><strong><code>usage_records</code></strong> — партиционирование по <code>period_start</code> (квартальные партиции).</p>
<p><strong><code>webhook_events</code></strong> — партиционирование по <code>created_at</code> (ежемесячные). TTL 7 дней.</p>
<h3 id='34-ключевые-индексы-сводная-таблица'>3.4 Ключевые индексы (сводная таблица)<a href='#34-%d0%ba%d0%bb%d1%8e%d1%87%d0%b5%d0%b2%d1%8b%d0%b5-%d0%b8%d0%bd%d0%b4%d0%b5%d0%ba%d1%81%d1%8b-%d1%81%d0%b2%d0%be%d0%b4%d0%bd%d0%b0%d1%8f-%d1%82%d0%b0%d0%b1%d0%bb%d0%b8%d1%86%d0%b0' class='anchor'>#</a>
</h3><table>
<thead>
<tr>
<th>Таблица</th>
<th>Поля</th>
<th>Тип</th>
<th>Назначение</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>users</code></td>
<td><code>email</code></td>
<td>BTREE UNIQUE</td>
<td>Логин по email</td>
</tr>
<tr>
<td><code>users</code></td>
<td><code>deleted_at</code></td>
<td>BTREE PARTIAL (WHERE deleted_at IS NULL)</td>
<td>Фильтр активных</td>
</tr>
<tr>
<td><code>organization_members</code></td>
<td><code>(organization_id, user_id)</code></td>
<td>BTREE UNIQUE</td>
<td>Целостность членства</td>
</tr>
<tr>
<td><code>organization_members</code></td>
<td><code>user_id</code></td>
<td>BTREE</td>
<td>Организации пользователя</td>
</tr>
<tr>
<td><code>presentations</code></td>
<td><code>project_id, created_at DESC</code></td>
<td>BTREE</td>
<td>Список презентаций в проекте</td>
</tr>
<tr>
<td><code>presentations</code></td>
<td><code>created_by, status</code></td>
<td>BTREE</td>
<td>Мои презентации по статусу</td>
</tr>
<tr>
<td><code>slides</code></td>
<td><code>presentation_id, position</code></td>
<td>BTREE</td>
<td>Порядок слайдов</td>
</tr>
<tr>
<td><code>source_documents</code></td>
<td><code>content_hash</code></td>
<td>BTREE</td>
<td>Дедупликация файлов</td>
</tr>
<tr>
<td><code>source_documents</code></td>
<td><code>organization_id, ingestion_status</code></td>
<td>BTREE</td>
<td>Фильтр по статусу</td>
</tr>
<tr>
<td><code>generation_jobs</code></td>
<td><code>presentation_id</code></td>
<td>BTREE</td>
<td>Задачи презентации</td>
</tr>
<tr>
<td><code>generation_jobs</code></td>
<td><code>status, created_at</code></td>
<td>BTREE PARTIAL</td>
<td>Очередь pending-задач</td>
</tr>
<tr>
<td><code>webhook_events</code></td>
<td><code>webhook_subscription_id, status</code></td>
<td>BTREE</td>
<td>Pending events</td>
</tr>
<tr>
<td><code>webhook_events</code></td>
<td><code>next_retry_at</code></td>
<td>BTREE PARTIAL (WHERE status = &lsquo;pending&rsquo;)</td>
<td>Retry scheduler</td>
</tr>
<tr>
<td><code>audit_logs</code></td>
<td><code>organization_id, created_at DESC</code></td>
<td>BTREE</td>
<td>Лог организации</td>
</tr>
<tr>
<td><code>api_keys</code></td>
<td><code>key_hash</code></td>
<td>BTREE UNIQUE</td>
<td>Проверка ключа</td>
</tr>
</tbody>
</table>
<h3 id='35-миграции'>3.5 Миграции<a href='#35-%d0%bc%d0%b8%d0%b3%d1%80%d0%b0%d1%86%d0%b8%d0%b8' class='anchor'>#</a>
</h3><p>Инструмент: <strong>Alembic</strong> (Python). Стратегия zero-downtime:</p>
<ol>
<li><strong>Expand:</strong> добавить новый столбец (nullable).</li>
<li><strong>Migrate:</strong> бэкфилл данных батчами.</li>
<li><strong>Contract:</strong> добавить NOT NULL constraint, удалить старый столбец.</li>
</ol>
<p>Все изменения схемы backward-compatible на период деплоя.</p>
<h3 id='36-шифрование'>3.6 Шифрование<a href='#36-%d1%88%d0%b8%d1%84%d1%80%d0%be%d0%b2%d0%b0%d0%bd%d0%b8%d0%b5' class='anchor'>#</a>
</h3><ul>
<li><strong>At-rest:</strong> AES-256 через RDS/disk encryption.</li>
<li><strong>Чувствительные поля:</strong> <code>oauth_connections.access_token_encrypted</code>, <code>oauth_connections.refresh_token_encrypted</code> — зашифрованы на уровне приложения (AES-256-GCM) перед записью в БД. Ключи хранятся в HashiCorp Vault / AWS KMS.</li>
<li><strong>API-ключи:</strong> в БД хранится только SHA-256 хеш (<code>key_hash</code>), не сам ключ. Префикс (<code>key_prefix</code>) — только для отображения пользователю.</li>
</ul>
<h3 id='37-схема-управления-данными-тенантов-multi-tenancy'>3.7 Схема управления данными тенантов (Multi-tenancy)<a href='#37-%d1%81%d1%85%d0%b5%d0%bc%d0%b0-%d1%83%d0%bf%d1%80%d0%b0%d0%b2%d0%bb%d0%b5%d0%bd%d0%b8%d1%8f-%d0%b4%d0%b0%d0%bd%d0%bd%d1%8b%d0%bc%d0%b8-%d1%82%d0%b5%d0%bd%d0%b0%d0%bd%d1%82%d0%be%d0%b2-multi-tenancy' class='anchor'>#</a>
</h3><pre tabindex="0"><code class="language-mermaid" data-lang="mermaid">flowchart TD
    subgraph FREE_PRO[&#34;Free / Pro — Shared DB&#34;]
        RLS[&#34;Row-Level Security\ntenant_id в каждой таблице&#34;]
        SHARED_S3[&#34;S3: shared bucket\nпрефикс /org/{id}/&#34;]
    end

    subgraph TEAM[&#34;Team — Shared DB + Isolated Storage&#34;]
        RLS2[&#34;Row-Level Security&#34;]
        OWN_S3[&#34;S3: отдельный bucket\nper organization&#34;]
    end

    subgraph ENTERPRISE[&#34;Enterprise — Isolated&#34;]
        OWN_SCHEMA[&#34;Отдельная схема PostgreSQL\nCREATE SCHEMA tenant_XYZ&#34;]
        OWN_INSTANCE[&#34;Или выделенный инстанс&#34;]
        OWN_S3_E[&#34;S3: выделенный bucket&#34;]
        OWN_QDRANT[&#34;Qdrant: изолированная коллекция&#34;]
    end

    subgraph ON_PREM[&#34;On-Premise&#34;]
        LOCAL_PG[&#34;PostgreSQL в контуре клиента&#34;]
        LOCAL_S3[&#34;MinIO / локальное хранилище&#34;]
        LOCAL_Q[&#34;Qdrant self-hosted&#34;]
    end
</code></pre><hr>
<h2 id='4-связанные-файлы'>4. Связанные файлы<a href='#4-%d1%81%d0%b2%d1%8f%d0%b7%d0%b0%d0%bd%d0%bd%d1%8b%d0%b5-%d1%84%d0%b0%d0%b9%d0%bb%d1%8b' class='anchor'>#</a>
</h2><ul>
<li><strong><a
  href="/03_backend/01_info_models/relational/"
    class="is-pretty-link">relational.md</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></strong> — детальное описание каждой PostgreSQL-таблицы: поля, индексы, ограничения, триггеры, типичные запросы.</li>
<li><strong><a
  href="/03_backend/01_info_models/documents/"
    class="is-pretty-link">documents.md</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></strong> — схемы документных коллекций (трейсы генерации, аналитика).</li>
<li><strong><a
  href="/03_backend/01_info_models/vector_store/"
    class="is-pretty-link">vector_store.md</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></strong> — схема векторного хранилища Qdrant: chunking, HNSW-параметры, similarity-запросы.</li>
<li><strong><a
  href="/03_backend/01_info_models/cache/"
    class="is-pretty-link">cache.md</a
>



<style>
  .ramka-5 {
      position: relative;
      z-index: 0;
       
      border-radius: 10px;
      overflow: hidden;
      margin: 30px auto;
      display: flex;
      align-items: center;
      justify-content: center;  
      font-size: 24px;
      font-family: 'Roboto', sans-serif;     
  }
  .ramka-5::before {
      content: '';
      position: absolute;
      z-index: -2;
      left: -50%;
      top: -50%;
      width: 200%;
      height: 200%;
      background-color: #BFE2FF;
      background-repeat: no-repeat;
      background-size: 50% 50%, 50% 50%;
      background-position: 0 0, 100% 0, 100% 100%, 0 100%;
      background-image: linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7), linear-gradient(#BFE2FF, #BFE2FF), linear-gradient(#337AB7, #337AB7);
      animation: anim-ramka-5 4s linear infinite;
  }
  .ramka-5::after {
      content: '';
      position: absolute;
      z-index: -1;
      left: 6px;
      top: 6px;
      width: calc(100% - 12px);
      height: calc(100% - 12px);
      background: white;
      border-radius: 5px;
  }
  @keyframes anim-ramka-5 {
      100% {
          transform: rotate(1turn);
      }
  }
  </style>

<script lang="javascript">
  document.addEventListener('DOMContentLoaded', (event) => {
    let params = new URLSearchParams(document.location.search);
    let methodName = params.get('methodName'); 
    let method = document.getElementById("createRequest");

    if (method != null && methodName != null){
      method.classList.add('ramka-5');
    }
  });
</script></strong> — Redis-схемы: сессии, семантический кэш LLM, checkpoint генерации, rate limiting.</li>
</ul>
<div id="inner-pages" class="inner-pages">
  <br>
  <p><b>Вложенные статьи:</b></p>
  <table style="font-size: 14px;">
    <tr>
      <th>Название</th>
      <th>Описание</th>
    <tr>
    
    <tr>
      <td><a href="http://localhost:1313/03_backend/01_info_models/relational/">Реляционные таблицы (PostgreSQL)</a></td>
      <td>Детальное описание схемы PostgreSQL 16: таблицы, индексы, ограничения, триггеры.</td>
    </tr>
    
    <tr>
      <td><a href="http://localhost:1313/03_backend/01_info_models/documents/">Документные коллекции</a></td>
      <td>Схемы документных коллекций для хранения трейсов генерации и аналитики.</td>
    </tr>
    
    <tr>
      <td><a href="http://localhost:1313/03_backend/01_info_models/vector_store/">Векторное хранилище (Qdrant)</a></td>
      <td>Схема, стратегия chunking, HNSW-параметры и similarity-запросы для RAG-пайплайна.</td>
    </tr>
    
    <tr>
      <td><a href="http://localhost:1313/03_backend/01_info_models/cache/">Кэш и очереди (Redis)</a></td>
      <td>Схемы Redis-ключей: сессии, семантический кэш LLM, checkpoint генерации, rate limiting.</td>
    </tr>
    
  </tr>
</table>
</div><script lang="js">
  const innerPages = document.getElementById("inner-pages");
  if (innerPages) {
    innerPages.querySelectorAll("li").forEach(listElement => {
      listElement.addEventListener("click", () => {
        const name = listElement.innerText.trim();
        if (openedMenu) {
          if (openedMenu.includes(name)) {
            const index = openedMenu.findIndex(item => item === name);
            openedMenu.splice(index, 1);
          } else {
            openedMenu.push(name);
          }
          localStorage.setItem("openedMenu", JSON.stringify(openedMenu));
        } else {
          localStorage.setItem("openedMenu", "[" + name + "]")
        }
      });
    });
  }
</script><nav class="pagination"><a class="nav nav-prev" href="http://localhost:1313/03_backend/" title="Backend"><i class="fa fa-arrow-left" aria-hidden="true"></i> Предыдущее - Backend</a>
  <a class="nav nav-next" href="http://localhost:1313/03_backend/01_info_models/relational/" title="Реляционные таблицы (PostgreSQL)">Следующее - Реляционные таблицы (PostgreSQL) <i class="fa fa-arrow-right" aria-hidden="true"></i></a>
</nav></div><div class="column is-sticky is-paddingless" id="tocWrapper">
  <div class="is-paddingless" id="tocContainer">
    <div id="tocContent">
      <div class="additionalinfo">
    <span id="method_name">Модель данных и базы данных</span>







    <strong>Описание:</strong> Описание сущностей, связей и принципов хранения данных.
</div>
      <div class="toc-header">
        <h6 class="toc-title is-marginless">Содержание:On this page:</h6>
        <i
          title="Back to top"
          id="tocBackToTop"
          class="fa-solid fa-circle-arrow-up"
        ></i>      
      </div>
      <div id="toc"><nav id="TableOfContents">
  <ul>
    <li><a href="#хранилища-данных">Хранилища данных</a></li>
  </ul>

  <ul>
    <li><a href="#1-концептуальный-уровень">1. Концептуальный уровень</a>
      <ul>
        <li><a href="#11-предметная-область">1.1 Предметная область</a></li>
        <li><a href="#12-концептуальная-er-диаграмма-сущности-и-связи">1.2 Концептуальная ER-диаграмма (сущности и связи)</a></li>
        <li><a href="#13-список-сущностей-и-их-роли">1.3 Список сущностей и их роли</a></li>
      </ul>
    </li>
    <li><a href="#2-логический-уровень">2. Логический уровень</a>
      <ul>
        <li><a href="#21-принципы-нормализации-3nf">2.1 Принципы нормализации (3NF)</a></li>
        <li><a href="#22-логическая-модель-нормализованные-таблицы">2.2 Логическая модель (нормализованные таблицы)</a></li>
        <li><a href="#23-диаграмма-связей-логический-уровень">2.3 Диаграмма связей (логический уровень)</a></li>
      </ul>
    </li>
    <li><a href="#3-физический-уровень">3. Физический уровень</a>
      <ul>
        <li><a href="#31-хранилище-и-субд">3.1 Хранилище и СУБД</a></li>
        <li><a href="#32-row-level-security-rls">3.2 Row-Level Security (RLS)</a></li>
        <li><a href="#33-партиционирование">3.3 Партиционирование</a></li>
        <li><a href="#34-ключевые-индексы-сводная-таблица">3.4 Ключевые индексы (сводная таблица)</a></li>
        <li><a href="#35-миграции">3.5 Миграции</a></li>
        <li><a href="#36-шифрование">3.6 Шифрование</a></li>
        <li><a href="#37-схема-управления-данными-тенантов-multi-tenancy">3.7 Схема управления данными тенантов (Multi-tenancy)</a></li>
      </ul>
    </li>
    <li><a href="#4-связанные-файлы">4. Связанные файлы</a></li>
  </ul>
</nav></div>
<ul class="info" style="line-height: 1.2; list-style-type: none; border: 1px solid; border-radius: 1px; padding: 5px; margin: 16px 10px 0; color: black;">
    
    
    
    
    
    
    
    
    </ul>
    
<div id="taxonomies"><div class="taxonomy-wrapper"></div><div class="taxonomy-wrapper"></div></div>
      <div class="toc-header"><div class="edit-meta"></div>
</div>
    </div>
  </div>
  <div
    class="is-paddingless"
    id="tocCollapsible"
    title="Collapse/Uncollapse table of contents"
  >
    <i class="fa-solid fa-angles-right fa-lg"></i>
  </div>
</div>
</div>
</div><script type='text/javascript'>
  const baseUrl = 'http:\/\/localhost:1313\/';
  const codeCopyBefore = 'Copy to clipboard';
  const codeCopyAfter = 'Copied to clipboard';
  const svgDownloadLabel = 'Download as SVG';
  const helperLoadingLabel = 'Loading';
  const searchNoResults = 'No result found';
  const introNextLabel = 'Next';
  const introPrevLabel = 'Previous';
  const introSkipLabel = '✗';
  const introDoneLabel = 'Done';
  const printLabel = 'Print current page';
  const qrCodeLabel = 'Show current page QR code';
  const naCommonLabel = 'Not available';
</script>
<script
      type="module"
      src="/js/theme/modules/const.min.js"
    ></script><script
      type="module"
      src="/js/theme/modules/helpers.min.js"
    ></script><script
      type="module"
      src="/js/theme/modules/helpersGlobal.min.js"
    ></script><script
      type="module"
      src="/js/theme/init.min.js"
    ></script><script
      type="module"
      src="/js/theme/navbar.min.js"
    ></script><script
      type="module"
      src="/js/theme/print.min.js"
    ></script><script
      type="module"
      src="/js/theme/qrcode.min.js"
    ></script><script
      type="module"
      src="/js/theme/search.min.js"
    ></script><script
      type="module"
      src="/js/theme/shortcuts.min.js"
    ></script><script
      type="module"
      src="/js/theme/sidebar.min.js"
    ></script><script
      type="module"
      src="/js/theme/toc.min.js"
    ></script><script
      type="module"
      src="/js/external/mermaid/mermaid.min.js"
    ></script><script
      type="module"
      src="/js/fencedcodes/mermaid.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/jquery/jquery-3.6.3.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/tippy/popper.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/tippy/tippy-bundle.umd.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/markmap/markmap-autoloader.min.js"
    ></script><script
      type="text/javascript"
      src="/js/theme/browserCompatibility.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/flexsearch/flexsearch.bundle.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/qrious/qrious.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/overlay-scrollbars/overlayscrollbars.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/markmap/markmap.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/readfile/rawdeflate.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/1ce05b4b.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/techradar/d3.v4.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/techradar/radar.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/bpmn-visualization/bpmn-visualization.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/sorttable/sorttable.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/mermaid/svg-pan-zoom.min.js"
    ></script><script
      type="text/javascript"
      src="/js/external/simplesearch/simplesearch.min.js"
    ></script>
<script>$("table").addClass("sortable");</script>
  </body>
</html>
